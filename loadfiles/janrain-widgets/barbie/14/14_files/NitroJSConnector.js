var nitroProtocol="http";if(document.location.toString().indexOf("https://")!=-1){nitroProtocol="https"}if(typeof nitroLibsVersion=="undefined"){nitroLibsVersion="current"}if(typeof NitroCookies=="undefined"){document.write('<script type="text/javascript" src="'+nitroProtocol+"://assets.bunchball.net/scripts/cookies/"+nitroLibsVersion+'/NitroCookies.js"><\/script>')}if(typeof NitroJSConnector=="undefined"){function NitroJSConnector(a){this.connectionParams=a;if(typeof NitroJSConnector.counter=="undefined"){NitroJSConnector.counter=0}this.counterId=NitroJSConnector.counter++;if(typeof this.connectionParams.autoLogin=="undefined"){this.connectionParams.autoLogin=true}this.tryLogin=function(){if(this.connectionParams.userId==null){if(typeof NitroCookies!="undefined"){NitroCookies.getUserId(this.connectionParams.apiKey,NitroJSConnector.gotUserId);return}}if(!this.connectionParams.autoLogin&&this.connectionParams.userId.indexOf("NITRO_USER_")==0){NitroCookies.createJSCookie("anonymous",true,365);this.connectionParams.userId=null}if(NitroCookies.readJSCookie("NITRO_SESSION_"+this.connectionParams.apiKey+"_"+this.connectionParams.userId)){this.connectionParams.sessionKey=NitroCookies.readJSCookie("NITRO_SESSION_"+this.connectionParams.apiKey+"_"+this.connectionParams.userId);this.connectionParams.abTestGroup=NitroCookies.readJSCookie("NITRO_AB_"+this.connectionParams.apiKey+"_"+this.connectionParams.userId)}else{if(this.connectionParams.autoLogin&&this.connectionParams.anonymous){NitroCookies.createJSCookie("anonymous",true,365);this.callAPI("method=user.anonymousLogin&apiKey="+this.connectionParams.apiKey,"NitroJSConnector.processLogin",this.counterId,false,true)}else{if(this.connectionParams.autoLogin&&typeof this.connectionParams.timeStamp=="undefined"){this.callAPI("method=user.login&apiKey="+this.connectionParams.apiKey,"NitroJSConnector.processLogin",this.counterId,true,true)}else{if(this.connectionParams.userId){NitroCookies.createJSCookie("anonymous",false,365);this.callAPI("method=user.login&apiKey="+this.connectionParams.apiKey+"&ts="+this.connectionParams.timeStamp+"&sig="+this.connectionParams.signature,"NitroJSConnector.processLogin",this.counterId,true,true)}else{this.connectionParams.noLogin=true;if(NitroJSConnector.toolbarArgs){nitroToolbar.show(NitroJSConnector.toolbarArgs);NitroJSConnector.toolbarArgs=null}}}}}};NitroJSConnector.gotUserId=function(c){NitroJSConnector.userId=c;for(var b=0;b<NitroJSConnector.instances.length;b++){NitroJSConnector.instances[b].connectionParams.userId=c;if(c.indexOf("NITRO_USER_")==0){NitroCookies.createJSCookie("anonymous",true,365)}NitroJSConnector.instances[b].tryLogin()}};this.callAPI=function(h,i,d,f,e){var c=this.connectionParams.server+"?"+h;if(i!=null){c=c+"&jsCallback="+i}if(d!=null){c=c+"&jsAsyncToken="+d}if(this.connectionParams.userId&&f!=null&&f==true){c=c+"&userId="+this.connectionParams.userId}if(e==null||e==false){if(this.connectionParams.sessionKey==null){if(this.retryTries>0){this.retryTries--;var b=this;setTimeout(function(){b.callAPI(h,i,d,f,e)},this.retryCallInterval)}return}c=c+"&sessionKey="+this.connectionParams.sessionKey}else{c=c+"&apiKey="+this.connectionParams.apiKey}if(this.connectionParams.abTestGroup=="no"){return}var g=new JSONscriptRequest(c);g.buildScriptTag();g.addScriptTag()};NitroJSConnector.processLogin=function(d,c){if(d==null){if(NitroJSConnector.debug){alert("Error")}return}if(d.Nitro.res=="err"){if(NitroJSConnector.debug){alert(d.Nitro.Error.Message)}return}for(var b=0;b<NitroJSConnector.instances.length;b++){if(NitroJSConnector.instances[b].counterId==c){var e=NitroJSConnector.instances[b].connectionParams;if(d.Nitro.Login.userId){e.userId=d.Nitro.Login.userId}e.sessionKey=d.Nitro.Login.sessionKey;NitroCookies.createJSCookie("NITRO_SESSION_"+e.apiKey+"_"+e.userId,d.Nitro.Login.sessionKey,1/72);if(typeof d.Nitro.Login.TestGroup!="undefined"){e.abTestGroup=d.Nitro.Login.TestGroup.abTestGroup;NitroCookies.createJSCookie("NITRO_AB_"+e.apiKey+"_"+e.userId,d.Nitro.Login.TestGroup.abTestGroup,1/72)}else{e.abTestGroup=null}break}}if(NitroJSConnector.toolbarArgs){nitroToolbar.show(NitroJSConnector.toolbarArgs);NitroJSConnector.toolbarArgs=null}};if(typeof NitroJSConnector.instances=="undefined"){NitroJSConnector.instances=new Array()}NitroJSConnector.instances.push(this);if(typeof this.connectionParams.debug=="undefined"){this.connectionParams.debug=false}if(typeof this.connectionParams.userId=="undefined"||this.connectionParams.userId==null||this.connectionParams.userId==""){this.connectionParams.userId=null}if(typeof this.connectionParams.sessionKey=="undefined"||this.connectionParams.sessionKey==null||this.connectionParams.sessionKey==""){this.connectionParams.sessionKey=null}NitroJSConnector.debug=this.connectionParams.debug;this.retryLoginInterval=10;this.retryCallInterval=10;this.retryTries=50000;if(this.connectionParams.sessionKey==null){this.tryLogin()}}function JSONscriptRequest(a,b){this.fullUrl=a;this.noCacheIE="&noCacheIE="+(new Date()).getTime();this.headLoc=document.getElementsByTagName("head").item(0);this.scriptId="YJscriptId"+JSONscriptRequest.scriptCounter++;this.buildScriptTag=function(){if(typeof JSONscriptRequest.scriptCounter=="undefined"){JSONscriptRequest.scriptCounter=1}this.scriptObj=document.createElement("script");this.scriptObj.setAttribute("type","text/javascript");this.scriptObj.setAttribute("src",this.fullUrl+(b?"":this.noCacheIE));this.scriptObj.setAttribute("id",this.scriptId)};this.removeScriptTag=function(){this.headLoc.removeChild(this.scriptObj)};this.addScriptTag=function(){this.headLoc.appendChild(this.scriptObj)}}};
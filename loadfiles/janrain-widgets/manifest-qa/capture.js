/*
 -*- Capture UI Widget -*-
 Copyright (c) 2012, Janrain, Inc. All rights reserved.
 Version: 2013.20
*/
"object"!==typeof window.janrain&&(window.janrain={});janrain.apps={};
janrain.apps=function(){var nb,ob,pb,cc,Md,Nd,Bb,Mc,Od,Pd,Qd,Rd,Sa,Ta;function Sd(){var b;b="http:"===document.location.protocol?"http://cdn.quilt.janrain.com/2.1.10/":"https://d3hmp0045zy3cs.cloudfront.net/2.1.10/";if(janrain.settings.capture&&janrain.settings.capture.quiltVersion){b=b.split("/");if("cdn.quilt.janrain.com"===b[2]||"d3hmp0045zy3cs.cloudfront.net"===b[2])b[b.length-2]=janrain.settings.capture.quiltVersion;b=b.join("/")}return b}function Nc(b,c,e){var f;if(document.getElementById(b))return!1;
if(S){f="";var i=document.createElement("div");i.innerHTML=f+"<iframe "+('name="'+b+'" ')+('id="'+b+'" ')+('src="'+c+'" ')+'style="display: none;"></iframe>';document.body&&document.body.appendChild(i);f=document.getElementById(b)}else f=document.createElement("iframe"),f.setAttribute("name",b),f.id=b,f.setAttribute("src",c),f.style.display="none",document.body&&document.body.appendChild(f);"function"===typeof e&&e();return f}function oa(b){for(var c="",e=0;e<b;)c+=oa.possible[Math.floor(Math.random()*
oa.possible.length)],e++;return c}function Za(){function b(b,c,e,f){c={action:b,key:c,messageId:e};"set"===b&&(c.value=f);return"janrainCapture:"+J.stringify(c)}function c(b,c){function e(){f++;if(10<f)return!1;if("undefined"!==typeof o[b])return clearTimeout(g),"get"===o[b].action&&"function"===typeof c&&c(o[b].storedValue),!0;var g=setTimeout(e,50)}var f=0;e()}function e(e,f){var g=oa(40);window.setTimeout(function(){m.contentWindow.postMessage(b("get",e,g),dc)});c(g,f)}function f(b,c){if(g)ec?
e(b,c):setTimeout(function(){f(b,c)},50);else return window.localStorage.getItem(b)}function i(b){if(0!==b.data.indexOf("janrainCapture:")||!l(fc,b.origin.replace(/^https?:\/\/|:\d{1,4}$/g,"").toLowerCase()))return!1;b=J.parse(b.data.replace("janrainCapture:",""));o[b.messageId]=b}var g=!1,o={},m,dc,fc=janrain.settings&&janrain.settings.whiteListedDomains?janrain.settings.whiteListedDomains:[];return{setItem:function(e,f){if(g){var i=oa(40);window.setTimeout(function(){m.contentWindow.postMessage(b("set",
e,i,f),dc)});return c(i)}return window.localStorage.setItem(e,f)},removeItem:function(e){if(g){var f=oa(40);window.setTimeout(function(){m.contentWindow.postMessage(b("remove",e,f),dc)});return c(f)}return window.localStorage.removeItem(e)},getItem:f,setMultiDomain:function(b){if(g=b)window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent?window.attachEvent("onmessage",i):document.attachEvent&&document.attachEvent("onmessage",i),m=document.getElementById("xDomainLocalStorageJanrain"),
dc=janrain.settings.storageServerDomain}}}function z(){function b(){if(i&&$a){var b=new Za;b.setMultiDomain(janrain.settings.multiDomainLocalStorage);b.removeItem(f);b.removeItem(f+"_Expires")}else{var b=o?"; domain="+o:"",c=new Date;c.setTime(c.getTime()+-864E6);document.cookie=f+"="+g+";expires="+c.toUTCString()+b+"; path="+m}}function c(c,e,g){var o,m,E,k,q,g="undefined"===typeof g?!0:g;if(i&&$a)if(q=new Za,janrain.settings.multiDomainLocalStorage)q.setMultiDomain(!0),q.getItem(c,function(o){o?
g?q.getItem(c+"_Expires",function(g){g?Math.round((new Date).getTime()/1E3)>Math.round((new Date(g)).getTime()/1E3)?(f=c,b(),"function"===typeof e&&e(!1)):"function"===typeof e&&e(o):(new z).getCookie(c+"_session")?"function"===typeof e&&e(o):(f=c,b())}):"function"===typeof e&&e(o):"function"===typeof e&&e(!1)});else if(k=q.getItem(c),o=q.getItem(c+"_Expires"),k){if(!g||!(o&&Math.round((new Date).getTime()/1E3)>Math.round((new Date(o)).getTime()/1E3))&&(o||(new z).getCookie(c+"_session")))return k;
f=c;b()}else return!1;else{o=document.cookie.split(";");m=o.length;for(var ba=0;ba<m;ba++)if(E=o.pop(),k=E.split("="),E=k[0],k=k[1],E.trim()===c)return k;return!1}}var e,f,i=!1,g,o,m="/";return{create:function(){if(i&&$a){var b=new Za;b.setMultiDomain(janrain.settings.multiDomainLocalStorage);b.setItem(f,g);e?b.setItem(f+"_Expires",e):(new z).setName(f+"_session").setValue("session").create()}else document.cookie=f+"="+g+(e?"; expires="+e:"")+(o?"; domain="+o:"")+"; path="+m},remove:b,setExpirationDirectly:function(b){b&&
(e=b);return this},setExpiration:function(b){if(b){var c=new Date;c.setTime(c.getTime()+864E5*b);e=c.toUTCString()}return this},setName:function(b){b&&(f=b);return this},setValue:function(b){"undefined"!==typeof b&&(g=b);return this},setUseLocalStorage:function(b){i=b;return this},setPath:function(b){b&&(m=b);return this},setDomain:function(b){b&&(o=b);return this},getCookie:function(b,e,f){return c(b,e,f)}}}function Cb(b){b=b||ja;return-1<b.indexOf("iPod")?"iPod":-1<b.indexOf("iPhone")?"iPhone":
-1<b.indexOf("iPad")?"iPad":0}function Db(b,c,e,f,i,g){"number"===typeof e&&"number"===typeof f&&"number"===typeof i&&"number"===typeof g?("undefined"!==typeof b.style.borderRadius&&(b.style.borderRadius=e+"px "+f+"px "+i+"px "+g+"px"),"undefined"!==typeof b.style.MozBorderRadius&&(b.style.MozBorderRadius=e+"px "+f+"px "+i+"px "+g+"px"),"undefined"!==typeof b.style.webkitBorderRadius&&(b.style.webkitBorderRadius=e+"px "+f+"px "+i+"px "+g+"px")):("undefined"!==typeof b.style.borderRadius&&(b.style.borderRadius=
c+"px"),"undefined"!==typeof b.style.MozBorderRadius&&(b.style.MozBorderRadius=c+"px"),"undefined"!==typeof b.style.webkitBorderRadius&&(b.style.webkitBorderRadius=c+"px"));return b}function Eb(b,c){if("undefined"===typeof b||"undefined"===typeof c)return!1;var e=b-c;0>e&&(e=0);e>b&&(e=b);return e}function ab(b,c,e,f){var i=Fb(e),g=Fb(e,f);if(e=Oc(e))e.a=f,g="rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")";if(0<c){b.style.backgroundColor=i;b.style.padding=c+"px";if(0<S&&8>=S||S&&qb)return!1;b.style.backgroundColor=
g;b.style.padding=c+"px"}else b.style.backgroundColor="",b.style.padding="0px"}function Oc(b){var c={};if("string"!==typeof b||!b)return!1;b=b.replace(/\s+/g,"");b=b.replace(/,{2,}/g,",");b=b.replace(/[^\d.,]/g,"");b=b.split(",");if(3>b.length||4<b.length)return!1;c.r=b[0];c.g=b[1];c.b=b[2];c.a=b[3]?b[3]:1;return c}function Fb(b,c){var e=b.split("");if("#"!==e[0])return b;4===b.length&&(b=e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var b=b.substring(1,7),e=parseInt(b.substring(0,2),16),f=parseInt(b.substring(2,
4),16),i=parseInt(b.substring(4,6),16);return isNaN(c)?"rgb("+e+","+f+","+i+")":"rgba("+e+","+f+","+i+","+c+")"}function x(b,c,e){if(null==b)return!1;"object"===typeof window.attachEvent?b.attachEvent("on"+c,e):b.addEventListener(c,e,!1)}function Gb(b,c,e){"object"===typeof window.detachEvent?b.detachEvent("on"+c,e):b.removeEventListener(c,e,!1)}function rb(){var b,c;"undefined"!=typeof window.innerWidth?(b=window.innerWidth,c=window.innerHeight):(b=document.documentElement.offsetWidth,c=document.documentElement.offsetHeight);
return{width:b,height:c}}function gc(){var b,c,e,f,i,g,o,m;c=document.documentElement?document.documentElement:{clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0,offsetWidth:0,offsetHeight:0};o=c.scrollWidth?c.scrollWidth:0;m=c.scrollHeight?c.scrollHeight:0;i=c.offsetWidth?c.offsetWidth:0;g=c.offsetHeight?c.offsetHeight:0;e=document.body.scrollWidth?document.body.scrollWidth:0;f=document.body.scrollHeight?document.body.scrollHeight:0;b=document.body.offsetWidth?document.body.offsetWidth:0;
c=document.body.offsetHeight?document.body.offsetHeight:0;i=Math.max(e,o,b,i);return{height:Math.max(f,m,c,g),width:i}}function Hb(b){return{width:b.style&&b.style.width?parseInt(b.style.width):b.offsetWidth?parseInt(b.offsetWidth):0,height:b.style&&b.style.height?parseInt(b.style.height):b.offsetHeight?parseInt(b.offsetHeight):0}}function Ud(b,c){var e=document.getElementById(b);if(!e)return null;if("object"===typeof e.currentStyle)var f=e.currentStyle[c];else window.getComputedStyle&&(f=document.defaultView.getComputedStyle(e,
null).getPropertyValue(c));return f}function bb(b,c,e,f,i){var g=/^(?:[^\u0000-\u0080]|[-0-9a-z?,.!&\s#()])+$/i,o=/(?:^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$)|(?:^#[a-f0-9]{1,6}$)/i;if("array"===b){if(!q(f))return i||K.log(f+" is wrong type, must be array, using default value instead"),e;if(c&&q(c))for(var m=0;m<f.length;m++)if(0>c.indexOf(f[m]))return i||K.log(f+" is not within the valid range, using default value instead"),e;return f}if("url"===b){if("string"!==typeof f)return e;f&&(f=f.trim());
if(/^http(?:s)?:\/\/[-a-z0-9._~@:!$&'()*+,;=\s/?#]+$/i.test(f))return f;i||K.log(f+" is not the valid format, using default value instead");return e}if("text"===b){if(c){if(0<=c.indexOf(f))return f;i||K.log('Value of "'+f+'" for '+arguments.callee.caller.name+' is not a valid value, using default value of "'+e+'" instead');return e}return g.test(f)?f:e}if("usertext"===b){if("string"!==typeof f&&"number"!==typeof f)return e;if(q(c)){if(1===c.length){if(f.length<=c[0])return f;i||K.log(f+" is too long, using default value instead");
return e}if(2===c.length){if(f.length<=c[1]&&f.length>=c[0])return f;i||K.log(f+" is not within the valid range, using default value instead");return e}i||K.log("usertext range is invalid, using default value instead");return e}return f}"string"===typeof f&&0==f.length&&(f=" ");if(!g.test(f))return i||K.log(f+" contains invalid character(s)"),e;if("boolean"===b){if("boolean"===typeof f)return f;i||K.log(f+" is wrong type, must be boolean, using default value instead");return e}if("text"===b)return f;
if("number"===b){if(isNaN(parseInt(f)))return i||K.log(f+" is wrong type, must be a valid number"),e;f=parseFloat(f)}if("color"===b){f&&(f=f.trim());if("transparent"===f||o.test(f))return f;i||K.log('Value of "'+f+'" for '+arguments.callee.caller.name+' is not a valid value, using default value of "'+e+'" instead');return e}if(typeof f!=b&&"color"!=b)return i||K.log(f+" for "+arguments.callee.caller.name+" is "+typeof f+" expected "+b),e;if("object"===typeof c&&"string"===b){if(0<=c.indexOf(f))return f;
i||K.log('Value of "'+f+'" for '+arguments.callee.caller.name+' is not a valid value, using default value of "'+e+'" instead');return e}if("object"===typeof c&&"number"===b){2===c.length?(g=c[0],o=c[1]):(g=c.shift(),o=c.pop(),m=c);if(f<g)return i||K.log("Value of "+f+" for "+arguments.callee.caller.name+" is below minimum of "+g+", using minimum value of "+g+" instead"),g;if(f>o)return i||K.log("Value of "+f+" for "+arguments.callee.caller.name+" is above maximum of "+o+", using maximum value of "+
o+" instead"),o;if(m&&"number"===typeof m.indexOf(f)||f==g||f==o)return f;return m?(i||K.log("Value of "+f+" for "+arguments.callee.caller.name+" is not a valid value, using default value of "+e+" instead"),e):f}return 0!=f&&!f?e:f}function za(b){for(var c=za.options,b=c.parser[c.strictMode?"strict":"loose"].exec(b),e={},f=14;f--;)e[c.key[f]]=b[f]||"";e[c.q.name]={};e[c.key[12]].replace(c.q.parser,function(b,f,o){f&&(e[c.q.name][f]=o)});return e}function Aa(b){return document.getElementById(B(b).getAttribute("id"))}
function B(b){return b.target?b.target:b.srcElement}function hc(b,c){function e(b){x=!0;"undefined"!==typeof q&&clearTimeout(q);if("string"===typeof b)return"function"===typeof m&&m(b),!0;if("object"===typeof b||"undefined"===typeof b)return"object"===typeof b&&"error"===b.type?"function"===typeof m&&m(b):"function"===typeof i&&i(),!0}function f(){k++;if(x)return!0;k<g?q=setTimeout(f,50):e("Load Timeout Error")}var i=c,g=200,o=!1,m,k=0,q,I=document.createElement("script"),R=document.getElementsByTagName("script")[0],
x=!1;I.src=b;I.setAttribute("type","text/javascript");I.onload=I.onerror=I.onreadystatechange=function(b){!x&&(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)&&e(b)};return{setTimeoutCallback:function(b){o=!0;m=b;return this},setCallback:function(b){i=b;return this},setTimeoutLimit:function(b){g=b;return this},load:function(){R.parentNode.insertBefore(I,R);o&&f()}}}function Ia(b,c){hc(b,c).load()}function Vd(b,c){S&&9>S&&ic(b,c)}function ic(b,c,e){function f(e){k=!1;"function"===
typeof c&&c();janrain.events.onCssLoad.fire({source:b,noload:e,save:!0})}function i(){if(k){for(x=q.length;0<=--x;)if(q[x].href===o.href){f();break}m+=1;k&&(200>m?setTimeout(i,50):f(!0))}}function g(){var b;try{b=!!o.sheet.cssRules}catch(c){m+=1;200>m?setTimeout(g,50):b&&f(!0);return}f()}if(l(Ib,b))e&&"function"===typeof c&&c();else{Ib.push(b);var o,m=0,k=!0,q=document.styleSheets,x;"undefined"===typeof janrain.events.onCssLoad&&(janrain.events.onCssLoad=new ca);sb?(o=document.createElement("style"),
o.innerHTML='@import "'+b+'";'):(o=document.createElement("link"),o.rel="stylesheet",o.href=b,o.type="text/css");jc||sb?(jc&&i(),sb&&g()):(o.onload=function(){f()},o.onerror=function(){f(!0)});document.getElementsByTagName("head")[0].appendChild(o)}}function k(b){var c;c=b&&b.className?b.className.split(" "):[];return{append:function(e){-1===c.indexOf(e)&&(c.push(e),b&&(b.className=c.join(" ")));return this},remove:function(e){-1!==c.indexOf(e)&&(c.splice([c.indexOf(e)],1),b&&(b.className=c.join(" ").trim()));
return this},has:function(b){return-1!==c.indexOf(b)}}}function Wd(b,c){$(b.style,c)}function aa(b,c){b.appendChild(document.createTextNode(c))}function Ua(b,c){b.innerHTML="";aa(b,c)}function Pc(b){for(var c=b.lastChild;c;)b.removeChild(c),c=b.lastChild}function Qc(b){var c=typeof b;return("number"===c||"string"===c&&0<b.length)&&ka(b)?parseFloat(b):null}function Ja(b){return"[object Date]"===Object.prototype.toString.call(b)&&!isNaN(b.getMonth())}function q(b){return"[object Array]"===Object.prototype.toString.call(b)}
function Jb(b){return!!b&&"[object Object]"===Object.prototype.toString.call(b)}function l(b,c){return!q(b)?!1:-1<b.indexOf(c)}function T(b,c){for(var e in b)la(b,e)&&c.call(b[e],e,b[e]);return b}function Ba(b,c){if("undefined"===typeof c||0===c.length||!Jb(b)&&!q(b))return b;for(var e=c.split("."),f=b,i=0,g=e.length;i<g&&!(f=f[e[i]],void 0===f||null===f);++i);return f}function Kb(b,c,e){for(var f=0,i=b.length;f<i;f++)c.call(e,b[f],f,b)}function Lb(b){b&&b.parentNode&&b.parentNode.removeChild(b);
return b}function Xd(b,c){for(var e=c.parentNode;null!=e;){if(e==b)return!0;e=e.parentNode}return!1}function da(b){var c=q(b)?[]:{},e;for(e in b)la(b,e)&&(c[e]=da.isCloneable(b[e])?da(b[e]):b[e]);return c}function Rc(b,c){var e=[],f=!(c&&!1===c.encode),i=c&&!0===c.allowDupes;T(b,function(b,c){var m=i&&q(c)?c:[c];e.push.apply(e,m.map(function(c){return f?encodeURIComponent(b)+"="+encodeURIComponent(c):b+"="+c}))});return(e.length?"?":"")+e.join("&")}function Ie(b,c){for(var e,f={},i=b.split(c||"&"),
g=0,o=i.length;g<o;g++)e=i[g].split("="),e[0]&&(f[e[0]]=e[1]);return f}function Sc(b,c,e){if(!b)return"";if(!c)return b;var f=za(b),b=f.protocol+"://"+f.authority+f.path,i=f.anchor?"#"+f.anchor:"",g={};T(c,function(b,c){var f=e&&q(c)?c:[c];g[encodeURIComponent(b)]=f.map(encodeURIComponent)});c=Rc($(f.queryKey,g),{encode:!1,allowDupes:e});return b+c+i}function A(b){if(!b)return!1;if(b.preventDefault)b.preventDefault();else try{b.returnValue=!1}catch(c){}}function cb(b){if(!b)return!1;b.stopPropagation?
b.stopPropagation():b.cancelBubble=!0}function Je(b){var c;b&&(c=pa(b.getElementsByTagName("input")),c=c.concat(pa(b.getElementsByTagName("button"))),c=Yd(c,{type:"submit"})[0]);return c}function ka(b){return!isNaN(parseFloat(b))&&isFinite(b)}function Zd(b){if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(b)){var c=b.split("/"),b=parseInt(c[1],10),e=parseInt(c[0],10),c=parseInt(c[2],10),f=new Date(c,e-1,b);return f.getFullYear()==c&&f.getMonth()==e-1&&f.getDate()==b?!0:!1}return!1}function wa(b,c,e){var f,i=$d,
g=Tc;void 0===b&&(b="{month} {d}{ord}, {yyyy} at {hour}:{minute} {ampm}");void 0===c&&(c=new Date);e&&(e.monthNames&&q(e.monthNames)&&12===e.monthNames.length&&(i=e.monthNames),e.dayNames&&q(e.dayNames)&&7===e.dayNames.length&&(g=e.dayNames));e=function(){var b=c.getHours();12<b&&(b-=12);0===b&&(b=12);return b};f=function(b){return 10>b?"0"+b:b};b=b.replace(/{yyyy}/g,c.getFullYear());b=b.replace(/{month}/g,i[c.getMonth()]);b=b.replace(/{mmm}/g,i[c.getMonth()].substring(0,3));b=b.replace(/{day}/g,
g[c.getDay()]);b=b.replace(/{0m}/g,f(c.getMonth()+1));b=b.replace(/{m}/g,c.getMonth()+1);b=b.replace(/{0d}/g,f(c.getDate()));b=b.replace(/{d}/g,c.getDate());b=b.replace(/{ord}/g,function(){var b=["th","st","nd","rd"],e=c.getDate()%100;return b[(e-20)%10]||b[e]||b[0]}());b=b.replace(/{0hour}/g,f(e()));b=b.replace(/{hour}/g,e());b=b.replace(/{0h}/g,f(c.getHours()));b=b.replace(/{h}/g,c.getHours());b=b.replace(/{minute}/g,f(c.getMinutes()));b=b.replace(/{second}/g,f(c.getSeconds()));return b=b.replace(/{ampm}/g,
11<c.getHours()?"PM":"AM")}function ae(b,c,e){function f(){var b=k.search(q);if(-1===b)return!1;var c=k.substring(b,b+2);isNaN(c)||12<c?(m.setMonth(k.substring(b,b+1)-1),k=k.substring(b+1)):(m.setMonth(c-1),k=k.substring(b+2));return E=!0}function i(){var b=k.search(q);if(-1===b)return!1;var c=k.substring(b,b+2);isNaN(c)||31<c?(m.setDate(k.substring(b,b+1)),k=k.substring(b+1)):(m.setDate(c),k=k.substring(b+2));return L=!0}function g(){var b;b=k.search(q);if(-1===b)return!1;k=k.substring(b);b=k.match(x)[0];
m.setFullYear(b);k=k.substring(b.length);return A=!0}function o(){var b,c,e=-1,f;for(f=0;12>f;++f)b=k.search(R[f]),-1===e&&-1<b&&(e=b,c=f),-1<b&&b<e&&(e=b,c=f);if(-1===e)return!1;m.setMonth(c);k=k.substring(e);b=k.search(l);-1===b&&(b=k.length);k=k.substring(b);return E=!0}var m=new Date,b=b.match(/\{+([a-z0])+\}/g),k=c,q=/[0-9]{1}/,x=/[0-9]+/,R=[/jan/i,/feb/i,/mar/i,/apr/i,/may/i,/jun/i,/jul/i,/aug/i,/sep/i,/oct/i,/nov/i,/dec/i],l=/[^a-zA-Z]/,E=!1,A=!1,L=!1;"undefined"===typeof e&&(e=!1);m.setMonth(0);
m.setFullYear(0);m.setDate(1);m.setMinutes(0);m.setSeconds(0);m.setHours(0);m.setMilliseconds(0);for(var c=0,ba=b.length;c<ba;++c){var w=!0;switch(b[c]){case "{m}":E||(w=!1,e||(w=o()),w||(w=f()));break;case "{0m}":E||(w=!1,e||(w=o()),w||(w=f()));break;case "{month}":E||(w=o(),!w&&!e&&(w=f()));break;case "{mmm}":E||(w=o(),!w&&!e&&(w=f()));break;case "{d}":L||(w=i());break;case "{0d}":L||(w=i());break;case "{yyyy}":A||(w=g())}if(!w){m=new Date("Invalid Date");break}if(E&&A&&L)break}return m}function $(b,
c){for(var e in c)la(c,e)&&(b[e]=c[e]);return b}function be(b,c){if(!da.isCloneable(b)||!da.isCloneable(c))return b;for(var e in c)la(c,e)&&(b[e]="undefined"===typeof b[e]||!da.isCloneable(b[e])?da.isCloneable(c[e])?da(c[e]):c[e]:da.isCloneable(c[e])?be(b[e],c[e]):c[e]);return b}function H(b,c){for(var e=c,f=/\{\|(.*?)\|\}/,i;i=f.exec(e);)try{var g=i[1].trim(),e=e.replace(i[0],"undefined"!==typeof b[g]?b[g]:"")}catch(o){return window.console&&window.console.log&&console.log(o.name+": "+o.message,
"error"),!1}return e}function Mb(b,c){if(b){if(b.nodeName.toLowerCase()===c.toLowerCase())return b;if(!b.parentNode)return!1;var e=b.parentNode.nodeName.toLowerCase();return"body"===e?!1:e===c.toLowerCase()?b.parentNode:Mb(b.parentNode,c)}}function kc(b,c){return!b?!1:"body"===b.nodeName.toLowerCase()?!1:k(b).has(c)?b:kc(b.parentNode,c)}function lc(b){var c=[],e;for(e in b)la(b,e)&&c.push(e+'="'+b[e]+'"');return c.join(" ")}function pa(b){return"string"===typeof b?b.split(""):Array.prototype.map.call(b,
function(b){return b})}function ce(b){if(b&&0<b.length)for(var b=b[0].children,c=b.length,e=0;e<c;++e)b[e].blur&&b[e].blur()}function Uc(b,c){for(var e=[],f=0,i=b.length;f<i;f++)c(b[f])&&e.push(b[f]);return e}function Yd(b,c){return Uc(b,function(b){for(var f in c)if(la(c,f)&&b[f]!==c[f])return!1;return!0})}function de(b){var c,e;if(b&&(b.blur&&b.blur(),b.children)){e=b.children;b=0;for(c=e.length;b<c;b++)de(e[b])}}function la(b,c){return Object.prototype.hasOwnProperty.call(b,c)}function ee(){function b(b){var b=
b||"img",e=document.createElement(b);e.style.position="absolute";e.style.cursor="pointer";e.style.zIndex=1E3;"a"===b?(e.setAttribute("href","#"),e.className="janrain_modal_closebutton",aa&&(e.innerHTML=aa)):(e.src=$,la||(e.style.right="-6px",e.style.top="-7px",e.style.height="31px",e.style.width="28px"));e.onclick=da?f:c;return e}function c(b){Ka||(s.style.display="none",z.style.display="none",C.style.display="none");Ca&&Da.deactivate();("object"===typeof b||!b)&&janrain.events.onModalClose.fire();
("object"===typeof b||!b)&&Ba.fire();"object"===typeof b&&A(b)}function e(){var b=document.createElement("div"),e=document.createElement("div"),f=document.createElement("a"),g=document.createElement("a"),i=document.createElement("h3");f.innerHTML=pa;g.innerHTML=ja;i.innerHTML=oa;f.setAttribute("href","#");g.setAttribute("href","#");b.className="janrain_close_confirm_container";e.className="janrain_close_confirm";f.className="janrain_modal_confirm";g.className="janrain_modal_cancel";x(f,"click",function(b){c();
s.removeChild(Ma);Ma=null;A(b)});x(g,"click",function(b){s.removeChild(Ma);Ma=null;A(b)});e.appendChild(i);e.appendChild(g);e.appendChild(f);b.appendChild(e);return b}function f(b){Ma||(Ma=e(),s.appendChild(Ma));A(b)}function i(b){var c=document.documentElement.scrollTop>=document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,e=document.documentElement.scrollLeft>=document.body.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,f=rb(),g=Hb(b),i=f.height-
g.height,f=f.width-g.width,c=c+i/2,e=e+f/2;w()&&(0>i&&(document.documentElement.scrollTop=0,document.body.scrollTop=0,c=10),0>f&&(document.documentElement.scrollLeft=0,e=document.body.scrollLeft=0),b.style.top=c+"px",b.style.left=e+"px");"absolute"!==b.style.position&&(b.style.position="absolute")}function g(){if(Ka){var b=document.getElementById("previewMode");b.style.position="relative";b.appendChild(s)}else i(s);Ka||K.show()}function o(b){qa||(fa=bb("number",[0,20],10,b),Ia.fire({radius:Eb(xa,
fa)}))}function k(b){qa||(T=bb("color",null,"#000000",b))}function q(b){qa||(xa=bb("number",[0,20],10,b),za.fire({radius:Eb(xa,fa),refresh:!0}))}function fc(b){qa||(Ea=bb("number",[0,1],0.5,b),"object"==typeof s&&ab(s,fa,T,Ea))}function I(){if("undefined"===typeof ca)return!0;var b=rb();return!!Math.floor(ca)!==!!Math.floor(b.width/b.height)}function R(){var b=rb();ca=b.width/b.height}function l(b){if("portrait"===b){ka="portrait";var c="one column"}"landscape"===b&&(ka="landscape",c="two column");
Ja.fire({orientation:ka,format:c,width:Td,height:V});setTimeout(ba,100);I()&&g();R()}function E(b){b&&(G=b);S&&qb&&(G+=fa-2);"object"==typeof s&&(s.style.width=G+"px");return this}function B(b){b&&(U=b);S&&qb&&(U=U+2*fa-4);b&&"object"==typeof s&&(s.style.height=U+"px");return this}function L(){var b=rb(),b=b.width>=b.height,c="undefined"===typeof window.orientation,b=90===window.orientation||-90===window.orientation||c&&b?"landscape":"portrait";ka!==b&&l(b);g()}function ba(){var b=gc();C.style.height=
b.height+"px";C.style.width=b.width+"px"}function w(){return"object"===typeof s&&"none"!==s.style.display}var Td=380,V=131,s,J="janrainModal",z,C,H,G=Td,U=V,fa=10,T="#000000",xa=10,Ea=0.5,da=!1,$=Xc("rel/img/17c96fc4b9c8464d1c95cd785dd3120b.png"),aa="",qa=janrain.settings&&janrain.settings.capture&&janrain.settings.capture.noModalBorderInlineCss,la=!1,oa="Are you sure you want to quit?",pa="Yes, quit",ja="No, stay",Ma,ka="landscape",wa=!0,Ca="boolean"===typeof Ca?Ca:"number"===typeof window.orientation?
!0:!1,ra="boolean"===typeof ra?ra:janrain.settings.previewMode,Ka=ra,Aa=Aa||!1,ca,sa=!1;janrain.settings&&janrain.settings.capture&&janrain.settings.capture.modalCloseImage&&($=janrain.settings.capture.modalCloseImage,la=!0);janrain.settings&&janrain.settings.capture&&janrain.settings.capture.modalCloseHtml&&(aa=janrain.settings.capture.modalCloseHtml);window.janrain.events.onModalClose||(window.janrain.events.onModalClose=na());window.janrain.events.onModalOpen||(window.janrain.events.onModalOpen=
na());var Ba=na(),Fa=na(),za=na(),Ia=na(),Ja=na();Da&&Da.onOrientationChange&&Da.onViewportChange&&(Da.onOrientationChange.addHandler(function(b){l(b.orientation)}),Da.onViewportChange.addHandler(function(){I()&&i(s);R()}));"undefined"!==typeof janrain.events.onCaptureRenderComplete&&(janrain.events.onCaptureRenderComplete.addHandler(function(){w()&&(sa=!0)}),janrain.events.onCaptureContentChange.addHandler(function(){w()&&sa&&(g(),setTimeout(ba,500),sa=!1)}));return{isOpen:function(){return w()},
setWidth:function(b){E(b);return this},setHeight:function(b){B(b);return this},setBorder:function(b){("string"==typeof b||"number"==typeof b)&&o(b);qa||"object"==typeof s&&ab(s,fa,T,Ea);return this},setBorderColor:function(b){b&&k(b);qa||"object"==typeof s&&ab(s,fa,T,Ea);return this},setBorderRadius:function(b){("string"==typeof b||"number"==typeof b)&&q(b);qa||"object"==typeof s&&Db(s,xa);return this},setBorderOpacity:function(b){("number"===typeof b||"string"===typeof b)&&fc(b);return this},setZIndex:function(b){C.style.zIndex=
b},setPreviewMode:function(b){"boolean"===typeof b&&(Ka=b);return this},setId:function(b){J=b;s&&(s.id=b);return this},show:function(){Ca||(s.style.display="block");"object"==typeof z&&wa&&(z.style.display="block");Ka?Ca&&(s.style.display="block"):(C.style.display="block",Ca?(Da.setElement(s).activate(),s.style.display="block"):(x(window,"resize",L),x(window,"resize",ba),L(),ba()));qa||za.fire({radius:Eb(xa,fa),refresh:!1});Fa.fire();janrain.events.onModalOpen.fire();nb.fire();s.focus()},close:function(b){c(b)},
closeConfirm:function(){f()},refresh:function(b){Aa||s.appendChild(H);b&&b.center&&g()},remove:function(){if(Ka){var b=document.getElementById("previewMode");"object"===typeof H&&s.removeChild(H);"object"===typeof s&&b.removeChild(s);"object"===typeof C&&document.body.removeChild(C);if(b=document.getElementById("janrainEngageEmbed_old"))b.id="janrainEngageEmbed";C=s=""}else"object"===typeof H&&s.removeChild(H),"object"===typeof C&&document.body.removeChild(C),"object"===typeof s&&document.body.removeChild(s)},
addContent:function(c){var e=janrain.events.onAuthWidgetContentPlaced;e&&e.fire();z=c;if(!s){s=document.createElement("div");s.id=J;if("number"===typeof G||"string"===typeof G)s.style.width=G+"px";s.style.height=U+"px";s.style.position="absolute";qa||(s.style.padding=fa+"px",Db(s,xa),ab(s,fa,T,Ea));s.style.zIndex=1E3;s.style.display="none";c=gc();C=document.createElement("div");janrain.settings&&janrain.settings.capture&&janrain.settings.capture.captureServer&&(C.id="janrainModalOverlay");C.style.width=
c.width+"px";C.style.height=c.height+"px";C.style.left=0;C.style.top=0;C.style.backgroundColor="#000000";C.style.position="absolute";c=C;"undefined"!==typeof c.style.filter&&(c.style.filter="alpha(opacity=40)");"undefined"!==typeof c.style.opacity&&(c.style.opacity="0.4");"undefined"!==typeof c.style.KhtmlOpacity&&(c.style.KhtmlOpacity="0.4");"undefined"!==typeof c.style.MozOpacity&&(c.style.MozOpacity="0.4");C.style.display="none";C.style.zIndex=1E3;H=aa?b("a"):b();s.appendChild(H);document.body.appendChild(C);
document.body.appendChild(s)}s.appendChild(z);setTimeout(ba,500);Ka&&g();return this},getContent:function(){return z},getBorderWidth:function(){return fa},getState:function(){return{width:G,borderWidth:fa,borderColor:T,borderRadius:xa,borderOpacity:Ea,orientation:ka}},setState:function(b){Yc("customizable_auth_widget_styling")&&("undefined"!==typeof b.borderWidth&&o(b.borderWidth),"undefined"!==typeof b.borderColor&&k(b.borderColor),"undefined"!==typeof b.borderOpacity&&fc(b.borderOpacity),"undefined"!==
typeof b.orientation&&l(b.orientation),"undefined"!==typeof b.borderRadius&&(("string"==typeof b.borderRadius||"number"==typeof b.borderRadius)&&q(b.borderRadius),"object"==typeof s&&Db(s,xa)))},setConfirmClose:function(b){da=b;return this},setShowContentOnLoad:function(b){wa=b;return this},setConfirmMessageText:function(b){oa=b},setConfirmLinkText:function(b){pa=b},setCancelLinkText:function(b){ja=b},onClose:Ba,onShow:Fa,onOrientationChange:Ja,onBorderRadiusChange:za,onBorderWidthChange:Ia}}function Ke(){function b(b){"function"===
typeof b&&(R=b);return this}function c(){o=[];I.innerHTML="";Kb(arguments,function(b,c){var e=document.createElement("button");e.className="capture_btn capture_secondary";Ua(e,b);e.setAttribute("data-index",c.toString());x(e,"click",function(b){b.index=parseInt(B(b).getAttribute("data-index"));R(b)});o.push(e);I.appendChild(e)});e(o.length-1);return this}function e(b){var c=o[A];c&&k(c).remove("capture_primary").append("capture_secondary");A=b;(c=o[A])&&k(c).remove("capture_secondary").append("capture_primary");
return this}function f(){janrain.capture.ui.modal.close();return this}var i,g,o,m,q,l,I,R,A;i="Notice";g="This is a notice.";A=0;(function(){m=document.createElement("div");var b=document.createElement("div"),c=document.createElement("h1"),e=document.createElement("h2"),f=document.createElement("div");b.className="capture_header";c.className="capture_dialog_title";e.className="capture_dialog_message";f.className="capture_footer";Ua(c,i);Ua(e,g);b.appendChild(c);m.appendChild(b);m.appendChild(e);m.appendChild(f);
q=c;l=e;I=f;return this})();c("OK");b(f);return{open:function(){janrain.capture.ui.renderScreen("janrainDialog");var b=document.getElementById("captureDialogBuiltIn");b.innerHTML="";b.appendChild(m);return this},close:f,setTitle:function(b){i=b;Ua(q,i);return this},setMessage:function(b){g=b;Ua(l,g);return this},setPrimaryIndex:e,setButtons:c,setCallback:b}}function fe(){function b(){B=(new Date).getTime()-i;if(B<f){var b=Math.round(c()*I+m);g.style[l]=b+"px"}else clearInterval(R),g.style[l]=q+"px",
z()}function c(){if("flat"==E)return B*(1/f);if("sinusoidal"==E)return Math.abs(Math.sin(B*(Math.PI/(2*f))))}function e(b){return{x:function(){var c=b.event.clientX-ge(b.boundary).x,c=c<this.boundary_x()?c:this.boundary_x();return 0<c?c:0},boundary_x:function(){var c=b.boundary.getBoundingClientRect();return c.width||c.right-c.left}}}var f="1000",i,g,k=document,m,q,l="left",I,R,B,E="flat",z,L;return{setAcceleration:function(b){E=b;return this},setCallback:function(b){z=b;return this},setDuration:function(b){f=
b;return this},setDirection:function(b){"horizontal"===b&&(l="left");"vertical"===b&&(l="top");return this},setElement:function(b){g=b;return this},setElementBoundary:function(b){k=b;return this},startPosition:function(b){m=b;return this},endPosition:function(b){q=b;return this},animate:function(){I=q-m;i=(new Date).getTime();R=setInterval(b,10);return this},drag:function(b){var c=this;this.moveHandler=function(b){var c=e({event:b.targetTouches&&b.targetTouches.length?b.targetTouches[0]:b,boundary:k}).x();
g.style.left=c+"px";cb(b);A(b);L&&clearTimeout(L);L=setTimeout(function(){z({pos_x:c})},500)};this.upHandler=function(b){c.unbindDragHandlers();cb(b);A(b)};x(document,pb,this.moveHandler);x(document,cc,this.upHandler);cb(b);A(b)},unbindDragHandlers:function(){Gb(document,cc,this.upHandler);Gb(document,pb,this.moveHandler);return this}}}function ge(b){var c=curtop=0;if(b.offsetParent){do c+=b.offsetLeft,curtop+=b.offsetTop;while(b=b.offsetParent);return{x:c,y:curtop}}}function na(b){return new ca(b)}
function ca(b){this.track=b;this.eventHandlers=[];this.firedEvents=[];this.fireCount=0}function Nb(){function b(){if("object"!==typeof janrain.events||"object"!==typeof janrain.apps.capture||"undefined"===typeof janrain.events.captureEvents)return!1;for(var b=0,c=janrain.events.captureEvents.length;b<c;b++)if("object"!==typeof janrain.events[janrain.events.captureEvents[b]])return!1;return janrain.settings.capture.federate&&!janrain.federateJSLoaded||!janrain.ready?!1:!0}if("function"===typeof janrainCaptureWidgetOnLoad)if(b())clearTimeout(c),
janrainCaptureWidgetOnLoad();else var c=setTimeout(Nb,5);else G.error("No such function 'janrainCaptureWidgetOnLoad'")}function nc(){T(janrain.events,function(b,c){c.eventName=b})}Array.prototype.indexOf||(Array.prototype.indexOf=function(b){if(null==this)throw new TypeError;var c=Object(this),e=c.length>>>0;if(0===e)return-1;var f=0;0<arguments.length&&(f=Number(arguments[1]),f!=f?f=0:0!=f&&Infinity!=f&&-Infinity!=f&&(f=(0<f||-1)*Math.floor(Math.abs(f))));if(f>=e)return-1;for(f=0<=f?f:Math.max(e-
Math.abs(f),0);f<e;f++)if(f in c&&c[f]===b)return f;return-1});Array.prototype.map||(Array.prototype.map=function(b,c){if(null===this)throw new TypeError;var e=Object(this),f=e.length>>>0;if("function"!==typeof b)throw new TypeError;for(var i=Array(f),g=0;g<f;g++)g in e&&(i[g]=b.call(c,e[g],g,e));return i});Array.prototype.filter||(Array.prototype.filter=function(b,c){if(null==this)throw new TypeError;var e=Object(this),f=e.length>>>0;if("function"!=typeof b)throw new TypeError;for(var i=[],g=0;g<
f;g++)if(g in e){var k=e[g];b.call(c,k,g,e)&&i.push(k)}return i});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});janrain.settings.debug=janrain.settings.debug||{};var oc={enabled:!1,logLevel:"log"};window.localStorage&&("true"===localStorage.janrainDebugEnabled&&(janrain.settings.debug.enabled=!0),localStorage.janrainDebugLogLevel&&(janrain.settings.debug.logLevel=localStorage.janrainDebugLogLevel));$(oc,janrain.settings.debug);janrain.settings.debug=
oc;var Zc=function(){function b(c,e){var f;if(c.caller){f=b;var i=c.caller,g=c.caller.toString(),k=g.indexOf(")")+1,g=g.substring(0,k).split(/\s+/).slice(1).join(" ");"("===g.charAt(0)&&(g="(anonymous)"+g);f=f(i,e+g+"\n")}else f=e;return f}return function(c){if(!c||1>c.length)c="";var e=Error(c),c="Error: "+c+" at:\n";return"string"===typeof e.stack?0===e.stack.indexOf("Error:")?e.stack:c+e.stack:b(arguments.callee,c)}}(),G=function(){function b(b){var c=b.level>=i[janrain.settings.debug.logLevel];
if(window.console&&c){c=pa(b.messages);c.unshift("#"+b.id);try{console[b.type].apply(console,c)}catch(e){console[b.type](c.join(" "))}}}function c(c,k){return function(){if(janrain.settings.debug.enabled||k){var m=arguments;f++;m={stack:Zc(pa(m).join(" ")),level:i[c],id:f,type:c,date:new Date,messages:m};e.push(m);b(m)}}}var e=[],f=0,i={};Kb(["log","info","warn","error"],function(b,c){i[b]=c});return{log:c("log"),info:c("info"),warn:c("warn"),error:c("error"),forceWarn:c("warn",!0),forceError:c("error",
!0),trace:function(b){var c=e[b-1];c?console.log(c.stack):console.error("No such log entry #"+b)},dump:function(){Kb(e,b)}}}();janrain.debug={dump:G.dump,trace:G.trace,$__UNSUPPORTED_MODULE__$:"This module is not provided for customer use, but is intended only for debugging purposes."};var $c=window.innerWidth?window.innerWidth:document.body&&document.body.clientWidth?document.body.clientWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:0;Sa=
window.innerHeight?window.innerHeight:document.body&&document.body.clientHeight?document.body.clientHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:0;Ta=$c;var $a=window.localStorage&&window.localStorage.getItem&&window.localStorage.removeItem&&window.localStorage.setItem,Ib=[],ec=!1,qb="CSS1Compat"!==document.compatMode,Ob="525d397",he=!1;document.createElement("input");var ad=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad|blackberry|rim tablet|android|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|playstation portable|sonyericsson|samsung|mobileexplorer|palmsource|benq|windows phone|windows mobile|iemobile|windows ce|nintendo wii|\Wsilk\W)/i),
Fa="number"===typeof window.orientation||null!==ad,Tc="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),$d="January,February,March,April,May,June,July,August,September,October,November,December".split(","),Le=[16,20,30,32,48,50,64],ie=[{text:"AL",value:"AL"},{text:"AK",value:"AK"},{text:"AZ",value:"AZ"},{text:"AR",value:"AR"},{text:"CA",value:"CA"},{text:"CO",value:"CO"},{text:"CT",value:"CT"},{text:"DE",value:"DE"},{text:"DC",value:"DC"},{text:"FL",value:"FL"},{text:"GA",value:"GA"},
{text:"HI",value:"HI"},{text:"ID",value:"ID"},{text:"IL",value:"IL"},{text:"IN",value:"IN"},{text:"IA",value:"IA"},{text:"KS",value:"KS"},{text:"KY",value:"KY"},{text:"LA",value:"LA"},{text:"ME",value:"ME"},{text:"MD",value:"MD"},{text:"MA",value:"MA"},{text:"MI",value:"MI"},{text:"MN",value:"MN"},{text:"MS",value:"MS"},{text:"MO",value:"MO"},{text:"MT",value:"MT"},{text:"NE",value:"NE"},{text:"NV",value:"NV"},{text:"NH",value:"NH"},{text:"NJ",value:"NJ"},{text:"NM",value:"NM"},{text:"NY",value:"NY"},
{text:"NC",value:"NC"},{text:"ND",value:"ND"},{text:"OH",value:"OH"},{text:"OK",value:"OK"},{text:"OR",value:"OR"},{text:"PA",value:"PA"},{text:"PR",value:"PR"},{text:"RI",value:"RI"},{text:"SC",value:"SC"},{text:"SD",value:"SD"},{text:"TN",value:"TN"},{text:"TX",value:"TX"},{text:"UT",value:"UT"},{text:"VT",value:"VT"},{text:"VA",value:"VA"},{text:"WA",value:"WA"},{text:"WV",value:"WV"},{text:"WI",value:"WI"},{text:"WY",value:"WY"}],Me=[{text:"AB",value:"AB"},{text:"BC",value:"BC"},{text:"MB",value:"MB"},
{text:"NB",value:"NB"},{text:"NL",value:"NL"},{text:"NS",value:"NS"},{text:"NT",value:"NT"},{text:"NU",value:"NU"},{text:"ON",value:"ON"},{text:"PE",value:"PE"},{text:"QC",value:"QC"},{text:"SK",value:"SK"},{text:"YT",value:"YT"}];Bb=13;Pd=38;Rd=40;Od=37;Qd=39;Nd=9;Mc=27;var ub="ontouchstart"in window;Md=ub?"touchstart":"mousedown";cc=ub?"touchend":"mouseup";pb=ub?"touchmove":"mousemove";janrain.settings&&janrain.settings.storageServer&&Nc("xDomainLocalStorageJanrain",janrain.settings.storageServer,
function(){x(document.getElementById("xDomainLocalStorageJanrain"),"load",function(){ec=!0})});oa.possible="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,0,1,2,3,4,5,6,7,8,9".split(",");var ja=navigator.userAgent,S=function(b,c){b=b||navigator.appName;c=c||ja;return"Microsoft Internet Explorer"===b&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(c)?parseFloat(RegExp.$1):!1}(),pc=document.documentMode,sb=/Gecko\//.test(ja),jc=/AppleWebKit\//.test(ja);/Chrome\//.test(ja);var Ne=!/Chrome\//.test(ja)&&
/Safari\//.test(ja);Cb();(function(b){var b=b||ja,c=b.indexOf("OS "),e=0;Cb(b)&&-1<c&&(e=Number(b.substr(c+3).split(" ")[0].split("_")[0]));return e})();var Yc=function(){var b=function(b){for(var c=[],i=0;i<b.length;i++)c.push(b[i]);return c},c={};janrain.settings&&janrain.settings.permissions&&(c.login=b(janrain.settings.permissions));janrain.settings&&janrain.settings.share&&janrain.settings.share.permissions&&(c.share=b(janrain.settings.share.permissions));return function(b,f){f=f||"login";return!c[f]?
!1:0<=c[f].indexOf(b)}}();za.options={strictMode:!1,key:"source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(","),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
da.isCloneable=function(b){return b&&(Jb(b)||q(b))};var U=function(b,c,e){U=document.getElementsByClassName?function(b,c,e){for(var b=(c||document).getElementsByClassName(b),e=e?RegExp("\\b"+e+"\\b","i"):null,c=[],k,m=0,q=b.length;m<q;m+=1)k=b[m],(!e||e.test(k.nodeName))&&c.push(k);return c}:function(b,c,e){var e=e||"*",c=c||document,k=b.split(" "),b=[],c="*"===e&&c.all?c.all:c.getElementsByTagName(e),e=[],m;m=0;for(var q=k.length;m<q;m+=1)b.push(RegExp("(^|\\s)"+k[m]+"(\\s|$)"));for(var q=0,x=c.length;q<
x;q+=1){k=c[q];m=!1;for(var l=0,A=b.length;l<A&&!(m=b[l].test(k.className),!m);l+=1);m&&e.push(k)}return e};return U(b,c,e)};G.info("Debugging mode is on. Run: \nlocalStorage.janrainDebugEnabled = false; \nin the console to turn it off.");window.localStorage&&"true"===localStorage.janrainLocalWidgetCodeEnabled&&G.forceWarn("Local code mode is on. Run: \nlocalStorage.janrainLocalWidgetCodeEnabled = false; \nin the console to turn it off.");S&&(G.info("[ Internet Explorer ]\nVersion       : "+S+"\nDocument Mode : "+
pc),S!==pc&&G.warn("IE version and document mode do not match! This could cause issues."));30<function(){var b=document.getElementsByTagName("style"),c=document.getElementsByTagName("link"),e=b.length;Kb(c,function(b){"stylesheet"===b.rel&&e++});return e}()&&G.warn("The page has more than 30 stylsheets. IE 8 and 9 cannot load more than 32 stylesheets.");window.top!==window.self&&G.warn("The widget might be running inside a frame. Watch out for cross origin issues.");janrain.settings.custom&&G.warn("janrain.settings.custom is true. Customer must provide their own UI.");
setTimeout(function(){janrain.ready||G.warn("janrain.ready is still not true after waiting for 10 seconds. The widget will not load until this is true. Check your widget loading code block.")},1E4);for(var Da=function(){function b(){if("undefined"===typeof window.orientation)return!1;var b;f(document.body,R);A=q().content;m();x();document.body.style.padding="0px";document.body.style.margin="0px";"object"===typeof window.onresize&&(b="resize");"object"===typeof window.onorientationchange&&(b="orientationchange");
b&&(window.addEventListener(b,function(){ba(window.orientation,{height:screen?screen.height:0,width:screen?screen.width:0},{height:window.innerHeight,width:window.innerWidth});g()},!1),setTimeout(g,30),window.addEventListener("beforeunload",function(){window.removeEventListener(b,g,!1)},!1));z.addHandler(function(){c({height:window.innerHeight,width:window.innerWidth},0)});L.addHandler(function(b){Sa=b.height;Ta=b.width});window.addEventListener("beforeunload",function(){window.removeEventListener(eventName,
g,!1)},!1)}function c(b,e){var f=window.innerHeight,g=window.innerWidth,k=!0,i=!0;f!=b.height&&(k=!1);g!=b.width&&(i=!1);k&&i?20>e?setTimeout(function(){c({height:f,width:g},++e)},100):L.fire({height:f,width:g}):setTimeout(function(){c({height:f,width:g},0)},100)}function e(){setTimeout(function(){l(A)},20);f(R,document.body)}function f(b,c){for(var e=0;e<b.style.length;e++){var f=b.style[e];c.style.setProperty(f,b.style.getPropertyValue(f),b.style.getPropertyPriority(f))}}function k(){var b;b=(0===
window.orientation||180===window.orientation)&&Ta>Sa||(90===window.orientation||-90===window.orientation)&&Sa>Ta?!1:!0;var c="landscape";if(b&&(0===window.orientation||180===window.orientation))c="portrait";if(!b&&(90===window.orientation||-90===window.orientation))c="portrait";return c}function g(){var b=k();l("width=device-width, initial-scale=1, maximum-scale=1");z.fire({orientation:b})}function q(){var b=document.getElementsByTagName("meta"),c;for(c in b)if("viewport"===b[c].name)return b[c];
return!1}function m(){if("undefined"===typeof document.getElementsByTagName||q())return!1;var b=document.getElementsByTagName("head")[0],c=document.createElement("meta");c.setAttribute("name","viewport");b.appendChild(c);return!0}function x(){if("undefined"===typeof document.getElementsByTagName)return!1;document.getElementsByTagName("head");var b=document.createElement("meta");b.setAttribute("name","HandheldFriendly");b.content="true"}function l(b){var c=q();if(!c||c.content==b)return!1;if("undefined"===
typeof b){var e=q();document.getElementsByTagName("head")[0].removeChild(e)}c.content=b;return!0}var A,R=document.createElement("div"),B=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad|blackberry|rim tablet|android|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|playstation portable|sonyericsson|samsung|mobileexplorer|palmsource|benq|windows phone|windows mobile|iemobile|windows ce|nintendo wii|\Wsilk\W)/i),E=null!==B?B[0]:!1,z=na(),L=na();E&&E[0].match(/android|\Wsilk\W/);
var ba=function(){var b=window.orientation,c={height:screen?screen.height:0,width:screen?screen.width:0},e={height:window.innerHeight,width:window.innerWidth},f=!1;return function(g,k,i){var q=!1,m=function(b,c){return b.height>=b.width&&c.height>=c.width||b.width>b.height&&c.width>c.height?!0:!1},o=b===g,l=m(k,c),x=m(i,e);if(!o&&(!l||!x))q=!0;!o&&!l&&(f=!0);q&&(f&&!m(k,i)&&(q=i.height,i.height=i.width,i.width=q),Sa=i.height,Ta=i.width);b=g;c={height:k.height,width:k.width};e={height:i.height,width:i.width}}}();
return{setElement:function(){return this},onOrientationChange:z,onViewportChange:L,getMobileDevice:function(){return E},getOrientation:function(){return k()},activate:function(){b()},deactivate:function(){e()}}}(),Xc=function(b){var c;c="https:"===document.location.protocol?"https://docj27ko03fnu.cloudfront.net/":"http://cdn.rpxnow.com/";c=c.replace(/\/$/,"");return c+"/"+b},bd={openId:{blogger:{identifier:"blogger",flow:"openid1",width:800,height:600,color:"#FF6600",friendlyName:"Blogger"},livejournal:{identifier:"livejournal",
flow:"openid1",width:800,height:600,color:"##213368",friendlyName:"LiveJournal"},netlog:{identifier:"netlog",flow:"openid1",width:800,height:600,color:"#000000",friendlyName:"Netlog"},wordpress:{identifier:"wordpress",flow:"openid1",width:800,height:600,color:"#21759b",friendlyName:"WordPress"},openid:{identifier:"openid",flow:"openid1",width:800,height:600,color:"#f79311",friendlyName:"OpenID"}},openId2:{aol:{identifier:"http://aol.com",flow:"openid",width:514,height:550,color:"#0FD6FF",friendlyName:"AOL"},
flickr:{identifier:"https://me.yahoo.com/id",flow:"openid",width:500,height:500,color:"#FF0084",friendlyName:"Flickr"},google:{identifier:"https://www.google.com/accounts/o8/id",flow:"openid",width:500,height:450,color:"#1C69F5",friendlyName:"Google"},hyves:{identifier:"http://hyves.nl/",flow:"openid",width:800,height:600,color:"#659BC8",friendlyName:"Hyves"},myopenid:{identifier:"http://myopenid.com/",flow:"openid",width:800,height:600,color:"#8cc63f",friendlyName:"MyOpenID"},paypal:{identifier:"https://www.paypal.com/webapps/auth/server",
flow:"openid",width:800,height:600,color:"#1A3665",friendlyName:"PayPal"},verisign:{identifier:"http://pip.verisignlabs.com/",flow:"openid",width:945,height:600,color:"#B8004D",friendlyName:"VeriSign"},yahoo:{identifier:"https://me.yahoo.com/id",flow:"openid",width:500,height:500,color:"#650065",friendlyName:"Yahoo!",shareSettings:{broadcast:{counter:{},format:{message:"#{MESSAGE} #{URL}"},features:{message:!0,title:!1,url:!1,description:!1,image:!1,media:!1,actionLink:!1}}}}},oauth:{facebook:{flow:"facebook",
width:640,height:480,color:"#3B5998",friendlyName:"Facebook",publishSettings:{},shareSettings:{broadcast:{counter:{},format:{},features:{message:!0,title:!0,url:!0,description:!0,image:!0,media:!0,actionLink:!0}}}},myspace:{flow:"myspace",width:800,height:500,color:"#000000",friendlyName:"Myspace",shareSettings:{broadcast:{counter:{},format:{message:"#{MESSAGE} #{URL}"},features:{message:!0,title:!1,url:!1,description:!1,image:!1,media:!1,actionLink:!1}}}},twitter:{flow:"twitter",width:800,height:500,
color:"#35CCFF",friendlyName:"Twitter",shareSettings:{broadcast:{counter:{max:140,urlRegex:/\b(?:[a-z]{1}[-a-z0-9+.]+:(?:\/\/)?)?[-a-z0-9._~@:!$&'()*+,;=]+(?:\.[-a-z0-9._~@:!$&'()*+,;=]+)*(?:\.(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx))(?::\d+)?(?:\/[-a-z0-9._~@:!$&'()*+,;=]+)*(?:\?[-a-z0-9._~@:!$&'()*+,;=%]+)?(?:#[-a-z0-9._~@:!$&'()*+,;=%]+)?\b/ig,urlLength:23},format:{message:"#{MESSAGE} #{URL}"},features:{message:!0,title:!1,url:!1,description:!1,
image:!1,media:!1,actionLink:!1}},contact:{counter:{max:140,urlRegex:/\b(?:[a-z]{1}[-a-z0-9+\.]+:(?:\/\/)?)?[-a-z0-9._~@:!$&'()*+,;=]+(?:\.[-a-z0-9._~@:!$&'()*+,;=]+)*(?:\.(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx))(?::\d+)?(?:\/[-a-z0-9._~@:!$&'()*+,;=]+)*(?:\?[-a-z0-9._~@:!$&'()*+,;=%]+)?(?:#[-a-z0-9._~@:!$&'()*+,;=%]+)?\b/ig,urlLength:23},format:{message:"#{MESSAGE} #{URL}"},features:{message:!0,title:!1,url:!1,description:!1,image:!1,media:!1,
actionLink:!1}}}},linkedin:{flow:"linkedin",width:550,height:750,color:"#006699",friendlyName:"LinkedIn",shareSettings:{broadcast:{counter:{},format:{},features:{message:!0,title:!0,url:!0,description:!0,image:!0,media:!1,actionLink:!1}},contact:{counter:{},format:{message:"#{MESSAGE} #{URL}"},features:{message:!0,title:!0,url:!1,description:!1,image:!1,media:!1,actionLink:!1}}}},live_id:{flow:"liveid",width:900,height:600,color:"#666666",friendlyName:"Windows Live ID"},salesforce:{flow:"salesforce",
width:800,height:500,color:"#333333",friendlyName:"Salesforce"},orkut:{flow:"orkut",width:800,height:600,color:"#333",friendlyName:"Orkut"},vzn:{flow:"vzn",width:600,height:450,color:"#333",friendlyName:"VZnet"},foursquare:{flow:"foursquare",width:950,height:550,color:"#333",friendlyName:"Foursquare"},sinaweibo:{flow:"sinaweibo",width:950,height:550,color:"#333",friendlyName:"Sina Weibo"},tumblr:{flow:"tumblr",width:950,height:550,color:"#333",friendlyName:"Tumblr"},microsoft_live_connect:{flow:"microsoft_live_connect",
width:950,height:550,color:"#333",friendlyName:"Microsoft Live Connect"},renren:{flow:"renren",width:950,height:550,color:"#333",friendlyName:"Renren"},disqus:{flow:"disqus",width:950,height:550,color:"#333",friendlyName:"Disqus"},soundcloud:{flow:"soundcloud",width:950,height:550,color:"#333",friendlyName:"SoundCloud"},vk:{flow:"vk",width:950,height:550,color:"#333",friendlyName:"VK"},amazon:{flow:"amazon",width:950,height:550,color:"#FF9900",friendlyName:"Amazon"},microsoftaccount:{flow:"microsoftaccount",
width:950,height:550,color:"#3E73B4",friendlyName:"Microsoft Account"},instagram:{flow:"instagram",width:950,height:550,color:"#FFFFFF",friendlyName:"Instagram"},googleplus:{flow:"googleplus",width:445,height:665,color:"#D34836",friendlyName:"Google"},xing:{flow:"xing",width:950,height:550,color:"#006567",friendlyName:"XING",shareSettings:{broadcast:{counter:{max:420,urlLength:23},format:{message:"#{MESSAGE} #{URL}"},features:{message:!0,title:!1,url:!1,description:!1,image:!1,media:!1,actionLink:!1}},
contact:{counter:{},format:{message:"#{MESSAGE} #{URL}"},features:{message:!0,title:!1,url:!1,description:!1,image:!1,media:!1,actionLink:!1}}}},mixi:{flow:"mixi",width:950,height:550,color:"#333",friendlyName:"Mixi",shareSettings:{broadcast:{counter:{},format:{message:"#{MESSAGE} #{URL}"},features:{message:!0,title:!0,url:!1,description:!1,image:!1,media:!1,actionLink:!1}},contact:{counter:{},format:{message:"#{MESSAGE} #{URL}"},features:{message:!0,title:!0,url:!1,description:!1,image:!1,media:!1,
actionLink:!1}}}},email:{color:"#009ddc",shareSettings:{email:{providers:{google:!0,googleplus:!0,yahoo:!0},counter:{},format:{message:"#{MESSAGE} #{URL}"},features:{message:!0,title:!1,url:!1,description:!1,image:!1,media:!1,actionLink:!1}}}}}},Pb=["openId","openId2","oauth"];0<Pb.length;){var cd=Pb.pop(),dd;for(dd in bd[cd]);}var ed=[],K=function(){var b=[];return{log:function(c){var e={};e.id=b.length+1;e.message=c;b.push(e);return this},show:function(){if(0!=b.length){for(var c in b)if("undefined"!==
typeof b[c].id){var e=b[c];"object"===typeof console&&("function"===typeof console.error?console.error("WARNING ID:"+e.id+" MESSAGE: "+e.message):"function"===typeof console.log&&console.log("WARNING ID:"+e.id+" MESSAGE: "+e.message))}b=[]}}}}();_debugAllFiredEvents=!1;_trackerUrl="http://zimo-staging.janrain.com";ca.prototype.trackEvent=function(){Ia(_trackerUrl+"/widgets/"+this.eventName)};ca.prototype.addHandler=function(b){0<this.fireCount&&G.warn("Adding handler for event "+(this.eventName?this.eventName:
"???")+" but it has already been fired "+this.fireCount+" time(s).");this.eventHandlers.push(b);return this.eventHandlers.length-1};ca.prototype.removeHandler=function(b){return this.eventHandlers[b]?(this.eventHandlers[b]=null,!0):!1};ca.prototype.fire=function(b){var c=this.eventHandlers.length;this.fireCount++;for(var e=0;e<c;e++)try{if("function"===typeof this.eventHandlers[e])this.eventHandlers[e](b)}catch(f){K.log(f),K.show()}if(b&&(_debugAllFiredEvents||Jb(b)&&"save"in b&&!0===b.save))delete b.save,
this.firedEvents.push({event:this,args:b});this.track&&janrain.settings.activityBeta&&this.trackEvent()};"undefined"===typeof janrain.events&&(janrain.events={});var J;J||(J={});(function(){function b(b){return 10>b?"0"+b:b}function c(b){k.lastIndex=0;return k.test(b)?'"'+b.replace(k,function(b){var c=m[b];return"string"===typeof c?c:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function e(b,f){var k,i,m,x,A=g,B,w=f[b];w&&"object"===typeof w&&"function"===typeof w.toJSON&&
(w=w.toJSON(b));"function"===typeof l&&(w=l.call(f,b,w));switch(typeof w){case "string":return c(w);case "number":return isFinite(w)?""+w:"null";case "boolean":case "null":return""+w;case "object":if(!w)return"null";g+=q;B=[];if("[object Array]"===Object.prototype.toString.apply(w)){x=w.length;for(k=0;k<x;k+=1)B[k]=e(k,w)||"null";m=0===B.length?"[]":g?"[\n"+g+B.join(",\n"+g)+"\n"+A+"]":"["+B.join(",")+"]";g=A;return m}if(l&&"object"===typeof l){x=l.length;for(k=0;k<x;k+=1)"string"===typeof l[k]&&
(i=l[k],(m=e(i,w))&&B.push(c(i)+(g?": ":":")+m))}else for(i in w)Object.prototype.hasOwnProperty.call(w,i)&&(m=e(i,w))&&B.push(c(i)+(g?": ":":")+m);m=0===B.length?"{}":g?"{\n"+g+B.join(",\n"+g)+"\n"+A+"}":"{"+B.join(",")+"}";g=A;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+
"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,q,m={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof J.stringify&&(J.stringify=function(b,
c,f){var k;q=g="";if("number"===typeof f)for(k=0;k<f;k+=1)q+=" ";else"string"===typeof f&&(q=f);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return e("",{"":b})});"function"!==typeof J.parse&&(J.parse=function(b,c){function e(b,f){var k,g,i=b[f];if(i&&"object"===typeof i)for(k in i)Object.prototype.hasOwnProperty.call(i,k)&&(g=e(i,k),void 0!==g?i[k]=g:delete i[k]);return c.call(b,f,i)}var k,b=""+b;f.lastIndex=0;f.test(b)&&(b=b.replace(f,
function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return k=eval("("+b+")"),"function"===typeof c?e({"":k},""):k;throw new SyntaxError("JSON.parse");})})();nb=void 0;ob=void 0;false||(ob=na());nb||(nb=na());janrain.events.captureEvents="onCaptureRenderStart,onCaptureRenderComplete,onCaptureScreenShow,onCaptureSessionCreated,onCaptureSessionEnded,onCaptureAccessDenied,onCaptureRegistrationStart,onCaptureLoginStart,onCaptureLoginSuccess,onCaptureProfileSaveSuccess,onCaptureProfileSaveFailed,onCaptureFederateNoLogin,onCaptureFederateLogin,onCaptureFederateRefreshedToken,onCaptureLoginFailed,onCaptureRegistrationSuccess,onCaptureRegistrationFailed,onCaptureEmailVerificationSuccess,onCaptureEmailVerificationFailed,onCaptureForgotPasswordCodeSuccess,onCaptureForgotPasswordCodeFailed,onCaptureSaveSuccess,onCaptureSaveFailed,onCaptureSessionFound,onCaptureSessionNotFound,onCaptureContentChange,onCaptureModalReady,onCaptureValidationSuccess,onCaptureValidationFailed,onCaptureValidationComplete,onCaptureServerValidationFailed,onCaptureFormError,onCaptureProfileCookieSet,onCaptureExpiredToken,onCaptureInvalidToken,onCaptureTransactionTimeout,onCaptureCustomEvent,onCaptureProfileLink,onCaptureEmailSent,onCaptureProfileUnlink,onCapturePhotoUploadSuccess,onCaptureBackplaneReady,onCaptureBackplaneInitFailed,onCaptureAutoSaveUpdate,onCaptureControlSuccess,onCaptureControlFailed,onModalClose,onModalOpen,onCaptureAccountReactivateSuccess,onCaptureAccountReactivateFailed,onCaptureAccountDeactivateSuccess,onCaptureAccountDeactivateFailed,onCaptureLinkAccountError,onCaptureError,onCaptureSubscriptionUpdate,onCaptureRegistrationSuccessNoLogin,onCapturePostLoginScreen".split(",");
for(var eb=0,fd=janrain.events.captureEvents.length;eb<fd;eb++)"undefined"===typeof janrain.events[janrain.events.captureEvents[eb]]&&(janrain.events[janrain.events.captureEvents[eb]]=new ca);janrain.events.onCaptureEmailVerficationSuccess=janrain.events.onCaptureEmailVerificationSuccess;janrain.events.onCaptureControlSuccesss=janrain.events.onCaptureControlSuccess;janrain.federateJSLoaded=!1;janrain.settings.capture.federate&&hc("https://d1v9u0bgi1uimx.cloudfront.net/sso.js",function(){janrain.federateJSLoaded=
!0}).setTimeoutLimit(1E4).setTimeoutCallback(function(){janrain.settings.capture.federate=!1}).load();Nb();nc();var gd=new function(){return{status:"not loaded"}},hd=new function(){return{status:"not loaded"}},id=new function(){return{status:"not loaded"}},Oe=new function(){return{status:"not loaded"}},Qe=new function(){function b(a){function d(a,d){var h=a instanceof ke?a:new ke(a),b=d&&la(d,"merge")&&!0===d.merge,v,c;a&&(v=h.get("id")||"auto_id_"+oa(7),h.get("id")!==v&&h.set("id",v),(c=p[v])&&b&&
c.set(h.attributes),!c&&-1==f.indexOf(h)&&(f.push(h),p[v]=h,r.length=f.length));return h}function h(a){var d;a&&(d=f.indexOf(a),0<=d&&(f.splice(d,1),delete p[a.get("id")],r.length=f.length));return a}function b(a,h){for(var a=q(a)?a:[a],v=0,c=a.length;v<c;)d(a[v],h),v+=1;return r}function c(a){for(var a=q(a)?a:[a],d=0,b=a.length;d<b;)h(a[d]),d+=1;return r}function e(a){return f.filter(function(d){for(var h in a)return la(a,h)&&d.get(h)===a[h]})}var f=[],p={},r={length:0,_models:f,_fieldsById:p};a&&
b(a);return $(r,{get:function(a){return p[a]},getById:function(a){return p[a]},getByName:function(a){for(var a=e({name:a}),d=0,h=1,b=a.length-1;h<=b;)a[d].time<=a[h].time&&(d=h),h+=1;return a[d]},getFieldsByName:function(a){return e({name:a})},add:function(a,d){return b(a,d)},remove:function(a){return c(a)},indexOf:function(a){return f.indexOf(a)},at:function(a){return f[a]},reset:function(){return c(f)},each:function(a,d){Kb(f,a,d);return r},map:function(a){return f.map(a)},where:function(a){return e(a)},
addField:function(a){d(a);return r},addFields:function(a){return b(a)},removeField:function(a){h(a);return r},removeFields:function(a){return c(a)},updateField:function(a){d(a,{merge:!0});return r},update:function(a){return b(a,{merge:!0})},updateFields:function(a){return b(a,{merge:!0})}})}function c(a){var d=janrain.settings.capture.modalBorderWidth||10,h=janrain.settings.capture.modalBorderColor||"#000",b=janrain.settings.capture.modalBorderRadius||10,c=janrain.settings.capture.modalBorderOpacity||
0.5;a.setConfirmClose(!!janrain.settings.capture.confirmModalClose).setBorderColor(h).setBorder(d).setBorderOpacity(c).setBorderRadius(b);return a}function e(a){if("object"!==typeof y)y=new ee,le();else{var d=y.getContent();d.style.display="none";d&&document.body.appendChild(d)}D&&D.modal&&vb.push(D);y=c(y);y.addContent(a).show();y.setHeight(Hb(a).height);y.setWidth(Hb(a).width).refresh({center:!0})}function f(a){function d(){qc=!0;var d=a||m(),h=za(a),b=za(janrain.settings.capture.captureServer);
a&&!he&&(K.log("This environment does not allow specifying a flow path through janrain.capture.ui.start"),K.show(),d=null);"http"===b.protocol||"https"===b.protocol||(K.log("The capture server url does not have a valid protocol. Check your settings."),K.show());if(!b.host||"undefined"===b.host)K.log("The capture server url does not have a valid host. Check your settings."),K.show();a&&(Na=h.queryKey.flow_path);Ia(d,oc);nb();ec();janrain.events.onCaptureLoginFailed.addHandler(function(){wb++;ub()});
janrain.events.onCaptureLoginSuccess.addHandler(function(){wb=0;ub()});janrain.events.onCaptureLoginSuccess.addHandler(function(){jd(rc)});janrain.events.onCaptureRegistrationSuccess.addHandler(function(){jd(rc)});janrain.events.onCaptureValidationComplete.addHandler(function(){a:{var a=!1,d;for(d in N)if("invalid"===N[d].status){var h=N[d].postValidationActions;if(h)for(var b in h){if(!N[d].validation||"undefined"===typeof N[d].validation[b])break a;for(var v in h[b])if(h[b].hasOwnProperty(v))switch(v){case "render":h[b].render.screen&&
!a&&(a=!0,(new fb).setScreenData(h[b].render.screen,n.screens[h[b].render.screen]));break;case "setCookie":var c=h[b].setCookie.name,ta=h[b].setCookie.value,e=h[b].setCookie.days;(new z).setExpiration(e).setUseLocalStorage(!0).setName(c).setValue(ta).create()}}}}});janrain.events.onCaptureRenderComplete.addHandler(function(){if(kd){var a=ha.savedProfileMessage||"Your profile has been saved",d=U("capture_profileSavedMessage_container",D.div),h=d.length;if(h)for(var b=0,h=d.length;b<h;b++)d[b].innerHTML=
a,d[b].style.display="",Pb(d[b]);else if(ld&&(d=document.getElementById(F+ld+"_defaultSavedProfileMessage")))d.innerHTML='<div class="capture_save_success capture_profileSavedMessage_container">'+a+"</div>",Pb(d);kd=!1;if(janrain.settings.capture.autoSave){for(;ed.length;)ed.pop().unbindDragHandlers();Va.each(Eb)}}C()});janrain.events.onCaptureContentChange.addHandler(function(){if("object"===typeof y&&y.isOpen()){y.setHeight(Hb(y.getContent()).height);var a=y.getState().width,d=Hb(y.getContent()).width;
(a=a!==d)&&y.setWidth(d);y.refresh({center:a})}});janrain.settings.custom&&!md&&ab()}function h(){Ne&&!janrain.settings.capture.federateEnableSafari&&(janrain.settings.capture.federate=!1);janrain.settings.capture.federate&&!janrain.federateJSLoaded&&(janrain.settings.capture.federate=!1,sc=!0);d()}function b(){Oa=Backplane.getChannelID();if(!tc){tc=!0;var a=function(){Backplane.expectMessages("identity/login")};janrain.events.onCaptureLoginSuccess.addHandler(a);janrain.events.onCaptureRegistrationSuccess.addHandler(a);
janrain.events.onCaptureBackplaneReady.fire();h()}}nd(me());janrain.settings.capture.noStyling||(ic(Sd()+"widgets.css"),Vd(Sd()+"widgets-ie.css"));if(janrain.settings.capture.stylesheets&&q(janrain.settings.capture.stylesheets))for(var c=janrain.settings.capture.stylesheets,e=c.length,f=0;f<e;f++)ic(c[f]),I(c[f]);if(S&&9>S&&janrain.settings.capture.conditionalIEStylesheets&&q(janrain.settings.capture.conditionalIEStylesheets)){c=janrain.settings.capture.conditionalIEStylesheets;e=c.length;for(f=0;f<
e;f++)Vd(c[f]),I(c[f])}if(Fa&&janrain.settings.capture.mobileStylesheets&&q(janrain.settings.capture.mobileStylesheets)){c=janrain.settings.capture.mobileStylesheets;e=c.length;for(f=0;f<e;f++)ic(c[f]),I(c[f])}janrain.settings.capture.backplane?Ia(bd,function(){function a(){c++;if(20<c)return M("backplanecallback not successful"),janrain.events.onCaptureBackplaneInitFailed.fire(),tc=!0,janrain.settings.capture.backplane=!1,h(),!1;if(tc)return clearTimeout(d),!1;var d=setTimeout(a,500)}"function"===
typeof Backplane?Backplane(b):ne=!0;var d={serverBaseURL:cd,busName:janrain.settings.capture.backplaneBusName,replayOnPageLoad:fd};2<=parseInt(uc,10)&&(d.block=dd);"undefined"!==typeof janrain.settings.capture.backplaneChannelExpires&&(d.channelExpires=janrain.settings.capture.backplaneChannelExpires);Backplane.init(d);ne&&"undefined"!==typeof Backplane&&b();var c=0;a()}):h()}function i(a,d,h,b){var c=[];b&&c.push({value:"",text:b,disabled:!0});if("desc"===h)for(h=d;h>a-1;h--)c.push({value:h,text:h});
else for(h=a;h<d+1;h++)c.push({value:h,text:h});return c}function g(a){a||(a=O);return"string"===typeof a?"capture_"+a+"_":"capture_"+o(a)+"_"}function o(a){if(a!==window){var d=a.getAttribute("data-capturescreenname");if(d&&n.screens[d])return d;for(var d=U("capture_screen_container"),h=0,b=d.length;h<b;h++)if(Xd(d[h],a))return d=d[h].getAttribute("data-capturescreenname"),a.setAttribute("data-capturescreenname",d),d}}function m(){var a=xb,d=janrain.settings.capture.flowVersion||"HEAD",h=ja()||"default",
b=janrain.settings.capture.appid||janrain.settings.capture.appId;return uri=b?/^[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}$/.test(d)?ca()+"/widget_data/flows/"+b+"/"+h+"/"+d+"/"+a+".js":ca()+"/widget_data/flow.js:"+b+":"+a+":"+d+":"+h:ca()+"/widget_data/flow.js:"+a+":"+d+":"+h}function ja(){return Fa&&janrain.settings.capture.mobileFlowName?janrain.settings.capture.mobileFlowName:janrain.settings.capture.flowName}function ca(){return"https://d1lqe9temigv1p.cloudfront.net"}function I(a){l(vc,
a)||vc.push(a);od=vc.length}function R(a){return{name:"MissingLayoutDivError",message:"The div containing the layout template code for '"+a+"' is missing."}}function na(a){a=B(a);Sa(a)}function E(a){var d=0,h=0,b=0,c=0;T(N,function(e,f){"pending"==f.status&&a===f.formId&&d++;"invalid"==f.status&&a===f.formId&&h++;"undefined"!==typeof f.unique&&!1===f.unique&&a===f.formId&&b++;"valid"==f.status&&a===f.formId&&c++});return{pending:d,invalid:h,notUnique:b,valid:c}}function Sa(a,d){var h=a.getAttribute("data-capturefield"),
h=Qb.check(a,n.fields[h]),b=document.getElementById(a.id+"_errors");!h.valid&&h.reason?b&&(b.innerHTML=h.reason):b&&(b.innerHTML="");if(d)return"object"!==typeof h&&(h={valid:!0}),h}function L(a,d){var h=g(a),b=document.getElementById(h+d.name+"_dateselectmonth"),b=b.options[b.selectedIndex].value,c=document.getElementById(h+d.name+"_dateselectday"),c=c.options[c.selectedIndex].value,h=document.getElementById(h+d.name+"_dateselectyear"),h=h.options[h.selectedIndex].value;return!b||!c||!h?!1:b+"/"+
c+"/"+h}function ba(a,d){if(!a)return!1;for(var h=pa(a.getElementsByTagName("input")),h=h.concat(pa(a.getElementsByTagName("select"))),h=h.concat(pa(a.getElementsByTagName("textarea"))),b=[],d=d||!1,c={},e=!1,f,p=0,r=h.length;p<r;p++)f=h[p],(e="file"===f.type?Sa(f,!0).valid:Za(f,!0,d))||b.push(f),"true"===f.getAttribute("data-capturecollection")&&!c[f.name]&&(c[f.name]=!0);janrain.events.onCaptureValidationComplete.fire({fieldsWithError:b});return 0===b.length}function w(){}function Ta(a){function d(a){A(a);
(s?h:b)(a)}function h(a){A(a);m.style.display="none";s=!1}function b(){if(!s){var a=P||ma;if(X.getMonth()!==a.getMonth()||X.getFullYear()!==a.getFullYear())X=new Date(a),n(X)}s=!0;m.style.display="block"}function c(a){Pc(Ga);for(var a=parseInt(a),d=D.getFullYear();d>=C.getFullYear();--d){var h=document.createElement("option");h.setAttribute("value",d);aa(h,d);Ga.appendChild(h)}Ga.value=a}function e(){X.setMonth(I.value);X.setFullYear(Ga.value);n(X)}function f(a){I.value=a.getMonth();a=a.getFullYear();
Ga.value=a}function p(a){return function(d){A(d);X.setMonth(X.getMonth()+a);d=X.getFullYear();(d<C.getFullYear()||d>D.getFullYear())&&X.setMonth(X.getMonth()-a);n(X)}}function r(a){a=a.getDay();return y?(a-1+7)%7:a}function j(a){P=new Date(X);P.setDate(a);"object"===typeof Q&&"INPUT"===Q.nodeName&&(Q.value=wa(L,P));h();F(P)}function g(a,d){return a.getDate()===d.getDate()&&a.getMonth()===d.getMonth()&&a.getFullYear()===d.getFullYear()}function i(a){return(g(a,C)||a>C)&&(g(a,D)||a<D)}function n(a){function d(a){A(a);
var a=B(a),h=a.getAttribute("data-date");M&&k(M.parentNode).remove("capture_datePicker_selectedDate");k(a.parentNode).append("capture_datePicker_selectedDate");M=a;j(h)}Pc(l);if(O)f(X);else{var h=wa(T,a);Pc(u);aa(u,h)}h=document.createElement("tr");h.className="capture_datePicker_daysOfTheWeekHeader";for(var b=0,v=w.length;b<v;b++){var c=document.createElement("th");aa(c,w[b]);h.appendChild(c)}l.appendChild(h);var ta=a.getMonth(),h=new Date(a),e,a=1;h.setDate(1);e=r(h);var b=document.createElement("tr"),
W=new Date(h),ga=1-e;W.setDate(ga);for(v=0;v<e;++v){var c=document.createElement("td"),p=document.createElement("a");aa(p,W.getDate());c.appendChild(p);c.style.textAlign="right";p.setAttribute("data-date",ga);p.href="#";c.className="capture_datePicker_prevMonthDay";b.appendChild(c);i(W)?(k(c).append("capture_datePicker_day"),x(p,"click",d)):k(c).append("capture_datePicker_day_disabled");P&&g(W,P)&&(k(c).append("capture_datePicker_selectedDate"),M=p);g(W,G)&&k(c).append("capture_datePicker_today");
W.setDate(W.getDate()+1);ga++}for(;h.getMonth()===ta;)c=document.createElement("td"),p=document.createElement("a"),p.setAttribute("data-date",a),p.href="#",aa(p,a),i(h)?(c.className="capture_datePicker_day",x(p,"click",d)):c.className="capture_datePicker_day_disabled",P&&g(h,P)&&(k(c).append("capture_datePicker_selectedDate"),M=p),g(h,G)&&k(c).append("capture_datePicker_today"),c.appendChild(p),b.appendChild(c),++e,6<e&&(e=0,l.appendChild(b),b=document.createElement("tr")),++a,h.setDate(a);v=r(h);
a=new Date(h);a.setDate(a.getDate()-1);a=a.getDate()+1;if(0<v){for(v=r(h);7>v;++v)c=document.createElement("td"),p=document.createElement("a"),c.style.textAlign="right",p.href="#",p.setAttribute("data-date",a),aa(p,h.getDate()),c.appendChild(p),c.className="capture_datePicker_nextMonthDay",b.appendChild(c),i(h)?(k(c).append("capture_datePicker_day"),x(p,"click",d)):k(c).append("capture_datePicker_day_disabled"),P&&g(h,P)&&(k(c).append("capture_datePicker_selectedDate"),M=p),g(h,G)&&k(c).append("capture_datePicker_today"),
h.setDate(h.getDate()+1),a++;l.appendChild(b)}}var t=a||{},m,u,ga,gb,o,l,w="Su,Mo,Tu,We,Th,Fr,Sa".split(","),y=!1,s=ga=!1,z,F=t.callback||function(){};o=t.monthPreviousText;var oe=t.monthNextText,Q=t.targetElement,J=t.extraTargetElements||[],a=t.elementAttachedTo,K=t.openOnTargetElementFocus,Pe=t.provideOpenButton,H,E=!!t.hasCloseButton,G=new Date,C=void 0!==t.minimumSelectableDate?t.minimumSelectableDate:"1/1/"+(G.getFullYear()-100),D=void 0!==t.maximumSelectableDate?t.maximumSelectableDate:"12/31/"+
(G.getFullYear()+30),O=t.monthAndYearSelectable,N=t.arrowKeyNavigation,I,Ga,pd=void 0!==t.defaultDate?t.defaultDate:new Date,ma=pd,X,P=t.preSelectedDate,M,L=t.format||"{m}/{d}/{yyyy}",T=t.calendarTitleFormat||"{month} {yyyy}";X=new Date(ma);ka(ma)?(z=Qc(ma),ma=new Date,ma.setDate(ma.getDate()+z)):"string"===typeof ma&&(ma=new Date(ma));ka(C)?(z=Qc(C),C=new Date,C.setDate(C.getDate()+z)):"string"===typeof C&&(C=new Date(C));ka(D)?(z=Qc(D),D=new Date,D.setDate(D.getDate()+z)):"string"===typeof D&&(D=
new Date(D));Ja(ma)||(ma=new Date);pd=new Date(ma);Ja(C)||(C=new Date("1/1/"+(G.getFullYear()-100)));Ja(D)||(D=new Date("12/31/"+(G.getFullYear()+30)));"undefined"===typeof N&&(N=!0);z="January,February,March,April,May,June,July,August,September,October,November,December".split(",");t.monthNames&&12===t.monthNames.length&&(z=t.monthNames);t.weekStartsOnMonday&&(y=t.weekStartsOnMonday,ga=!0);t.daysOfWeek&&7===t.daysOfWeek.length&&(w=t.daysOfWeek,ga=!1);ga&&w.push.apply(w,w.splice(0,1));m=document.createElement("div");
m.className="capture_datePicker_wrapper";t.additionalClasses&&(q(t.additionalClasses)&&(t.additionalClasses=t.additionalClasses.join(" ")),m.className+=" "+t.additionalClasses);"object"===typeof Q&&(k(Q).append("capture_datePicker_targetElement"),P&&Ja(P)&&"INPUT"===Q.nodeName&&(Q.value=wa(L,P)),"undefined"===typeof a&&(a=Q.parentNode));t=0;"object"===typeof a&&(k(a).append("capture_datePicker_mainTarget"),t=a.offsetHeight);Wd(m,{display:"none",position:"absolute",top:t+"px",right:"0",zIndex:"100"});
t=document.createElement("div");t.className="capture_datePicker_header";u=document.createElement("div");u.className="capture_datePicker_monthAndYearDisplayDiv";ga=document.createElement("a");ga.setAttribute("href","#");ga.className="capture_datePicker_previousMonthButton capture_datePicker_monthButtons";gb=document.createElement("a");gb.setAttribute("href","#");gb.className="capture_datePicker_nextMonthButton capture_datePicker_monthButtons";t.appendChild(u);m.appendChild(t);if(O){I=document.createElement("select");
Ga=document.createElement("select");I.className="capture_datePicker_monthSelect";Ga.className="capture_datePicker_yearSelect";for(var U=X.getMonth(),R=0;12>R;++R){var V=document.createElement("option");V.setAttribute("value",R);aa(V,z[R]);I.appendChild(V)}z=X.getFullYear();c(z);I.value=U;Ga.value=z;x(I,"change",e);x(Ga,"change",e);u.appendChild(I);u.appendChild(Ga)}o?aa(ga,o):k(ga).append("janrain-icon-16").append("janrain-icon-back");oe?aa(gb,oe):k(gb).append("janrain-icon-16").append("janrain-icon-forward");
x(ga,"click",p(-1));x(gb,"click",p(1));t.appendChild(ga);t.appendChild(gb);o=document.createElement("table");o.className="capture_datePicker_monthTable";o.style.width="100%";o.cellSpacing=0;o.cellPadding=0;l=document.createElement("tbody");o.appendChild(l);m.appendChild(o);E&&(E=document.createElement("div"),E.className="capture_datePicker_closeButton",E.style.textAlign="center",o=document.createElement("a"),o.href="#",aa(o,"Close"),x(o,"click",h),E.appendChild(o),m.appendChild(E));Pe&&"object"===
typeof a&&(H=document.createElement("span"),H.className="capture_datePicker_openButton janrain-icon-calendar janrain-icon-16",x(H,"click",d),a.appendChild(H));n(ma);K&&"object"===typeof Q&&x(Q,"focus",b);"object"===typeof Q&&(x(Q,"keydown",function(a){switch(a.keyCode){case Nd:case Bb:case Mc:h()}}),x(Q,"keyup",function(){if("INPUT"===Q.nodeName){var a=ae(L,Q.value);Ja(a)&&i(a)&&(X=a,P=new Date(a),n(a))}}),x(Q,"blur",function(){if("INPUT"===Q.nodeName){var a=ae(L,Q.value);Ja(a)||!i(a)?P?(X=new Date(P),
j(P.getDate())):Q.value="":(a=wa(L,P),a!==Q.value&&(Q.value=a))}}));x(document,"click",function(a){if(s){for(a=B(a);a;){if(a===m||a===Q||a===H)return;for(var d=0,b=J.length;d<b;++d)if(a===J[d])return;a=a.parentNode}h()}});x(document,"keydown",function(a){if(s)if(a.keyCode===Bb||a.keyCode===Mc)h();else if(N){var d={};d[Od]=-1;d[Pd]=-7;d[Qd]=1;d[Rd]=7;a=d[a.keyCode]||0;0!==a&&(d=P?new Date(P):new Date(pd),d.setDate(d.getDate()+a),i(d)&&(P=new Date(d),X=new Date(P),n(X),"object"===typeof Q&&"INPUT"===
Q.nodeName&&(Q.value=wa(L,P)),F(P)))}});"object"===typeof a&&a.appendChild(m);S&&7>=S&&"object"===typeof a&&Wd(a,{position:"relative",zIndex:1});return{show:b,hide:h,setSelectedDate:function(a){"object"===typeof a&&"function"===typeof a.getMonth&&(P=new Date(a),X=new Date(a),n(a));return this},getSelectedDate:function(){return P}}}function V(){}function s(a){var d=ua(),a=sa({flow_control:a,token:Y,capture_transactionId:d});Wa("/widget/control.jsonp",a);Xa(d)}function tb(a){var d=document.getElementById("captureIFrame_"+
a);"yes"!==d.getAttribute("data-captureiframeloadeventbound")&&(d.setAttribute("data-captureiframeloadeventbound","yes"),x(document.getElementById("captureIFrame_"+a),"load",fa))}function Ua(a,d,h){if(!q(a)&&!d)return!1;q(a)||(a=[]);var b=a.length,c,e=new fb,f="",p=[],r=document.getElementById(h+d);if(!r)return!1;for(d=0;d<b;d++)if(c=n.fields[a[d]])c.fieldPrefix=h,c.name=c.elementName=a[d],f+=e.renderField(c),p.push(c.name);if(!f.length&&r)return r.innerHTML="",!1;r.innerHTML=f;d=0;for(b=p.length;d<
b;d++)(a=document.getElementById(h+p[d]))&&x(a,"blur",mc)}function C(){for(var a=D.div.getElementsByTagName("select"),d=a.length,h=0;h<d;h++)a[h].getElementsByTagName("option")[a[h].selectedIndex].disabled&&(k(a[h]).append("capture_disabled"),x(a[h],"change",function(){k(this).remove("capture_disabled")}))}function nb(){x(document.body,"click",function(a){var d=janrain.settings.capture.logoutLinksClass||"capture_end_session",h=Mb(B(a),"A");h&&h.nodeName&&"A"===h.nodeName&&(k(h).has(d)&&(yb(),A(a)),
d=h.getAttribute("data-capturescreen"),h=h.getAttribute("data-captureuseruuid"),d&&h?(pe(d,h),A(a)):d&&!h&&(hb=!0,janrain.capture.ui.renderScreen(d),A(a)))})}function ab(){janrain.events.onProviderLoginToken.addHandler(function(a){if(a.janrainWidgetParameters&&a.janrainWidgetParameters.widget_type&&"share"===a.janrainWidgetParameters.widget_type)return!1;if(a.linkAccounts)rb($({provider:a.janrainWidgetParameters.provider},a));else{janrain.engage&&janrain.engage.signin&&janrain.engage.signin.setNoReturnExperience(janrain.settings.noReturnExperience,
!0);wc&&(zb=va);va=a.token;D.values=qd(D.div.id);vb.push(D);var d=a.keepMeLoggedIn,a=sa({capture_screen:janrain.settings.capture.registerFlow||"socialRegister",capture_transactionId:ua()});va&&(a.token=va);zb&&(a.merge_token=zb,zb=null);d&&"true"===d&&(a.capture_keep_me_logged_in="yes");janrain.settings.capture.thinRegistration&&(a.thin_registration=!0);if(janrain.settings.capture.dataDefaults&&"object"===typeof janrain.settings.capture.dataDefaults){var d=janrain.settings.capture.dataDefaults,h;
for(h in d)d.hasOwnProperty(h)&&"undefined"===typeof a[h]&&(a[h]=d[h])}h=a.capture_transactionId;Wa("/widget/token_url.jsonp",a);Xa(h);wc&&(wc=!1)}});md=!0}function rb(a){j.domHelpers.createFormAndPost({elementAction:janrain.settings.capture.captureServer+"/widget/profile.jsonp",elementId:"linkAccount_form",captureScreen:a.currentScreen,needsResponse:!0,callback:function(){a.callback&&a.callback();janrain.events.onCaptureProfileLink.fire({provider:a.provider,authProfile:qe})},fields:[{elementName:"engage_add_account",
elementType:"hidden",elementValue:"true"},{elementName:"token",elementType:"hidden",elementValue:a.token}]})}function fa(a){var a=B(a),d=a.getAttribute("data-transactionId"),h=J.parse(a.getAttribute("next"));if("formClicked"===a.className){if(janrain.settings.capture.transactionTimeout&&l(rd,d))return!1;bb(d,h)}}function bb(a,d){Wa("/widget/get_result.jsonp",{transactionId:a,cache:(new Date).getTime()},function(){function h(){b++;if(10<b)return M("could not find transaction status"),!1;if(xc[a])sd(a),
clearTimeout(c),c=xc[a],"success"===c.status?d&&$a(d):M("there was a problem with the response",c);else var c=setTimeout(h,50)}var b=0;h()})}function xa(a,d){for(var h=B(a).getAttribute("id").split("_")[3],b=B(a),c=g(b),b=b.parentNode,e=k(b).has("capture_tab_toggle"),f=e?"capture_tab_toggle":"capture_radio_toggle",p=0;p<d.collection.length;p++)d.collection[p].elementName!==h&&(document.getElementById(c+d.collection[p].elementName).style.display="none");for(var f=U(f,document.getElementById(c+d.elementName)),
r=f.length,p=0;p<r;p++)k(f[p]).remove("capture_toggled");k(b).append("capture_toggled");document.getElementById(c+h).style.display="block";janrain.events.onCaptureContentChange.fire();e&&A(a)}function Ea(a,d,h,b){h=b?J.stringify(b):h;Xa(d);a.className="formClicked";a.setAttribute("next",h);janrain.settings.capture.transactionTimeout&&setTimeout(function(){-1===yc.indexOf(d)&&(-1===rd.indexOf(d)&&rd.push(d),janrain.events.onCaptureTransactionTimeout.fire({transactionId:d}))},janrain.settings.capture.transactionTimeout)}
function eb(){var a,d,h,b,c,e,f=!1;return{setIframe:function(d){a=d;return this},setTransactionId:function(a){d=a;return this},setNext:function(a){h=a;b=J.parse(h);return this},setForm:function(a){c=a;return this},setEvent:function(a){e=a;return this},dontSubmit:function(){return b?b.dontSubmit:!1},process:function(){a:if(b.conditional){for(var p=b.conditional,r=p.length,j=0;j<r;j++){var k;b:{k=p[j];var i=n.fields[k.field],i=g(c)+(i.elementId||i.elementName),i=document.getElementById(i);switch(k.compare){case "=":if(i.value===
k.value){k=!0;break b}}k=void 0}if(k){f=p[j];break}}f?f.nosubmit?(A(e),$a(f.next)):Ea(a,d,h,f.next):Ea(a,d,h)}else if(b.dontSubmit){A(e);if(b.storeValues){p=U("capture_focused");ce(p);if(!ba(c))break a;p=E(c.id);if(0<p.notUnique||0<p.pending||0<p.invalid)break a;qd(c.id,!0)}$a(b)}else Ea(a,d,h)}}}function db(a){var d=B(a),h=d&&d.id?d.id:"",b=B(a).getAttribute("data-transactionId"),c=document.getElementById("captureIFrame_"+b),e=U("capture_focused"),f=!1;d.getAttribute("next")||d.setAttribute("next",
'{"noop":""}');var p=d.getAttribute("next"),r=new eb;r.setNext(p);r.dontSubmit()&&(f=!0);if(0<e.length&&S&&f&&td){var j={},k;for(k in a)j[k]=a[k];setTimeout(function(){de(d);db(j)},0)}else{td=!0;if(!f&&("true"!==d.getAttribute("data-capturedomelement")||"true"===d.getAttribute("data-capturedomelementvalidate"))){Pa||ob(d);D.values=qd(D.div.id);if(ba(d)){ce(e);var g=!1,i=function(){var b=E(h);n++;400<n&&(clearTimeout(validationTimeout),A(a));0<b.invalid?(A(a),Pa||pb(d)):0===b.pending?("function"===
typeof validationTimeout&&clearTimeout(validationTimeout),g&&d.submit()):(A(a),g=!0,validationTimeout=setTimeout(i,50))},n=0;i()}else return Pa||pb(d),A(a),!1;g||(e=Je(d),p=Zc(),e.parentNode.insertBefore(p,e),e.style.display="none")}f&&A(a);r.setIframe(c).setTransactionId(b).setForm(d).setEvent(a).process()}}function ob(a){for(var a=qa(a),d=0,h=a.length;d<h;d++)ud.clearPlaceHolder(a[d])}function qa(a){for(var d=[],h=pa(a.getElementsByTagName("input")),h=h.concat(pa(a.getElementsByTagName("textarea"))),
a=0,b=h.length;a<b;a++)h[a].getAttribute("placeholder")&&h[a].getAttribute("placeholder").length&&d.push(h[a]);return d}function pb(a){for(var a=qa(a),d=0,h=a.length;d<h;d++)ud.restorePlaceHolder(a[d])}function mc(a){td=!1;a=Aa(a);Za(a,!1)}function Za(a,d,h){if(a.type&&("hidden"===a.type||"submit"===a.type||"file"===a.type)||!a.getAttribute("data-capturefield"))return!0;var b=a.getAttribute("data-capturerendererfield")?n.fields[a.getAttribute("data-capturerendererfield")]:n.fields[a.getAttribute("data-capturefield")],
c=a.getAttribute("data-capturerendererchildfieldname"),e=c?b.elementName+"["+c+"]":b.elementName,f=g(a),p,r;p=!1;if(b.validation)p=(p=b.validation[c])&&p.required?p.required:!1,r=b.validation.required||p;else return!0;p=a.id||a.name;if(!a.value&&!r)return delete N[p],!0;if(N[p]&&N[p].status&&"pending"===N[p].status||b.validation.type&&"server"===b.validation.type||c&&!b.validation[c]&&"dateselect"!==b.type)return!0;N[p]=N[p]||{};N[p].element=a;N[p].formId=a.form&&a.form.id?a.form.id:"";N[p].status=
"pending";N[p].postValidationActions=b.validation.actions||null;c="multiCheckbox"===b.element||"multiRadio"===b.element?document.getElementById(f+"form_collection_"+b.elementName):"dateselect"===b.type?document.getElementById(f+"form_item_"+b.name):document.getElementById(f+"form_item_"+e);h||k(c).append("capture_validating");e=new j.validation;e.setParentDiv(c);e.setElement(a);a=Qb.check(a,b,d);a.validation&&(e.setValidation(a.validation),N[p].validation=a.validation);a.valid?(p=!0,h||(e.valid(b.validation.hideValidated),
k(c).remove("capture_validating"))):a.pending?(h||e.pending(),p=!0):(p=!1,h||(e.notValid(a.reason,a.type),k(c).remove("capture_validating")));return p}function $a(a){vb.push(D);if(a.noop)return!1;a.url&&(window.location.href=a.url);a.screen&&(new fb).setScreenData(a.screen,n.screens[a.screen]);if(a.action&&D)janrain.capture.ui[a.action]();if(a["function"]&&"function"===typeof vd[a["function"]])vd[a["function"]]()}function Ma(){if(0===wd)return!1;var a=(new Date).getTime()-wd,a=Math.floor(a/1E3);if(60>
a)return a+" seconds ago";a=Math.floor(a/60);if(1==a)return a+" minute ago";if(59>a)return a+" minutes ago"}function Db(a){ib=!0;a=document.getElementById(a);x(a,"submit",function(){re=(new Date).getTime()});clearInterval(se);se=setInterval(function(){if(!ib)return!1;janrain.events.onCaptureAutoSaveUpdate.fire({durationSinceLastUpdate:Ma()})},gd)}function Eb(a){if(a){var d=document.getElementById(a.get("id")),h=a.attributes;if(d&&("value"in h&&la(h,"value")&&re<a.time&&("radio"===d.type||"checkbox"===
d.type?(a=Mb(d,"form").id,a=document.forms[a][d.name],a.length&&(a=Yd(a,{value:h.value})[0]),a.checked=h.checked):d.value!==h.value&&(d.value=h.value)),h.valid&&(a=kc(d,"capture_form_item"))&&k(a).append("capture_validated"),h.focused)){var b=function(){if(this.setSelectionRange){var a=this.value.length+1;this.setSelectionRange(a,a)}else this.value=this.value;setTimeout(function(){Gb(d,"focus",b)},10)};x(d,"focus",b);d.focus()}}}function Ca(a){a=B(a);""!==a.name&&ra(a)}function ra(a){setTimeout(function(){var d=
{id:a.id,name:a.name,value:a.value};if("radio"===a.type||"checkbox"==a.type)d.checked=a.checked;Va.update(d);janrain.settings.capture.autoSave&&Ka(a)},0)}function Ka(a){clearTimeout(Rb);return Rb=setTimeout(function(){if(Xd(document.body,a)){var d=Mb(a,"form").id,d=document.getElementById(d);if(ib&&ba(d,!0)){Pa||ob(d);d.submit();d.getAttribute("next");var h=d.getAttribute("data-transactionId"),b=document.getElementById("captureIFrame_"+h);(new eb).setIframe(b).setTransactionId(h).setNext('{"noop": ""}').setForm(d).setEvent(null).process()}}},
hd)}function qb(a){a=B(a);a.tagName.match(/select/i)&&clearTimeout(Rb);Va.update({id:a.id,focused:!0})}function sb(a){var d=B(a).id;setTimeout(function(){var a=Va.get(d);a&&a.get("focused")&&a.set("focused",!1)},0)}function sa(a,d){var h=$({js_version:Ob,capture_screen:O,flow:n.flow,client_id:janrain.settings.capture.clientId,redirect_uri:janrain.settings.capture.redirectUri,response_type:janrain.settings.capture.responseType,flow_version:zc,locale:xb},a||{});Oa&&(h.bp_channel=Oa);Na&&(h.flow_path=
Na);if(q(d))for(var b=0,c=d.length;b<c;b++)h.hasOwnProperty(d[b])&&delete h[d[b]];return h}function cb(a){(new z).setExpiration(1826).setUseLocalStorage(!0).setName("janrainLastAuthMethod").setValue(a).create()}function ub(){(new z).setUseLocalStorage(!0).setName("janrainFailedLogins").setValue(wb).create()}function ec(){var a=new z;a.setUseLocalStorage(!0);janrain.settings.multiDomainLocalStorage?a.getCookie("janrainFailedLogins",function(a){ka(a)&&(wb=parseInt(a,10))}):(a=a.getCookie("janrainFailedLogins"),
ka(a)&&(wb=parseInt(a,10)))}function Cb(){var a=36E5*te+(new Date).getTime();return(new Date((new Date).setTime(a))).toUTCString()}function Wc(){clearTimeout(xd);xd=setTimeout(Vc,1E4)}function Fb(){if(janrain.settings.capture.federate&&"token"===janrain.settings.capture.responseType&&!("undefined"===typeof JANRAIN||"undefined"===typeof JANRAIN.SSO)){var a,d;cookie=new z;cookie.setUseLocalStorage(!0);if(janrain.settings.multiDomainLocalStorage)cookie.getCookie("janrainCaptureTokenRefresh",function(h){h&&
(d=new Date,a=new Date(h),d.getTime()>a.getTime()?JANRAIN.SSO.CAPTURE.refresh_token("janrain.capture.ui.federateRefreshToken"):Wc())},!1);else{var h=cookie.getCookie("janrainCaptureTokenRefresh",null,!1);h&&(d=new Date,a=new Date(h),d.getTime()>a.getTime()?JANRAIN.SSO.CAPTURE.refresh_token("janrain.capture.ui.federateRefreshToken"):Wc())}}}function Vc(){if(janrain.settings.capture.federate&&"token"===janrain.settings.capture.responseType&&!("undefined"===typeof JANRAIN||"undefined"===typeof JANRAIN.SSO)){var a=
new z;a.setUseLocalStorage(!0);janrain.settings.multiDomainLocalStorage?a.getCookie("janrainCaptureToken",function(a){a?Fb():JANRAIN.SSO.CAPTURE.refresh_token("janrain.capture.ui.federateRefreshToken")}):a.getCookie("janrainCaptureToken")?Fb():JANRAIN.SSO.CAPTURE.refresh_token("janrain.capture.ui.federateRefreshToken")}}function gc(a){var d=new z;d.setUseLocalStorage(!0).setName("janrainCaptureTemporaryToken").setValue(a);janrain.settings.capture.cookieDomain&&d.setDomain(janrain.settings.capture.cookieDomain);
d.create()}function Ib(){var a=new z;a.setUseLocalStorage(!0).setName("janrainCaptureTemporaryToken");janrain.settings.capture.cookieDomain&&a.setDomain(janrain.settings.capture.cookieDomain);a.remove()}function jc(){var a=new z;a.setUseLocalStorage(!0);janrain.settings.multiDomainLocalStorage?a.getCookie("janrainCaptureTemporaryToken",function(a){a&&(La(a),Ib())}):a.getCookie("janrainCaptureTemporaryToken")&&(La(a.getCookie("janrainCaptureTemporaryToken")),Ib())}function La(a,d,h){var b=Cb();Y=a;
d?(janrain.settings.capture.federate&&"token"===janrain.settings.capture.responseType&&Vc(),janrain.events.onCaptureSessionCreated.fire({accessToken:a}),janrain.events.onCaptureSessionFound.fire({accessToken:a})):(d=new z,d.setExpirationDirectly(b).setUseLocalStorage(!0).setName("janrainCaptureToken").setValue(Y),janrain.settings.capture.cookieDomain&&d.setDomain(janrain.settings.capture.cookieDomain),d.create(),janrain.settings.capture.federate&&"token"===janrain.settings.capture.responseType&&(b=
new z,d=36E5*te-6E5+(new Date).getTime(),d=(new Date((new Date).setTime(d))).toUTCString(),b.setUseLocalStorage(!0).setName("janrainCaptureTokenRefresh").setValue(d),janrain.settings.capture.cookieDomain&&b.setDomain(janrain.settings.capture.cookieDomain),b.create(),Vc()),yd&&(janrain.events.onCaptureLoginSuccess.fire({accessToken:a}),yd=!1),h?janrain.events.onCaptureFederateRefreshedToken.fire({accessToken:a}):janrain.events.onCaptureSessionCreated.fire({accessToken:a}))}function yb(a){var d=new z,
h=ua(),b="function"===typeof janrain.settings.capture.federateLogoutCallback?janrain.settings.capture.federateLogoutCallback:function(){},c=function(){janrain.capture.ui.federateLogoutCallbackFired(h,b)};d.setUseLocalStorage(!0).setName("janrainCaptureToken");janrain.settings.capture.cookieDomain&&d.setDomain(janrain.settings.capture.cookieDomain);d.remove();a||(Y="");janrain.settings.capture.keepProfileCookieAfterLogout||(d.setName("janrainCaptureProfileData"),janrain.settings.capture.cookieDomain&&
d.setDomain(janrain.settings.capture.cookieDomain),d.remove());janrain.settings.capture.backplane&&"function"===typeof Backplane&&Backplane.resetCookieChannel();n&&ue(n,!0);if(janrain.settings.capture.federate){clearTimeout(xd);JANRAIN.SSO.logout({sso_server:janrain.settings.capture.federateServer,logout_uri:janrain.settings.capture.federateLogoutUri},c);var e=0,f=function(){e++;if(20<e)return M("federatecallback not successful"),Ac.push(h),b(),janrain.settings.capture.federate=!1;if(l(Ac,h))return clearTimeout(a),
!1;var a=setTimeout(f,500)};f()}else sc&&b();janrain.events.onCaptureSessionEnded.fire()}function Bc(){var a=new z;a.setUseLocalStorage(!0);if(janrain.settings.multiDomainLocalStorage)a.getCookie("janrainCaptureToken",function(a){a?La(a,!0):janrain.events.onCaptureSessionNotFound.fire();Qa=!0});else{if(a.getCookie("janrainCaptureToken"))return La(a.getCookie("janrainCaptureToken"),!0),!0;janrain.events.onCaptureSessionNotFound.fire();return!1}}function Nb(a){var d=xc[a];if(a=d.fireEvent)q(a)||(a=
[a]),T(a,function(a,b){janrain.events[b]&&("onCaptureLoginSuccess"===b&&Cc||janrain.events[b].fire(d))})}function Dc(a,d){function b(){v++;if(10<v)return M("set login not successful"),ya[d].eventFiredDueToSlowResponse=!0,Nb(d),janrain.settings.capture.federate=!1,sc=!0,!1;if(ya[d]&&ya[d].setLoginSuccess)return clearTimeout(a),!1;var a=setTimeout(b,500)}JANRAIN.SSO.CAPTURE.set_login({code:a,transaction_id:d,login_callback:"federateSetLoginSuccess",nologin_callback:"federateNoLogin"});var v=0;b()}function nc(a){function d(){c++;
if(10<c)return M("check login not successful"),janrain.settings.capture.federate=!1,sc=!0,Bc(),Qa=!0,!1;if(-1<yc.indexOf(b))return clearTimeout(a),!1;var a=setTimeout(d,500)}a||(a={});var b=ua(),v={sso_server:janrain.settings.capture.federateServer,client_id:janrain.settings.capture.clientId,response_method:a.response_method||"jsonp",response_type:janrain.settings.capture.responseType,redirect_uri:janrain.settings.capture.redirectUri,widget_parameters:J.stringify(sa({capture_transactionId:b},["client_id"])),
transaction_id:b,logout_uri:janrain.settings.capture.federateLogoutUri,nologin_callback:"federateNoLogin",xd_receiver:janrain.settings.capture.federateXdReceiver,refresh:!1};Oa&&(v.bp_channel=Oa);a=new z;a.setUseLocalStorage(!0);"token"===janrain.settings.capture.responseType&&(janrain.settings.multiDomainLocalStorage?a.getCookie("janrainCaptureTokenRefresh",function(a){a?(currentTime=new Date,expireTime=new Date(a),currentTime.getTime()>expireTime.getTime()?janrain.settings.capture.federateNoRefresh||
(v.refresh=!0):v.refresh=!1):v.refresh=!0},!1):(a=a.getCookie("janrainCaptureTokenRefresh",null,!1))?(currentTime=new Date,expireTime=new Date(a),currentTime.getTime()>expireTime.getTime()?janrain.settings.capture.federateNoRefresh||(v.refresh=!0):v.refresh=!1):v.refresh=!0);JANRAIN.SSO.CAPTURE.check_login(v);Xa(b);var c=0;d()}function oc(){if(janrain.settings.capture.redirectFlow&&"transactionId"in jb)location.hash=location.hash.replace(RegExp("[&,]*transactionId="+jb.transactionId),""),Bc(),Qa=
!0,bb(jb.transactionId);else if(ea.capture_complete_social_registration)Qa=!0,La(ea.capture_complete_social_registration);else if(janrain.settings.capture.federate)nc();else{var a;jb.access_token?(yd=!0,La(jb.access_token),a=!0):a=!1;if(a||Bc())return Qa=!0,!1;janrain.settings.multiDomainLocalStorage||(Qa=!0)}}function pc(a,d){var b=a["if"].compare;if(!b||0>b.indexOf(":"))return!1;switch(b.split(":")[0]){case "cookie":var v=b.split(":")[1],b=new z;b.setUseLocalStorage(!0);"janrainLastAuthMethod"===
v&&!Sb&&(Sb=O);if(janrain.settings.multiDomainLocalStorage)b.getCookie(v,function(b){c&&"janrainLastAuthMethod"===v&&(Ec=!0);Fc(zd(a["if"],b)?a.then:a["else"],d)});else{var c=b.getCookie(v);c&&"janrainLastAuthMethod"===v&&(Ec=!0);Fc(zd(a["if"],c)?a.then:a["else"],d)}break;case "session":b=b.split(":")[1],"boolean"===typeof a["if"].to&&(a["if"].to+=""),"exists"===b&&Fc(zd(a["if"],!!Y+"")?a.then:a["else"],d)}}function zd(a,d){var b=ka(d)?parseInt(d,10):d,v,c=ka(a.to)?parseInt(a.to,10):a.to;switch(a.withOperator){case "===":v=
c===b;break;case "!==":v=c!==b;break;case "==":v=c==b;break;case "!=":v=c!==b;break;case ">":v=b>c;break;case "<":v=b<c}return v}function Fc(a,d){!a&&"function"===typeof d&&d();if(!a)return!1;if("undefined"===typeof a["if"]){if(a.render){var b=a.render.screen,v=n.screens[b];(new fb).setScreenData(b,v)}}else pc(a,d)}function Pb(a){if(!a)return!1;"undefined"!==typeof janrain.settings.capture.hideSavedProfileMessageDelay&&setTimeout(function(){a&&(a.style.display="none")},janrain.settings.capture.hideSavedProfileMessageDelay)}
function me(){for(var a="",d=[],b=0;10>b;b++)a=oa(40),d.push(a);return d}function nd(a){if(!q(a))return!1;for(var d=a.length,b=0;b<d;b++){var v=a[b];-1===Gc.indexOf(v)&&Gc.push(v)}}function ua(){var a=Gc.pop();0===Gc.length&&nd(me());-1===Hc.indexOf(a)&&Hc.push(a);return a}function Xa(a){var d=Hc.indexOf(a);-1<d&&Hc.splice(d,1);-1===Ic.indexOf(a)&&Ic.push(a)}function sd(a){var d=Ic.indexOf(a);-1<d&&Ic.splice(d,1);-1===yc.indexOf(a)&&yc.push(a)}function Nc(a){if(a.status){xc[a.transactionId]=a;"success"===
a.status?(janrain.events.onCaptureSaveSuccess.fire(a),kb&&!Ad?kb="":Ad=!1):janrain.events.onCaptureSaveFailed.fire(a);if("reactivateAccount"===a.action&&a.statusMessage&&("accountReactivated"===a.statusMessage||"invalidReactivationCode"===a.statusMessage))"success"===a.status?janrain.events.onCaptureAccountReactivateSuccess.fire(a):janrain.events.onCaptureAccountReactivateFailed.fire(a);"deactivateAccount"===a.action&&a.statusMessage&&("success"===a.status&&"accountDeactivated"===a.statusMessage?
janrain.events.onCaptureAccountDeactivateSuccess.fire(a):janrain.events.onCaptureAccountDeactivateFailed.fire(a));if("emailCode"===a.action&&a.statusMessage&&("verified"===a.statusMessage||"invalidVerificationCode"===a.statusMessage))if("success"===a.status){if((!janrain.settings.capture.federate||!a.sso||!a.ssoCode)&&janrain.events.onCaptureEmailVerificationSuccess.fire(a),(a.accessToken||a.authorizationCode)&&janrain.settings.capture.federate&&a.sso&&a.ssoCode)a.fireEvent="onCaptureEmailVerificationSuccess",
ya[a.transactionId]=a,Dc(a.ssoCode,a.transactionId)}else janrain.events.onCaptureEmailVerificationFailed.fire(a);if("emailCode"===a.action&&a.statusMessage&&("forgotPasswordCodeRedeemed"===a.statusMessage||"invalidForgotPasswordCode"===a.statusMessage))if("success"===a.status){if((!janrain.settings.capture.federate||!a.sso||!a.ssoCode)&&janrain.events.onCaptureForgotPasswordCodeSuccess.fire(a),(a.accessToken||a.authorizationCode)&&janrain.settings.capture.federate&&a.sso&&a.ssoCode)a.fireEvent="onCaptureForgotPasswordCodeSuccess",
ya[a.transactionId]=a,Dc(a.ssoCode,a.transactionId)}else janrain.events.onCaptureForgotPasswordCodeFailed.fire(a);"profile"===a.action&&a.statusMessage&&"profileFound"!==a.statusMessage&&("success"===a.status?(kd=!0,wd=(new Date).getTime(),janrain.events.onCaptureProfileSaveSuccess.fire(a)):janrain.events.onCaptureProfileSaveFailed.fire(a));if("traditionalSignin"===a.action||"socialSignin"===a.action||"ssoSignin"===a.action)if(Tb=!1,"success"===a.status){if(a.authorizationCode){var d=Sc(janrain.settings.capture.redirectUri,
{code:a.authorizationCode});a.redirectUri=d}if(a.accessToken||a.authorizationCode){if(!janrain.settings.capture.federate||!a.sso||!a.ssoCode)if(Cc)Cc=!1;else if(a.oneTime){Tb=!0;var b=da(a);delete b.accessToken;janrain.events.onCapturePostLoginScreen.fire(b)}else janrain.events.onCaptureLoginSuccess.fire(a);("traditionalSignin"===a.action||"socialSignin"===a.action)&&cb(a.action);janrain.settings.capture.federate&&a.sso&&a.ssoCode&&(a.oneTime?(Tb=!0,a.fireEvent="onCapturePostLoginScreen"):(a.fireEvent=
"onCaptureLoginSuccess",ya[a.transactionId]=a,Dc(a.ssoCode,a.transactionId)));janrain.settings.capture.federate&&a.ssoImplicitLogin&&(janrain.events.onCaptureFederateLogin.fire(a),sd(a.transactionId),Qa=!0)}a.authorizationCode&&janrain.settings.capture.redirectOnLogin&&(window.location=d)}else janrain.events.onCaptureLoginFailed.fire(a);"postLoginConfirmation"===a.action&&"success"===a.status&&(a.oneTime?janrain.events.onCapturePostLoginScreen.fire(a):Ub&&!Tb?janrain.events.onCaptureRegistrationSuccess.fire(a):
!Ub&&Tb&&janrain.events.onCaptureLoginSuccess.fire(a));"postLoginConfirmation"===a.action&&"error"===a.status&&janrain.events.onCaptureLoginFailed.fire(a);if("traditionalRegister"===a.action||"socialRegister"===a.action)if(Ub=!1,"success"===a.status){if(!janrain.settings.capture.federate||!a.sso||!a.ssoCode)a.oneTime?(Ub=!0,b=da(a),delete b.accessToken,janrain.events.onCaptureRegistrationSuccessNoLogin.fire(b),janrain.events.onCapturePostLoginScreen.fire(b)):janrain.events.onCaptureRegistrationSuccess.fire(a);
Vb&&(Vb=!1);if(a.accessToken||a.authorizationCode)"socialRegister"===a.action?cb("socialSignin"):cb("traditionalSignin"),janrain.settings.capture.federate&&a.sso&&a.ssoCode&&(a.oneTime?(Ub=!0,a.fireEvent=["onCapturePostLoginScreen","onCaptureRegistrationSuccessNoLogin"]):(a.fireEvent="onCaptureRegistrationSuccess",ya[a.transactionId]=a,Dc(a.ssoCode,a.transactionId)))}else janrain.events.onCaptureRegistrationFailed.fire(a);"control"===a.action&&("success"===a.status?janrain.events.onCaptureControlSuccesss.fire(a):
janrain.events.onCaptureControlFailed.fire(a));"photoUploaded"===a.statusMessage&&janrain.events.onCapturePhotoUploadSuccess.fire();if(a.userData&&(janrain.settings.capture.setProfileCookie&&(d=a.userData,b=Cb(),(new z).setExpirationDirectly(b).setUseLocalStorage(!0).setName("janrainCaptureProfileData").setValue(J.stringify(d)).create(),janrain.events.onCaptureProfileCookieSet.fire(d)),janrain.settings.capture.returnExperienceUserData&&(d=janrain.settings.capture.returnExperienceUserData,a=a.userData,
q(d)))){for(var b=d.length,v={},c=0;c<b;++c)v[d[c]]=Ba(a,d[c]);(new z).setExpiration(1826).setUseLocalStorage(!0).setName("janrainCaptureReturnExperienceData").setValue(J.stringify(v)).create()}}}function le(){if("object"!==typeof y)return!1;ha.modalConfirmText&&y.setConfirmMessageText(ha.modalConfirmText);ha.modalConfirmLinkText&&y.setConfirmLinkText(ha.modalConfirmLinkText);ha.modalCancelLinkText&&y.setCancelLinkText(ha.modalCancelLinkText)}function Bd(a,d,b,c){Ra[a]={};Ra[a].html='<div class="'+
d+'">'+(ha[a]||b)+"</div>";Ra[a].screen=c}function Oc(a,d){var b=[];T(Ra,function(a){b.push(a)});l(b,a)&&(Ra[a].html=d)}function jd(a){n=a;n.flow=ja();"undefined"===typeof rc&&(rc=a);"object"!==typeof n.layouts&&(n.layouts={});"object"!==typeof n.layouts.captureAccessDeniedBuiltIn&&(n.layouts.captureAccessDeniedBuiltIn={});n.layouts.captureAccessDeniedBuiltIn.html=document.getElementById("captureAccessDeniedBuiltIn")?document.getElementById("captureAccessDeniedBuiltIn").innerHTML:Ra.accessDenied.html;
"object"!==typeof n.layouts.captureRetrievingUserDataBuiltIn&&(n.layouts.captureRetrievingUserDataBuiltIn={});n.layouts.captureRetrievingUserDataBuiltIn.html=document.getElementById("captureRetrievingUserDataBuiltIn")?document.getElementById("captureRetrievingUserDataBuiltIn").innerHTML:Ra.retrievingUserData.html;"object"!==typeof n.layouts.captureDialogBuiltIn&&(n.layouts.captureDialogBuiltIn={});n.layouts.captureDialogBuiltIn.html=Ra.dialog.html;n.screens.janrainDialog=Ra.dialog.screen;for(a=0;a<
Wb.length;a++)n.fields[Wb[a].field][Wb[a].attribute]=Wb[a].value}function ve(a){if(da.isCloneable(a))for(var d in a)if(la(a,d)){var b=a[d];da.isCloneable(b)&&ve(b);if(Jb(b)&&"settings"===b.valueSource&&"undefined"!==typeof b.key&&"undefined"!==typeof b["default"]){var c=Cd[b.key];"undefined"===typeof c&&(c=b["default"]);a[d]=c}}}function ue(a,d){T(a.fields,function(b,c){if((!a.form||d)&&c.doNotPrePopulate)c.value=""})}function M(){id.push(arguments);if(window.console){var a=arguments;a.callee=a.callee.caller;
a=[].slice.call(a);S?console.log(a):console.log.apply(console,a)}}function fb(){function a(a,d,b){d&&d.screenConditionals?Fc(d.screenConditionals,b):"function"===typeof b&&b()}function d(a){janrain.events.onCaptureAccessDenied.fire();lb=!0;Dd="accessDenied";f({layout:"captureAccessDeniedBuiltIn",modal:a.modal,source:"server"})}function b(a){var d,h=ua();switch(a){case "email":(a=ea&&ea.verification_code?ea.verification_code:"")?(d=sa({capture_transactionId:h,verification_code:a}),Wa("/widget/email_code.jsonp",
d),Xa(h),M("need to verify "+a)):M("no code supplied");break;case "password":(a=ea&&ea.code?ea.code:"")?(M("need to verify "+a),d=sa({capture_transactionId:h,code:a}),Wa("/widget/email_code.jsonp",d),Xa(h)):M("no code supplied");break;case "reactivate":(a=ea&&ea.reactivation_code?ea.reactivation_code:"")?(M("need to verify "+a),d=sa({capture_transactionId:h,reactivation_code:a}),Wa("/widget/reactivate_account.jsonp",d),Xa(h)):M("no code supplied")}}function v(a){a&&(we=a.validateOnRender);if(a&&"changePasswordLink"===
a.dataType&&!a.errors)return b("password"),!1;if(a&&"verifyEmail"===a.dataType&&!a.errors)return b("email"),!1;if(a&&"reactivateAccount"===a.dataType&&!a.errors)return b("reactivate"),!1;var c=a.dataType&&"public"===a.dataType;if(a&&a.hasUserData&&!n.fused||a&&a.hasUserData&&c&&!n.privacyFiltered)return c=a.dataType&&"public"===a.dataType,!Y&&!c?d(a):(lb=!0,Dd="retrievingUserData",f({layout:"captureRetrievingUserDataBuiltIn",modal:a.modal,source:"server"}),Rc(c)),p(),!1;if(!Y&&a&&a.requireAccessToken)return d(a),
p(),!1;lb=!1;f(a);p();Ec&&(Ec=!1,janrain.engage&&janrain.engage.signin&&janrain.engage.signin.setNoReturnExperienceSwitchAccountLink(!0))}function e(d,b){if(Ed)setTimeout(function(){e(d,b)},50);else{b&&b.type&&"completeSocialRegistration"===b.type&&(Cc=!0);if(Fa&&b&&(n.noModalForMobile||b.noModalForMobile))b.modal=!1;if(Fa&&b&&(n.modalForMobile||b.modalForMobile))b.modal=!0;Qa?(O=d,F="capture_"+O+"_",a(d,b,function(){v(b)})):setTimeout(function(){e(d,b)},50)}}function f(a){if(D&&D.div&&(!a.modal||
D.modal&&a.modal)&&!a.keepPreviousScreen)D.div.style.display="none";var d=a.layout,b=a.source,h=a.modal,a=!!a.modalLoadOnLoad;if("server"===b){var c=document.getElementById(d);c||(c=document.createElement("div"),c.setAttribute("id",d));try{Ab[d]?t.html=Ab[d]:(t.html=n.layouts[d].html,Ab[d]=t.html)}catch(v){throw{name:"MissingLayoutError",message:"The json containing the layout template code for '"+d+"' is missing."};}}if("client"===b)try{if(c=document.getElementById(d))Ab[d]&&!1!==janrain.settings.capture.saveLayouts?
t.html=Ab[d]:(t.html=c.innerHTML,Ab[d]=t.html);else throw t.html="",R(d);}catch(e){throw M(e.name+": "+e.message,"warn"),Error("Exiting, please see documentation for setting up layouts.");}k(c).append("janrain-capture-ui").append("capture-ui-content").append("capture_screen_container");Fa&&(k(c).append("janrain-capture-ui-mobile"),Da.onOrientationChange.addHandler(function(a){k(c).append("janrain-capture-ui-mobile-"+a.orientation).remove("janrain-capture-ui-mobile-"+{portrait:"landscape",landscape:"portrait"}[a.orientation]);
janrain.events.onCaptureContentChange.fire()}),Da.onOrientationChange.fire({orientation:Da.getOrientation()}));t.div=c;lb||t.div.setAttribute("data-capturescreenname",O);Xb=t.div;t.modalLoadOnLoad=a;t.source=b;t.modal=h;D=t;"undefined"===typeof Fd[O]&&(Fd[O]={});Fd[O].layout=t}function j(a,d){if("object"===typeof a.displayCondition&&"undefined"!==typeof a.displayConditionPassed&&!1===a.displayConditionPassed)return!1;if(a.close)return l.render.html.close(a);if("data"==a.element){if("string"===a.type)return l.render.data.stringData(a);
if("image"===a.type)return l.render.data.imageData(a);if("engageCookie"===a.type)return l.render.data.engageCookieData(a);if("localStorage"===a.type)return l.render.data.localStorageData(a)}if("multiRadio"==a.element)return l.render.html.multiRadio(a);if("multiCheckbox"==a.element)return l.render.html.multiCheckbox(a);if("textarea"==a.element)return l.render.html.textarea(a);if("select"==a.element)return l.render.html.select(a);if("input"==a.element)return l.render.html.input(a);if("form"==a.element)return l.render.html.form(a);
if("div"==a.element)return l.render.html.div(a);if("anchor"==a.element)return l.render.html.anchor(a);if("button"==a.element)return l.render.html.button(a);if("capture"==a.element){if("datePicker"==a.type)return l.render.capture.datePicker(a);if("keepMeLoggedIn"==a.type)return l.render.capture.keepMeLoggedIn(a);if("countrySelect"==a.type)return l.render.capture.countrySelect(a);if("stateSelect"==a.type)return l.render.capture.stateSelect(a);if("publicProfileLink"==a.type)return l.render.capture.publicProfileLink(a,
d);if("errorMessages"==a.type)return l.render.capture.errorMessages(a);if("savedProfileMessage"==a.type)return l.render.capture.savedProfileMessage(a);if("captcha"==a.type)return l.render.capture.captcha(a);if("linkAccounts"==a.type)return l.render.capture.linkAccounts(a);if("mergeAccounts"==a.type)return l.render.capture.mergeAccounts(a,d);if("radioCollection"==a.type)return l.render.capture.radioCollection(a);if("tabCollection"==a.type)return l.render.capture.tabCollection(a);if("photoManager"==
a.type)return l.render.capture.photoManager(a,d);if("dateselect_public"==a.type)return l.render.capture.dateselect_public(a);if("dateselect"==a.type)return l.render.capture.dateselect(a);if("addressFull"==a.type)return l.render.capture.addressFull(a);if("addressFull_public"==a.type)return l.render.capture.addressFull_public(a);if("multipurposeAuth"==a.type)return l.render.capture.multipurposeAuth(a);if("nameFull"==a.type)return l.render.capture.nameFull(a);if("nameFull_public"==a.type)return l.render.capture.nameFull_public(a);
if("backButton"==a.type)return l.render.capture.backButton(a);if("partial"==a.type)return l.render.capture.partial(a,d);if("slider"==a.type)return l.render.capture.slider(a,d);if("table"==a.type)return l.render.capture.table(a,d);if("pluralIterator"==a.type)return l.render.capture.pluralIterator(a);if("datetime_public"==a.type)return l.render.capture.datetime_public(a);if("newsletterSubscriptions"==a.type)return l.render.capture.newsletterSubscriptions(a)}if("widget"==a.element)return l.render.widget[a.type](a,
d);var b="Invalid JTL tag '"+a.name+"' with element '"+a.element+"'";a.type&&(b+=" and type '"+a.type+"'");G.forceError(b);return!1}function p(){Ed=!0;janrain.events.onCaptureRenderStart.fire(n);Z=[];n.fields.submitButton||(n.fields.submitButton={element:"input",type:"submit",label:"",classes:["form_item"],name:"capture_submit",elementName:"capture_submit",value:"Submit"});n.fields.loginWidget||(n.fields.loginWidget={element:"widget",type:"login"});n.fields.shareWidget||(n.fields.shareWidget={element:"widget",
type:"share"});n.fields.backButton||(n.fields.backButton={element:"capture",type:"backButton",name:"capture_back",value:""});n.fields.captcha||(n.fields.captcha={element:"capture",type:"captcha"});n.fields.keepMeLoggedIn||(n.fields.keepMeLoggedIn={element:"capture",type:"keepMeLoggedIn"});n.fields.errorMessages||(n.fields.errorMessages={element:"capture",type:"errorMessages"});n.fields.savedProfileMessage||(n.fields.savedProfileMessage={element:"capture",type:"savedProfileMessage"});t.originalHtml=
t.html;t.flow=n;t.html=r(t.html);t.div.innerHTML=t.html;if("server"==t.source){if(!document.getElementById("janrainCaptureWidget")){var a=document.createElement("div");a.id="janrainCaptureWidget";document.body.appendChild(a)}document.getElementById("janrainCaptureWidget").appendChild(t.div)}if(!lb){for(var a=0,d=Jc.length;a<d;a++)Za(document.getElementById(Jc[a]),!1);Jc=[]}i();g();if(0<janrain.events.onCssLoad.firedEvents.length)for(var a=janrain.events.onCssLoad.firedEvents,d=0,b=a.length;d<b;d++)"object"==
typeof a&&a[d].args&&a[d].args.source&&-1==Kc.indexOf(a[d].args.source)&&a[d].event.fire(a[d].args);for(a=0;a<Z.length;a++)d=document.getElementById(F+Z[a].elementName),Z[a].next&&Z[a].next.type&&"server"===Z[a].next.type?d.setAttribute("next",'{"noop":""}'):Z[a].next?(Z[a].next.conditional&&d.setAttribute("next",J.stringify(Z[a].next)),Z[a].next.screen&&d.setAttribute("next",J.stringify(Z[a].next)),Z[a].next.url&&d.setAttribute("next",J.stringify(Z[a].next)),Z[a].next.action&&d.setAttribute("next",
J.stringify(Z[a].next))):d.setAttribute("next",'{"noop":""}');o();D=t;janrain.events.onCaptureContentChange.fire()}function r(a){for(var d=/\{\*(.*?)\*\}/,b=/^\s*\/\s*/,h=/^\s*#\s*/,c=/\{(.*?)*\}\s*/,v=!1,e,f=[],ta=[];e=d.exec(a);)try{var W=e[1].trim();if(c.test(W))var p=W.match(c),W=W.replace(p[0],"").trim(),r=p[0].match(/\{(.*?)*\}\s*/)[0];else r=null;v=!1;h.test(W)&&(W=W.replace("#","").trim(),v=!0);if(b.test(W)){var k=W.replace("/",""),g={};if("undefined"==typeof n.fields[k])return M("No field definition for"+
k,"error"),G.error("No field definition for"+k,"error"),z;g.element=n.fields[k].element;g.type=n.fields[k].type;g.close=!0}else{if("undefined"==typeof n.fields[W])return M("No field definition named "+W+" for tag "+e[0],"error"),G.error("No field definition named "+W+" for tag "+e[0],"error"),z;g=n.fields[W];g.name=W;v&&(g.start=!0);if("form"===g.element&&!g.transactionId){var i=ua();g.transactionId=i}g.elementName=g.elementName||W}var r=r||null,l=j(g,r);l||(l=" ");a=a.replace(e[0],l);(g.next||"form"===
g.element&&!g.close)&&Z.push({elementName:g.elementName,next:g.next});g.onclickHandler&&u.push({elementName:g.elementName,handler:g.onclickHandler,eventType:"click"});g.onchangeHandler&&u.push({elementName:g.elementName,handler:g.onchangeHandler,eventType:"change"});"string"===typeof g.element&&"form"===g.element&&!g.close&&(u.push({elementName:g.elementName,handler:db,eventType:"submit"}),janrain.settings.capture.autoSave&&!Fa&&u.push({elementName:g.elementName,handler:Db,eventType:"render"}));if("form"===
g.element&&("widget/traditional_register.jsonp"===g.action||"widget/social_register.jsonp"===g.action))ta.push("widget/traditional_register.jsonp"===g.action?"traditionalRegister":"socialRegister");if("form"===g.element&&"widget/traditional_signin.jsonp"===g.action||"widget"===g.element&&"login"===g.type)f.push("widget/traditional_signin.jsonp"===g.action?"traditionalSignin":"socialSignin")}catch(je){return M(je.name+": "+je.message,"error"),!1}f.length&&janrain.events.onCaptureLoginStart.fire({action:f.join(","),
screen:O});ta.length&&janrain.events.onCaptureRegistrationStart.fire({action:ta.join(","),screen:O});return a}function g(){t.div.getAttribute("data-captureventadded")||(x(t.div,"click",function(a){var d=B(a);if(d&&d.nodeName&&"A"===d.nodeName){var b=d.getAttribute("data-capturecontrol");b&&(s(b),A(a));d.getAttribute("data-cancelcapturereturnexperience")&&Sb&&(janrain.capture.ui.setNoReturnExperience(),A(a));if((d=d.getAttribute("data-modalwindow"))&&"object"===typeof y)"close"===d&&(janrain.capture.ui.modal.close(),
A(a)),"closeconfirm"===d&&(janrain.capture.ui.modal.closeConfirm(),A(a))}}),t.div.setAttribute("data-captureventadded",!0));for(var a=t.div.getElementsByTagName("img"),d=a.length,b=0;b<d;b++)x(a[b],"load",function(){janrain.events.onCaptureContentChange.fire()});a=U(janrain.settings.capture.modalOpenClass||"capture_modal_open");d=a.length;if(!xe){for(b=0;b<d;b++)x(a[b],"click",function(a){"object"===typeof y?(janrain.capture.ui.renderScreen(D.flow.defaultScreen),y.setShowContentOnLoad(!0).addContent(D.div).show(),
hb=!1,janrain.events.onCaptureScreenShow.fire({screen:O}),janrain.events.onCaptureContentChange.fire()):ye=!0;A(a)});xe=!0}}function i(){if(n.cssDependencies&&q(n.cssDependencies))for(var a=0;a<n.cssDependencies.length;a++)I(n.cssDependencies[a]);od&&qc&&!Gd?janrain.events.onCssLoad.addHandler(function(a){t=D;Kc.push(a.source);for(a=0;a<od;a++)if(-1==Kc.indexOf(vc[a]))return!1;Gd||(m(),Gd=!0)}):m();Ed=!1;a={flow:n,renderingBuiltInScreen:lb,screen:O};lb&&(a.builtInScreenRendered=Dd);janrain.events.onCaptureRenderComplete.fire(a);
n.screens&&n.screens[O]&&n.screens[O].type&&"completeSocialRegistration"===n.screens[O].type&&(gc(Y),yb(!0))}function m(){var a=!1,d=!1;if(t.modal){if("object"===typeof y){var a=!0,b=y.getContent();b&&document.body.appendChild(b);y.close(!0)}else y=new ee,le();ze||(d=!0,janrain.events.onModalClose.addHandler(function(){n&&n.mergeToken&&(n.mergeToken="")}),ze=!0);y=c(y);y.setShowContentOnLoad(!0).addContent(t.div);d&&janrain.events.onCaptureModalReady.fire();if(a||t.modalLoadOnLoad||ye||hb)y.show(),
hb=!1,janrain.events.onCaptureScreenShow.fire({screen:O})}else"object"===typeof y&&y.close(!0),hb=!1,janrain.events.onCaptureScreenShow.fire({screen:O});t.div.style.display="block";janrain.events.onCaptureContentChange.fire()}function o(a){for(var a=a||u,d=0;d<a.length;d++)if("function"===typeof a[d].handler)if("render"===a[d].eventType)a[d].handler(F+a[d].elementName);else{var b=document.getElementById(F+a[d].elementName);x(b,a[d].eventType,a[d].handler)}u=[]}var t={},l,z="Error displaying information";
l=new V;Qb=new w;return{setScreenData:e,render:p,renderField:j,attachEventHandlers:o}}function qd(a,d){for(var b=[],c=document.getElementById(a).getElementsByTagName("INPUT"),e=c.length,f=0;f<e;f++){var g={};g.id=c[f].id;g.placeholder=c[f].getAttribute("placeholder");if(Ae||d)Yb[c[f].getAttribute("data-capturefield")]=c[f].value;g.value=g.placeholder?g.placeholder===c[f].value?"":c[f].value:c[f].value;"radio"===c[f].type&&(g.type="radio",g.checked=c[f].checked);b.push(g)}return b}function Rc(a,d){var b=
"function"===typeof d?d:function(){};if(a){var c=Zb||ea.uuid||"";Zb&&(Zb="");c?(M("need to get data for "+c),j.domHelpers.createFormAndPost({elementAction:janrain.settings.capture.captureServer+"/widget/public_profile.jsonp",elementId:"getPublicUserData_form",needsResponse:!0,callback:b,fields:[{elementName:"data_fetch",elementType:"hidden",elementValue:"true"},{elementName:"uuid",elementType:"hidden",elementValue:c}]})):M("no uuid supplied")}else{if(!Y)return!1;j.domHelpers.createFormAndPost({elementAction:janrain.settings.capture.captureServer+
"/widget/profile.jsonp",elementId:"getUserData_form",needsResponse:!0,callback:b,fields:[{elementName:"data_fetch",elementType:"hidden",elementValue:"true"}]})}}function Wa(a,d,b){0!==a.indexOf("http")&&(a=janrain.settings.capture.captureServer+a);Ia(Sc(a,d),b)}function Hd(a,d){var b={},c=a&&a.userData&&a.userData.migratedUserType?a.userData.migratedUserType:null,e=d?Be:$b;va&&!d&&(b.capture_social_registration=va);Y&&d&&(b.capture_complete_social_registration=Y);Id&&(b.authProvider=Id);c&&(b.migratedUserType=
c);yb();var c=e,e=location,f=c;c.match(/^http[s]*:\/\//)||(f=e.pathname.split("/"),f.length-=1,f.push(c),f=e.protocol+"//"+e.host+f.join("/"));b=Sc(f,b);window.location=b}function Tc(a,d){var b=!1,c;if("ok"===a.stat&&(c=a.result,c.accessToken&&c.oneTime&&(kb=c.accessToken,Ad=!0),c.accessToken&&!c.oneTime&&La(c.accessToken),c&&Nc(c),Id=c&&c.authProvider?c.authProvider:null,qe=c&&c.authProfileData?c.authProfileData:{},c&&c.screen&&n.screens&&n.screens[c.screen]&&n.screens[c.screen].type&&"completeSocialRegistration"===
n.screens[c.screen].type&&jc(),"socialSignin"===c.action&&"success"===c.status&&"noUserForIdentifier"===c.statusMessage||"socialSignin"===c.action&&"success"===c.status&&janrain.settings.capture.socialRegistrationRedirectUrlCondition)){var e=janrain.settings.capture.socialRegistrationRedirectUrlCondition;if(e){var f=[];T(e,function(a,d){c[a]===d||c.userData&&c.userData[a]===d?f.push(!0):f.push(!1)})}$b&&"noUserForIdentifier"===c.statusMessage&&(b=!0,Hd(c));Be&&e&&!l(f,!1)&&(b=!0,Hd(c,!0))}"function"===
typeof d&&!b&&d(c)}function Uc(a){function d(a){return'<li><a href="#" class="capture_suggestion">'+a+"</a></li>"}var a=a.result,b=g(a.submittedScreen),c=n.fields[a.field],e=document.getElementById(b+(c.elementId||c.elementName||a.field)),f=a.alternatives,i=c.validation.messages.unique||"",p=document.getElementById(b+"form_item_"+(c.elementName||a.field)),r=new j.validation;r.setElement(e);r.setParentDiv(p);if(!1===a.unique){if(f){var f=f.map(d),l=function(a){var d=B(a);k(d).has("capture_suggestion")&&
(e.value=d.innerHTML,Gb(p,"click",l),r.valid(),A(a))};r.notValid(i+'<ul class="capture_suggestions">'+f.join("")+"</ul>",function(){x(p,"click",l)})}else r.notValid(i);r.setUnique(!1)}else r.valid(),r.setUnique(!0)}function Xc(a){var d=[];n&&n.fields&&T(n.fields,function(b,c){c&&c.type&&c.type===a&&d.push(c)});return d}function ac(a,d){if("string"!==typeof a||!janrain.settings.capture.setProfileCookie)return!1;var b=new z,c;b.setUseLocalStorage(!0);if(janrain.settings.multiDomainLocalStorage)b.getCookie("janrainCaptureProfileData",
function(b){b.length&&(c=J.parse(b),"function"===typeof d&&"object"===typeof c&&d(c[a]))});else if((b=b.getCookie("janrainCaptureProfileData"))&&b.length)if(c=J.parse(b),"object"===typeof c)return c[a]}function Yc(a,d){if("string"!==typeof a||!janrain.settings.capture.returnExperienceUserData)return!1;var b=new z,c;b.setUseLocalStorage(!0);if(janrain.settings.multiDomainLocalStorage)b.getCookie("janrainCaptureReturnExperienceData",function(b){b.length&&(c=J.parse(b),"function"===typeof d&&"object"===
typeof c&&d(c[a]))});else if((b=b.getCookie("janrainCaptureReturnExperienceData"))&&b.length)if(c=J.parse(b),"object"===typeof c)return c[a]}function Ce(a){var d=z();return l(["expected_tab","welcome_info_name","login_tab"],a)&&(a=d.getCookie(a))?unescape(a):""}function Zc(){var a=document.createElement("div");a.className="capture_btn capture_processing";a.innerHTML="Processing";return a}function pe(a,d){n&&a&&d&&n.screens&&n.screens[a]&&n.screens[a].dataType&&"public"===n.screens[a].dataType?(!n._uuid||
n._uuid&&n._uuid!==d||!n.privacyFiltered?(Zb=d,n.fused=!1):Zb="",hb=!0,janrain.capture.ui.renderScreen(a)):M("Cannot get public flow and show screen.")}var ke=function(){function a(a){this.attributes=a&&$({},a)||{};this.time=(new Date).getTime();return this}a.prototype={set:function(a,d){var b=this,h=!1,c;Jb(a)&&(c=a);"string"===typeof a?(h=this.attributes[a]!==d,this.attributes[a]=d):c&&T(c,function(a,d){h=h||b.attributes[a]!==d;b.attributes[a]=d});h&&(this.time=(new Date).getTime());return this},
get:function(a){return this.attributes[a]},destroy:function(){this.attributes={};this.time=(new Date).getTime();return this},each:function(a,d){var d=d||this,b;for(b in this.attributes)la(this.attributes,b)&&a.call(d,b,this.attributes[b]);return this}};for(var d=["focused","checked","value","name","valid"],b=0,c=d.length;b<c;b++)(function(d){var b=d.charAt(0).toUpperCase()+d.slice(1);a.prototype["set"+b]=function(a){return this.set(d,a)};a.prototype["get"+b]=function(){return this.get(d)}})(d[b]);
return a}(),u=[],Qb,Ed=!1,Na,xb=janrain.settings.capture.language||janrain.settings.language||"en-US",Z=[],O,Fd={},F,Sb,Ec=!1,we,vb=[],$c=janrain.settings.capture.maxScreenHistory||3,D={},Wb=[],rc,vd={},Ae=janrain.settings.capture.mode13||!1,$b=janrain.settings.capture.socialRegistrationRedirect,Be=janrain.settings.capture.socialRegistrationCompleteRedirect,Cc=!1,Tb=!1,Ub=!1,Vb=!1,Yb={},Va,hb=!1,ia,lb=!1,va,zb,yd=!1,Y,Qa=!1,kb,Ad=!1,kd=!1,Gd=!1,n,Cd,ha={},Xb,Oa,tc=!1,ne=!1,uc=janrain.settings.capture.backplaneVersion||
"1.2",ad="1.2"===uc+""?"backplane.js":"backplane"+uc+".js",bd=janrain.settings.capture.backplaneLibrary||"https://d134l0cdryxgwa.cloudfront.net/"+ad,cd=janrain.settings.capture.backplaneServerBaseUrl||"https://backplane1.janrainbackplane.com/v"+uc,dd=janrain.settings.capture.backplaneBlock||20,fd=janrain.settings.capture.backplaneReplayOnPageLoad||!1,Ab={},xc={},Gc=[],Hc=[],Ic=[],yc=[],rd=[],qc=!1,te=janrain.settings.capture.accessTokenLifeHours||1,Pa="placeholder"in document.createElement("input"),
md=!1,wc=!1,ld,y,ye=!1,xe=!1,ze=!1,vc=[],od=0,Jc=[],zc="HEAD",De=!1,Ra={},Dd,Lc={},Ee=!1,wb=0,mb=[],Jd=!1,sc=!1,ya={},Ac=[],xd,ea=za(window.location.href).queryKey,jb=Ie(location.hash.replace("#",""),/[&,]/),Zb,bc,Id,qe,Fe="Validating",Ha,Ge="widget/traditional_register.jsonp,widget/traditional_signin.jsonp,widget/token_url.jsonp,widget/social_register.jsonp,widget/public_profile.jsonp,widget/recover_password.jsonp,widget/email_code.jsonp,widget/reactivate_account.jsonp".split(","),Kc=[],Kd={};vb.push=
function(){Array.prototype.push.apply(this,arguments);this.length>$c&&this.shift();return this.length};"en"===xb&&(xb="en-US");$b&&ea&&ea.capture_social_registration?va=ea.capture_social_registration:jb.engageToken&&(zb=va=jb.engageToken,location.hash=location.hash.replace(RegExp("[&,]*engageToken="+va),""));va&&(Vb=!0);Lc.publicPrivateTogglers=[];w.prototype.check=function(a,d,b){if(d.validation&&!0!==d.validation.noTrim&&"string"===typeof a.value&&("text"===a.type||"email"===a.type))a.value=a.value.trim();
var d=d||n.fields[a.name],c=a.getAttribute("data-capturerendererchildfieldname"),c=c&&d.validation&&d.validation[c]?d.validation[c]:c&&"dateselect"!==d.type?!1:d.validation;if(!d.validation)return!0;d.validation.temp=c;if(!d.validation.temp)return!0;d.validation.temp.messages||(d.validation.temp.messages={});if(!this.hasValue(a,d))return{valid:!1,reason:d.validation.temp.messages.required||"Field not completed",type:"required"};if(!this.isDate(a,d))return{valid:!1,reason:d.validation.temp.messages.isDate||
"Not a valid date",type:"notDate"};if(!this.isValidMaxFileSize(a,d))return{valid:!1,reason:d.validation.temp.messages.maxFileSize||"File is too large",type:"maxFileSize"};if(!this.isValidFileType(a,d))return{valid:!1,reason:d.validation.temp.messages.validFileTypes||"File is not a valid file type",type:"fileType"};if(!this.isValidMinYears(a,d))return{valid:!1,reason:d.validation.temp.messages.minYears||"Not old enough",validation:{minYears:c.minYears},type:"minYears"};if(!this.isValidMinLength(a,
d))return{valid:!1,reason:d.validation.temp.messages.minLength||"Invalid length",type:"minLength"};if(!this.isValidMaxLength(a,d))return{valid:!1,reason:d.validation.temp.messages.maxLength||"Invalid length",type:"maxLength"};if(!this.isValidMaxNumericLength(a,d))return{valid:!1,reason:d.validation.temp.messages.maxNumericLength||"Invalid number of numeric characters",type:"maxNumericLength"};if(!this.isValidFormat(a,d))return{valid:!1,reason:d.validation.temp.messages.format||"Invalid format",type:"format"};
if(!this.isValidMatch(a,d))return{valid:!1,reason:d.validation.temp.messages.match||"Invalid match",type:"match"};c=this.custom(a,d);if(!c)return"undefined"===typeof c?{pending:!0}:{valid:!1,reason:d.validation.temp.messages.custom||"Invalid",type:"custom"};c=N&&N[a.id]&&"undefined"!==typeof N[a.id].unique&&!1===N[a.id].unique;return d.validation.temp.unique&&(!b||c)?(b=document.getElementById(g(a)+"form_item_"+a.getAttribute("name")),this.isUnique(a,b,d,function(){}),{pending:!0}):{valid:!0}};w.prototype.custom=
function(a,d){if(!d||!d.validation.temp.custom||"function"!==typeof Ld[d.validation.temp.custom])return!0;var b=new j.validation,c=document.getElementById(g(a)+"form_item_"+d.elementName);b.setParentDiv(c);b.setElement(a);return Ld[d.validation.temp.custom](a.name,a.value,b)};w.prototype.getRating=function(a){var a=a.value,d=[/[a-z]/,/[A-Z]/,/[0-9]/,/[^a-zA-Z0-9]/],b=0,c;c=Math.min(8,Math.floor(3*Math.log(a.length+1)));for(var e=0;e<d.length;e++)d[e].test(a)&&b++;return c+=Math.floor(Math.pow(2,b)/
2)};w.prototype.isValidMaxNumericLength=function(a,d){if(!d)return!0;var b=d.validation.temp.maxNumericLength;if(!b)return!0;var c=a.value.match(/(\d)/g);q(c)&&c.length>b&&d.validation.temp.actions&&d.validation.temp.actions.maxNumericLength&&mb.push(d.validation.temp.actions.maxNumericLength);return q(c)?c.length<=b:!0};w.prototype.isValidMaxLength=function(a,d){var b=a.value;if(!d)return!0;var c=d.validation.temp.maxLength;if(!c)return!0;b.length>c&&d.validation.temp.actions&&d.validation.temp.actions.maxLength&&
mb.push(d.validation.temp.actions.maxLength);return b.length<=c};w.prototype.isValidMinLength=function(a,d){var b=a.value;if(!d)return!0;var c=d.validation.temp.minLength;if(!c)return!0;b.length<c&&d.validation.temp.actions&&d.validation.temp.actions.minLength&&mb.push(d.validation.temp.actions.minLength);return b.length>=c};w.prototype.isValidMaxFileSize=function(a,d){if(!window.File||!window.FileReader||!window.FileList||!window.Blob||!d||"file"!==a.type)return!0;var b=d.validation.temp.maxFileSize;
return!b?!0:a.files[0].size<b};w.prototype.isValidFileType=function(a,d){if(!window.File||!window.FileReader||!window.FileList||!window.Blob||!d||"file"!==a.type)return!0;var b=d.validation.temp.validFileTypes;return!q(b)?!0:l(b,a.files[0].type)};w.prototype.isDate=function(a,d){if((!d||"dateselect"!==d.type)&&!d.validation.temp.isDate)return!0;var b=L(a,d);if(b)b=Zd(b);else{if(!(b=d.validation.temp.required))var c=g(a),b=document.getElementById(c+d.name+"_dateselectmonth"),b=b.options[b.selectedIndex].value,
e=document.getElementById(c+d.name+"_dateselectday"),e=e.options[e.selectedIndex].value,c=document.getElementById(c+d.name+"_dateselectyear"),c=c.options[c.selectedIndex].value,b=!(!b&&!e&&!c);b=b?!1:!0}return b};w.prototype.isValidMinYears=function(a,d){if(!d||"dateselect"!==d.type)return!0;var b=L(a,d),c=d.validation.temp.minYears;if(!Zd(b)||!c)return!0;var e=new Date,b=Math.abs(((new Date(b)).getTime()-e.getTime())/864E5),b=Math.floor(b/365.242199);b>=c||d.validation.temp.actions&&d.validation.temp.actions.minYears&&
mb.push(d.validation.temp.actions.minYears);return b>=c};w.prototype.hasValue=function(a,d){var b;if("select"===d.element)b=a.options[a.selectedIndex].value;else if("checkbox"===d.type&&!("multiCheckbox"===d.element||"multiRadio"===d.element))b=a.checked;else if("multiCheckbox"===d.element||"multiRadio"===d.element)if(b=d.elementName){b=document.getElementsByName(b);for(var c=b.length,e=[],f=0;f<c;f++)b[f].checked&&e.push(b[f]);b=e.length}else b=!1;else b=a.value;if(!d||!d.validation.temp.required)return!0;
if("dateselect"===d.type)return b=L(a,d),!b?!1:!0;b||d.validation.temp.actions&&d.validation.temp.actions.required&&mb.push(d.validation.temp.actions.required);return b};w.prototype.isUnique=function(a,d,b,c){d=a.form.getAttribute("data-capturefield");b=a.getAttribute("data-capturefield");a=sa({value:a.value,form:d,capture_screen:o(a),field:b});Y&&(a.access_token=Y);Na&&(a.flow_path=Na);Wa("/widget/unique.jsonp",a,c)};w.prototype.isBlacklisted=function(a,d,b){function c(){var d=a.value,b=response;
if(!b||0===b.length)return!0;for(var h,v=0;v<b.length;v++)if(h=RegExp("^"+b[v]+"$","i"),h.test(d))return!0;return!1}captureUIBlacklistCallback=function(a){b(c(a))};q(d)?b(c(d)):"string"===typeof d?captureUIBlacklistCallback(["chad"]):b(!0)};w.prototype.isValidFormat=function(a,d){var b={alpha:/^[a-z]+$/i,numeric:/^(\d+)$/,numericReal:/^(\d+\.?\d*|\.\d+|\-\d+\.?\d*|\-\.\d+)$/,alphaExtended:/^[a-zA-Z\-']+$/,alphaExtendedSpaces:/^[a-zA-Z\-'\s]+$/,alphaNumeric:/^[a-z0-9]+$/i,alphaNumericExtended:/^[a-z][-a-z0-9\s_.]*[a-z0-9]$/i,
email:/^.+@(?:[^.]+\.)+(?:[^.]{2,})$/,zipCode:/^\d{5}$/,"zipCode+4":/^\d{5}(\-\d{4})?$/,phone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,phoneInternational:/^(\d{1,4}[-. ]?)?\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,i18nAlphaNumeric:/^[^-\s^`~!@#$%^&*()_=+\[{\]}\|;:\u2018\u201c,<.>/?]+$/};if(!d||!d.validation.temp.format)return!0;var c=d.validation.temp.format;if("string"===typeof c&&b[c])c=b[c];else return!1;(b=c.test(a.value))||d.validation.temp.actions&&d.validation.temp.actions.format&&
mb.push(d.validation.temp.actions.format);return b};w.prototype.isValidMatch=function(a,d){if(!d)return!0;var b=d.validation.temp.match;if(!b)return!0;b=n.fields[b];b=g(a)+(b.elementId||b.elementName);b=document.getElementById(b);a.value!==b.value&&d.validation.temp.actions&&d.validation.temp.actions.match&&mb.push(d.validation.temp.actions.match);return a.value===b.value};var j={autoSelectPreferredTab:function(a,d){var b=Number(ea.capture_selected_tab);isNaN(b)||(b=a.collection[b])&&u.push({elementName:d+
"_"+b.elementName,handler:function(a){var d=document.getElementById(a);setTimeout(function(){d.click()},0)},eventType:"render"})},getValueFromObject:function(a,d,b){d=Ba(d,b);void 0!==a.trueValueReplace&&d?d=a.trueValueReplace:void 0!==a.falseValueReplace&&!d&&(d=a.falseValueReplace);!d&&!1!==d&&0!==d&&(d="");return d},setElementAttributeWithLocalStorage:function(a,d,b){var c=a.profileStoragePath.split("."),e=c.shift(),f=c.join(".");u.push({handler:function(){function c(a){var e=document.getElementById(d);
return e&&(a||!e.getAttribute("placeholder"))?(e[b]=a,!0):!1}janrain.settings.multiDomainLocalStorage?ac(e,function(d){c(j.getValueFromObject(a,d,f))}):c(j.getValueFromObject(a,ac(e),f))},eventType:"render"})},attachFieldEventHandlers:function(a){a.type||(a.type="");var d=a.elementId||a.elementName;if("text"===a.type||"password"===a.type||"email"===a.type)u.push({elementName:d,handler:j.clearPlaceHolder,eventType:"focus"}),u.push({elementName:d,handler:j.restorePlaceHolder,eventType:"blur"});u.push({elementName:d,
handler:function(a){a=B(a);g(a);(a=kc(a,"capture_form_item"))&&k(a).append("capture_focused").remove("capture_error");janrain.events.onCaptureContentChange.fire()},eventType:"focus"});u.push({elementName:d,handler:function(a){a=B(a);g(a);(a=kc(a,"capture_form_item"))&&k(a).remove("capture_focused")},eventType:"blur"});a.validation&&u.push({elementName:d,handler:mc,eventType:a.validation.eventType||"blur"});a.rendererFieldName&&a.rendererChildFieldName&&n.fields[a.rendererFieldName].validation&&n.fields[a.rendererFieldName].validation[a.rendererChildFieldName]&&
u.push({elementName:a.rendererFieldName+"_"+a.rendererChildFieldName,handler:mc,eventType:"blur"});if("password"===a.type){a.validation&&("function"===typeof a.validation.rating?u.push({elementName:d,handler:function(d){var d=Aa(d),b=Qb.getRating(d);a.validation.rating(d,b)},eventType:"keyup"}):a.validation.rating&&u.push({elementName:d,handler:function(a){a=Aa(a);a=Qb.getRating(a);M("Password Strength",a)},eventType:"keyup"}));for(var b=[],c=0,e=u.length;c<e;c++)u[c].elementName===d&&b.push(u[c]);
u.push({elementName:d,handler:function(a){return j.togglePasswordInput(a,b)},eventType:"click"});u.push({elementName:d,handler:function(a){return j.togglePasswordInput(a,b)},eventType:"focus"})}},attachModifyEventHandler:function(a){u.push({elementName:a.elementId||a.elementName,eventType:a.modify.event,handler:function(){var d=document.getElementById(a.modify.element),b=a.modify.attributes;if(b&&d)for(var c in b)b.hasOwnProperty(c)&&d.setAttribute(c,b[c])}})},wrapStringData:function(a,d,b){var c=
"",e=["capture_data_item"];b&&e.push(b);c+=j.createDiv({elementId:"stringdata_"+a.name,classes:e});a.label&&(c+=j.createLabel({elementId:a.name,label:a.label,classes:["capture_data_label"]}));c+=j.createDiv({elementId:a.name,classes:["capture_data"]});return c+d+"</div></div>"},wrapFormItemStart:function(a){var d="",b=[],c=a.classes||[],e="elementCollection"===a.type?"form_collection":"form_item";if(a.justElement||"submit"===a.type||"button"===a.type)return"";-1===c.indexOf("capture_"+e)&&c.push("capture_"+
e);a.errors&&-1===c.indexOf("capture_error")&&!a.collection&&c.push("capture_error");!a.collection&&a.type&&-1===c.indexOf("capture_"+a.type)&&("checkbox"===a.type||"radio"===a.type?b.push("capture_"+a.type):c.push("capture_"+a.type));"elementCollection"===a.type&&a.displayInline&&-1===c.indexOf("capture_form_collection_inline")&&c.push("capture_form_collection_inline");a.collection?(-1===c.indexOf("capture_"+e+"_"+a.elementName)&&c.push("capture_"+e+"_"+a.elementName),a.checked&&c.push("capture_toggled"),
d+=j.createDiv({elementName:e+"_"+a.elementId,hide:a.hide,classes:c})):d+=j.createDiv({elementName:e+"_"+a.elementName,hide:a.hide,classes:c});if(("checkbox"===a.type||"radio"===a.type)&&!a.collection)d+=j.createDiv({elementName:e+"_inner_"+a.elementName,classes:b});return d},wrapFormItemEnd:function(a){return a.justElement||"submit"===a.type||"button"===a.type?"":"</div>"},createPublicPrivateToggle:function(a){function d(){for(var a=Lc.publicPrivateTogglers,d=a.length,b=0;b<d;b++)a[b]&&(a[b].style.display=
"none");Lc.publicPrivateTogglers=[]}function b(d){var c=B(d),h=g(c),e=document.getElementById(h+"display_toggle_options_"+a.elementName),f=document.getElementById(h+"display["+(a.rendererFieldName||a.elementName)+"]"),v=document.getElementById(h+"display_indicator_public_"+a.elementName),ta=document.getElementById(h+"display_indicator_private_"+a.elementName),j=h+"display_option_public_"+a.elementName,i=h+"display_option_private_"+a.elementName;document.getElementById(h+"display_toggle_options_"+
a.elementName);if(c.parentNode&&c.parentNode.id&&(c.parentNode.id===j||c.parentNode.id===i))c=c.parentNode;if(!c.id)return!1;c.id===j?(k(document.getElementById(j)).append("capture_checked"),k(document.getElementById(i)).remove("capture_checked"),f.value="public",k(v).append("capture_toggled"),k(ta).remove("capture_toggled")):(k(document.getElementById(j)).remove("capture_checked"),k(document.getElementById(i)).append("capture_checked"),f.value="private",k(v).remove("capture_toggled"),k(ta).append("capture_toggled"));
ra(f);e.style.display="none";A(d)}var c="";a.forcePublicPrivate&&("public"===a.forcePublicPrivate.toLowerCase()?a.displayPublic=!0:"private"===a.forcePublicPrivate.toLowerCase()&&(a.displayPublic=!1));var c=c+j.createDiv({classes:["capture_display_toggle_wrap"],elementId:"display_toggle_wrap_"+a.elementName}),c=c+j.createDiv({classes:["capture_display_toggle_options"],elementId:"display_toggle_options_"+a.elementName}),e=["capture_display_option"];a.displayPublic&&e.push("capture_checked");c+=j.createDiv({classes:e,
elementId:"display_option_public_"+a.elementName});c+='<span class="janrain-icon-check janrain-icon-16"></span><span class="capture_display_label">public</span> <span class="janrain-icon-unlocked janrain-icon-16"></span></div>';e=["capture_display_option"];a.displayPublic||e.push("capture_checked");c+=j.createDiv({classes:e,elementId:"display_option_private_"+a.elementName});c+='<span class="janrain-icon-check janrain-icon-16"></span><span class="capture_display_label">private</span> <span class="janrain-icon-locked janrain-icon-16"></span></div></div>';
e=["capture_display_toggle","capture_public"];a.disablePublicPrivate&&e.push("capture_display_toggle_disabled");a.displayPublic&&e.push("capture_toggled");c+=j.createDiv({classes:e,elementId:"display_indicator_public_"+a.elementName});c+='&nbsp;<span class="capture_display_label">public</span> <span class="janrain-icon-unlocked janrain-icon-16"></span></div>';e=["capture_display_toggle","capture_private"];a.disablePublicPrivate&&e.push("capture_display_toggle_disabled");a.displayPublic||e.push("capture_toggled");
c+=j.createDiv({classes:e,elementId:"display_indicator_private_"+a.elementName});c=c+'<span class="capture_display_label">private</span> <span class="janrain-icon-locked janrain-icon-16"></span></div></div>'+j.createInput({type:"hidden",elementName:"display["+(a.rendererFieldName||a.elementName)+"]",value:a.displayPublic?"public":"private"});u.push({elementName:"display_toggle_wrap_"+a.elementName,eventType:"click",handler:function(b){var c=B(b),h=g(c),h=document.getElementById(h+"display_toggle_options_"+
a.elementName),e="none"===h.style.display||""===h.style.display?"block":"none";c.parentNode&&k(c.parentNode).has("capture_display_toggle")&&(c=c.parentNode);k(c).has("capture_display_toggle")&&!k(c).has("capture_display_toggle_disabled")&&("block"===e&&(d(),Lc.publicPrivateTogglers.push(h)),h.style.display=e);A(b)}});u.push({elementName:"display_option_public_"+a.elementName,handler:b,eventType:"click"});u.push({elementName:"display_option_private_"+a.elementName,handler:b,eventType:"click"});De||
(x(document.body,"click",function(a){a=B(a);a.parentNode&&k(a.parentNode).has("capture_display_toggle")&&(a=a.parentNode);!k(a).has("capture_display_toggle")&&!k(a).has("capture_display_option")&&d()}),De=!0);return c},createAnchor:function(a){var d="",b=a.fieldPrefix||F,c=a.elementId||a.elementName,e="object"===typeof a.elementAttributes?a.elementAttributes:{},f=a.elementClasses&&q(a.elementClasses)?a.elementClasses:[];l(f,"capture_"+c)||f.push("capture_"+c);d=d+"<a "+("id='"+b+c+"' ");a.target&&
(d+="target='"+a.target+"' ");d+="class='"+f.join(" ")+"' ";d+=lc(e)+" ";d+="data-capturefield='"+a.name+"' ";d+="href='"+a.elementHref+"' ";d+="name='"+a.elementName+"' ";d+=">";a.elementText&&(d+=a.elementText);return d+"</a>"},createTextarea:function(a){var d="",b=a.fieldPrefix||F,c=a.elementId||a.elementName,e=a.elementClasses&&q(a.elementClasses)?a.elementClasses:[],f=a.rows||"5",d=d+j.createLabel(a);l(e,"capture_"+c)||e.push("capture_"+c);l(e,"capture_textarea")||e.push("capture_textarea");
d=d+"<textarea "+("id='"+b+c+"' ")+("class='"+e.join(" ")+"' ");d+="data-capturefield='"+a.name+"' ";d=d+("rows='"+f+"' ")+("name='"+a.elementName+"' ");a.placeholder&&Pa&&(d+="placeholder='"+a.placeholder+"'");d+=">";a.value&&(d+=a.value);d+="</textarea>";a.publicPrivateToggle&&(d+=j.createPublicPrivateToggle(a));return d+=j.createTip(a)},createTip:function(a){var d;d="<div class='capture_tip' ";a.tip||(d+="style='display:none;' ");d+=">"+("undefined"!==typeof a.tip?a.tip:"")+"</div>";d=d+"<div class='capture_tip_validating'"+
(" data-elementName='"+a.elementName+"'>");d+=Fe+"</div>";d=d+"<div class='capture_tip_error'"+(" data-elementName='"+a.elementName+"'>");a.errors&&q(a.errors)&&(d+=a.errors.join(" "),janrain.events.onCaptureServerValidationFailed.fire(a));return d+"</div>"},createLabel:function(a,d){var b,c=a.fieldPrefix||F,e=a.elementId||a.elementName;if(!a.label)return d?d:"";b="<label ";"elementCollection"!==a.type&&(b+=" for='"+c+e+"'");b+=">";d&&(b+=d);a.label&&(b+=a.label);return b+"</label>"},createSelect:function(a){var d=
"",b=a.fieldPrefix||F,c=a.rendererFieldName,e=a.rendererChildFieldName,f,k=a.justElement,p=a.elementClasses&&q(a.elementClasses)?a.elementClasses:[],r=a.elementId||a.elementName;l(p,"capture_"+r)||p.push("capture_"+r);l(p,"capture_select")||p.push("capture_select");d+=j.createLabel(a);d=d+'<span class="capture_select_arrow"><select '+("id='"+b+r+"' ")+("class='"+p.join(" ")+"' ");c&&(d+="data-capturerendererfield='"+c+"' ");a.showFieldWhere&&(d+='data-showFieldWhere="'+a.showFieldWhere+'" ');e&&(d+=
"data-capturerendererchildfieldname='"+e+"' ");d+="data-capturefield='"+a.name+"' ";d+="name='"+a.elementName+"' ";d+=">";c=a.options||[];e=c.length;for(p=0;p<e;p++){var i=c[p],n=i.value||""===i.value?i.value:i.text,d=d+('<option value="'+n+'"');i.disabled&&(d+=' disabled="true"');q(i.showField)&&(d+=' data-showField="'+i.showField.join(",")+'"');n===a.value&&(d+=' selected="selected"',f=i.showField);d+=">"+i.text+"</option>"}d+="</select></span>";a.publicPrivateToggle&&(d+=j.createPublicPrivateToggle(a));
k||(d+=j.createTip(a));u.push({handler:function(){f&&Ua(f,a.showFieldWhere,b)},eventType:"render"});u.push({elementName:r,handler:function(a){var a=B(a),d=g(a),b=a.getElementsByTagName("option")[a.selectedIndex].getAttribute("data-showField"),c=a.getAttribute("data-showFieldWhere");b&&b.length&&(b=b.split(","));S&&9>S&&ra(a);Ua(b,c,d)},eventType:"change"});return d},createButton:function(a){var d="",b=a.fieldPrefix||F,c=a.elementId||a.elementName,e=a.elementClasses&&q(a.elementClasses)?a.elementClasses:
[],f=a.type?a.type:"submit";l(e,"capture_"+c)||e.push("capture_"+c);l(e,"capture_btn")||e.push("capture_btn");l(e,"capture_primary")||e.push("capture_primary");d+="<button ";a.hide&&(d+="style='display:none' ");d=d+("id='"+b+c+"' ")+("class='"+e.join(" ")+"' ");d=d+("type='"+f+"' ")+("data-capturefield='"+a.name+"' ");a.value&&(d+="value='"+a.value+"' ");d+="name='"+a.elementName+"' ";d+=">";a.elementContent&&(d+=a.elementContent);d+="</button>";a.modify&&j.attachModifyEventHandler(a);return d},createInput:function(a){var d=
"",b="",c=a.fieldPrefix||F,e=a.elementId||a.elementName,f=a.elementClasses&&q(a.elementClasses)?a.elementClasses:[],g="object"===typeof a.elementAttributes?a.elementAttributes:{},k="button"===a.type||"submit"===a.type||"checkbox"===a.type||"radio"===a.type||"hidden"===a.type,r=a.justElement||a.collection||"hidden"===a.type||"button"===a.type||"submit"===a.type,i="password"===a.type&&!Pa&&a.placeholder?"text":a.type,n=("checkbox"===a.type&&!a.collection||"radio"===a.type&&!a.collection)&&!a.justElement,
m=a.rendererFieldName,o=a.rendererChildFieldName,t=we&&!a.collection;l(f,"capture_"+e)||f.push("capture_"+e);k||(b+=j.createLabel(a));d+="<input ";a.placeholder&&(a.placeholder=a.placeholder.replace(/'/g,"&#39;"));a.hide&&(d+="style='display:none' ");d=d+("id='"+c+e+"' ")+(lc(g)+" ");"text"===a.type||"email"===a.type||"password"===a.type||"file"===a.type?l(f,"capture_text_input")||f.push("capture_text_input"):"checkbox"===a.type||"radio"===a.type?l(f,"capture_input_"+a.type)||f.push("capture_input_"+
a.type):"submit"===a.type&&(l(f,"capture_btn")||f.push("capture_btn"),l(f,"capture_primary")||f.push("capture_primary"));d+="data-capturefield='"+a.name+"' ";a.collection&&(d+="data-capturecollection='true' ");m&&(d+="data-capturerendererfield='"+m+"' ");o&&(d+="data-capturerendererchildfieldname='"+o+"' ");("checkbox"===a.type||"radio"===a.type)&&a.elementValue?d+="value='"+a.elementValue+"' ":a.value?(g=a.value,a.displaySavedValue&&Yb[a.value]&&(g=Yb[a.value],"password"===a.type&&(i="password")),
("password"===a.type||"text"===a.type||"email"===a.type)&&!a.errors&&t&&Jc.push(c+e),d+="value='"+g+"' "):a.placeholder&&!Pa?(d+="value='"+a.placeholder+"' ",l(f,"capture_input_placeholder")||f.push("capture_input_placeholder")):d+="value='' ";d=d+("type='"+i+"' ")+("class='"+f.join(" ")+"' ");a.placeholder&&(d+="placeholder='"+a.placeholder+"' ");if(a.checked||a.elementValue&&a.value===a.elementValue)d+="checked='checked' ";d+="name='"+a.elementName+"' ";d+="/>";b="checkbox"===a.type||"radio"===
a.type?b+j.createLabel(a,d):b+d;a.modify&&j.attachModifyEventHandler(a);a.publicPrivateToggle&&(b+=j.createPublicPrivateToggle(a));n&&(b+="</div>");r||(b+=j.createTip(a));a.profileStoragePath&&"undefined"===typeof a.value&&j.setElementAttributeWithLocalStorage(a,c+e,"value");return b},createDiv:function(a){var d="<div ",b=a.fieldPrefix||F,c=a.elementId||a.elementName,e="object"===typeof a.elementAttributes?a.elementAttributes:{},f=a.classes||[];l(f,"capture_"+c)||f.push("capture_"+c);d+="id='"+b+
c+"'";if("option"===a.type&&!a["default"]||a.hide)d+=" style='display:none'";"radioCollection"===a.type&&f.push("radio_set");q(f)&&f.length&&(d=d+' class="'+f.join(" ").replace(/\[/g,"_").replace(/\]/g,"_"),d+='" ');d+=lc(e)+" ";d+="data-capturefield='"+a.name+"' ";d+=">";a.elementText&&(d+=a.elementText);a.closeDiv&&(d+="</div>");return d},createImage:function(a){var d,b=a.fieldPrefix||F,c=a.classes||[],e=a.elementId||a.imageId||a.elementName||"";d="<img "+('src="'+a.src+'"');e&&!l(c,"capture_"+
e)&&c.push("capture_"+e);a.hide&&(d+=" style='display:none'");a.alt&&(d+=" alt='"+a.alt+"'");"undefined"!==typeof a.width&&(d+=" width='"+a.width+"'");"undefined"!==typeof a.height&&(d+=" height='"+a.height+"'");e&&(d+=' id="'+b+a.imageId+'" ');q(c)&&c.length&&(d=d+'class="'+c.join(" "),d+='" ');return d+"/>"},domHelpers:{createIFrame:function(a,d){var b,c="captureIFrame_"+a;if(document.getElementById(c))return!1;if(Kd[d]&&(b=document.getElementById(Kd[d])))b="div"==b.parentNode.tagName.toLowerCase()?
b.parentNode:b,Lb(b);Kd[d]=c;if(S){b="";var e=document.createElement("div");e.innerHTML=b+"<iframe "+('name="'+c+'" ')+('data-transactionId="'+a+'" ')+('id="'+c+'" ')+'src="about:blank" style="display: none;"></iframe>';document.body.appendChild(e)}else b=document.createElement("iframe"),b.setAttribute("name",c),b.setAttribute("data-transactionId",a),b.id=c,b.setAttribute("src","about:blank"),b.style.display="none",b.className="",document.body.appendChild(b)},createAnchor:function(a){var d=a.fieldPrefix||
F,b=document.createElement("a");if(!a.classes||a.classes&&!q(a.classes))a.classes=[];a.elementId&&!l(a.classes,d+a.elementId)&&a.classes.push(d+a.elementId);b.setAttribute("href",a.elementHref);b.innerHTML=a.elementText;a.elementId&&(b.id=d+a.elementId);b.className=a.classes.join(" ");a.hideElement&&(b.style.display="none");return b},createDiv:function(a){var d=a.fieldPrefix||F,b=document.createElement("div");if(!a.classes||a.classes&&!q(a.classes))a.classes=[];a.elementId&&!l(a.classes,d+a.elementId)&&
a.classes.push(d+a.elementId);a.elementId&&(b.id=d+a.elementId);b.className=a.classes.join(" ");a.hideElement&&(b.style.display="none");return b},createImage:function(a){var d=a.fieldPrefix||F,b=document.createElement("img");if(!a.classes||a.classes&&!q(a.classes))a.classes=[];a.elementId&&!l(a.classes,d+a.elementId)&&a.classes.push(d+a.elementId);a.alt&&b.setAttribute("alt",a.alt);"undefined"!==typeof a.width&&b.setAttribute("width",a.width);"undefined"!==typeof a.height&&b.setAttribute("height",
a.height);b.src=a.elementSrc;a.elementId&&(b.id=d+a.elementId);b.className=a.classes.join(" ");a.hideElement&&(b.style.display="none");return b},createInput:function(a){var d=document.createElement("input"),b=a.fieldPrefix||F,c="object"===typeof a.elementAttributes?a.elementAttributes:{},e=a.containerDivClasses||[],f;"submit"===a.elementType&&a.containerDiv&&(f=this.createDiv({elementName:a.elementName+"_containverDiv",classes:e}));if(!a.classes||a.classes&&!q(a.classes))a.classes=[];for(var g in c)c.hasOwnProperty(g)&&
d.setAttribute(g,c[g]);a.elementId&&!l(a.classes,b+a.elementId)&&a.classes.push(b+a.elementId);a.elementType&&d.setAttribute("type",a.elementType);a.name&&d.setAttribute("data-capturefield",a.name);a.elementValue&&(d.value=a.elementValue);a.elementName&&(d.name=a.elementName);a.elementId&&(d.id=b+a.elementId);a.hideElement&&(d.style.display="none");d.className=a.classes.join(" ");return f?(f.appendChild(d),f):d},createForm:function(a){a.transactionId||(a.transactionId=ua());var d=a.transactionId,
b=a.captureScreen||O,c=a.fieldPrefix?a.fieldPrefix:g(b),e=document.createElement("form"),f=q(a.fields)?a.fields:[],k=f.length;j.domHelpers.createIFrame(d,c+a.elementId);a.needsResponse&&tb(d);if(!a.classes||a.classes&&!q(a.classes))a.classes=[];a.elementId&&!l(a.classes,c+a.elementId)&&a.classes.push(c+a.elementId);e.id=c+a.elementId+"_"+d;e.className=a.classes.join(" ");e.setAttribute("target","captureIFrame_"+d);e.setAttribute("data-transactionId",d);a.name&&e.setAttribute("data-capturefield",a.name);
e.setAttribute("action",a.elementAction);e.setAttribute("method","POST");e.setAttribute("data-capturedomelement","true");a.validate&&e.setAttribute("data-capturedomelementvalidate","true");e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:"\u2713",elementName:"utf8"}));n&&n.mergeToken&&e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:n.mergeToken,elementName:"merge_token",elementId:"merge_token_"+d}));Oa&&e.appendChild(j.domHelpers.createInput({elementType:"hidden",
fieldPrefix:c,elementValue:Oa,elementName:"bp_channel",elementId:"bp_channel_"+d}));Na&&e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:Na,elementName:"flow_path",elementId:"flow_path_"+d}));if(kb)e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:kb,elementName:"access_token",elementId:"access_token_"+d}));else{var i=a.elementAction.substring(janrain.settings.capture.captureServer.length+1,a.elementAction.length);a&&a.elementAction&&
!l(Ge,i)&&Y&&e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:Y,elementName:"access_token",elementId:"access_token_"+d}))}O&&e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:b,elementName:"capture_screen",elementId:"screen_"+d}));Ob&&e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:Ob,elementName:"js_version",elementId:"js_version_"+d}));a.serverNextScreen&&e.appendChild(j.domHelpers.createInput({elementType:"hidden",
fieldPrefix:c,elementValue:a.serverNextScreen,elementName:"serverNextScreen",elementId:"serverNextScreen_"+d}));a.engageTokenRequired&&e.appendChild(j.domHelpers.createInput({elementType:"hidden",elementValue:va,fieldPrefix:c,elementName:"token",elementId:"token_"+d}));e.appendChild(j.domHelpers.createInput({elementType:"hidden",elementValue:d,fieldPrefix:c,elementName:"capture_transactionId",elementId:"transactionId_"+d}));e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,
elementValue:a.name,elementName:"form",elementId:"form_"+d}));e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:n.flow,elementName:"flow",elementId:"flow_"+d}));e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementName:"client_id",elementId:"client_id_"+d,elementValue:janrain.settings.capture.clientId}));e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementName:"redirect_uri",elementId:"redirect_uri_"+
d,elementValue:janrain.settings.capture.redirectUri}));e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:janrain.settings.capture.responseType,elementName:"response_type",elementId:"response_type_"+d}));e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:zc,elementName:"flow_version",elementId:"flow_version_"+d}));e.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:c,elementValue:xb,elementName:"locale",
elementId:"locale_"+d}));for(b=0;b<k;b++)switch(d=f[b],d.elementType){case "div":d.fieldPrefix=d.fieldPrefix||c;e.appendChild(j.domHelpers.createDiv(d));break;case "anchor":d.fieldPrefix=d.fieldPrefix||c;e.appendChild(j.domHelpers.createAnchor(d));break;case "hidden":d.fieldPrefix=d.fieldPrefix||c;e.appendChild(j.domHelpers.createInput(d));break;case "file":d.fieldPrefix=d.fieldPrefix||c;e.setAttribute("enctype","multipart/form-data");e.appendChild(j.domHelpers.createInput(d));break;case "submit":d.fieldPrefix=
d.fieldPrefix||c,e.appendChild(j.domHelpers.createInput(d))}j.domHelpers.createFormHandler(e,a);return e},createFormHandler:function(a,d){"function"===typeof d.callback&&(a.setAttribute("next",'{"function":"'+d.elementId+'"}'),vd[d.elementId]=d.callback);x(a,"submit",db)},createFormAndPost:function(a){var d=a.fieldPrefix||F,b=ua();a.fieldPrefix=a.fieldPrefix||d;a.transactionId=b;var c=j.domHelpers.createForm(a),d=j.domHelpers.createInput({elementType:"submit",elementName:"formpost_"+b,fieldPrefix:d,
elementId:"createFormAndPostSubmit_"+b,elementValue:"submit",hideElement:!0});c.appendChild(d);document.body.appendChild(c);j.domHelpers.createFormHandler(c,a);d.click()}},createListOfLinks:function(a,d){var b=a.fieldPrefix||F,c;optionsLength=a.length;c="<ul";q(d)&&d.length&&(c=c+' class="'+d.join(" "),c+='"');c+=">";for(var e=0;e<optionsLength;e++){c+="<li";"string"===typeof a[e].listItemId&&(c+=' id="'+b+a[e].listItemId+'" ');a[e].hide&&(c+=' style="display: none;" ');if(!a[e].listItemClasses||
!q(a[e].listItemClasses))a[e].listItemClasses=[];"string"===typeof a[e].listItemId&&!l(a[e].listItemClasses,"capture_"+a[e].listItemId)&&a[e].listItemClasses.push("capture_"+a[e].listItemId);q(a[e].listItemClasses)&&a[e].listItemClasses.length&&(c+=' class="',c+=a[e].listItemClasses.join(" "),c+='"');c+=">";c+='<a href="'+a[e].anchorHref+'"';"string"===typeof a[e].anchorId&&(c+=' id="'+b+a[e].anchorId+'" ');if(!a[e].anchorClasses||!q(a[e].anchorClasses))a[e].anchorClasses=[];"string"===typeof a[e].anchorId&&
!l(a[e].anchorClasses,"capture_"+a[e].anchorId)&&a[e].anchorClasses.push("capture_"+a[e].anchorId);q(a[e].anchorClasses)&&a[e].anchorClasses.length&&(c+=' class="',c+=a[e].anchorClasses.join(" "),c+='"');c+=">";c+=a[e].anchorText;c+="</a>";c+="</li>"}return c+"</ul>"},togglePasswordInput:function(a,d){var b=Aa(a),c=b.getAttribute("data-capturefield"),c=n&&n.fields&&c?n.fields[c]:"";g(b);if(c&&!c.placeholder)return!1;"text"===b.type&&b.getAttribute("value")===b.getAttribute("placeholder")&&b.setAttribute("value",
"");if(S&&"text"===b.type){var e=document.createElement("span"),f=b.parentElement;f.insertBefore(e,b);f.removeChild(b);c=document.createElement("input");c.id=b.id;c.setAttribute("data-capturefield",b.name);c.className="capture_password capture_text_input";c.name=b.name;c.setAttribute("type","password");f.insertBefore(c,e);f.removeChild(e);for(b=0;b<d.length;b++)"function"===typeof d[b].handler&&x(c,d[b].eventType,d[b].handler);c.focus()}else"password"!=b.getAttribute("type")&&b.setAttribute("type",
"password")},clearPlaceHolder:function(a){if(Pa)return!0;a="value"in a?a:Aa(a);a.value===a.getAttribute("placeholder")&&(S?a.value="":a.setAttribute("value",""),k(a).remove("capture_input_placeholder"))},restorePlaceHolder:function(a){if(Pa)return!0;var a="value"in a?a:Aa(a),b=a.getAttribute("placeholder");if(!b||"password"===a.getAttribute("type"))return!1;b&&""===a.value&&(S?a.value=b:a.setAttribute("value",b),k(a).append("capture_input_placeholder"))},validation:function(){function a(a){e=a;var c=
b.id||b.name;Va.add({id:c,valid:"valid"===a},{merge:!0});N[c].status=e}var b,c,e,f,j;return{getElement:function(){return b},getParentDiv:function(){return c},getState:function(){return e},getValidation:function(){return j},setState:function(b){a(b)},setUnique:function(a){f=a;N[b.id||b.name].unique=f},setValidation:function(a){j=a},setParentDiv:function(a){(c=a)&&c.className.split(" ")},setElement:function(a){b=a;c&&c.className.split(" ")},valid:function(e){e||k(c).append("capture_validated");k(c).remove("capture_validating").remove("capture_error");
a("valid");e={};b&&(e.field=b);janrain.events.onCaptureValidationSuccess.fire(e);janrain.events.onCaptureContentChange.fire()},pending:function(){a("pending");k(c).append("capture_validating").remove("capture_validated").remove("capture_error");janrain.events.onCaptureContentChange.fire()},notValid:function(){var e;switch(arguments.length){case 1:message=arguments[0];break;case 2:message=arguments[0];"function"===typeof arguments[1]?callback=arguments[1]:e=arguments[1];break;case 3:message=arguments[0],
e=arguments[1],callback=arguments[2]}a("invalid");if(message){if("noValidationMessage"!==message){k(c).append("capture_error").remove("capture_validated");for(var f,v=g(c),i=c.getElementsByTagName("div"),ta=i.length,l=0;l<ta;l++)if("capture_tip_error"===i[l].className){var n=0===c.id.indexOf(v+"form_collection_")?v+"form_collection_":v+"form_item_";if(c.id.split(n)[1]===i[l].getAttribute("data-elementName")||c.id.split(n)[1]+"[dateselect_year]"===i[l].getAttribute("data-elementName")){f=i[l];break}}f&&
(f.innerHTML=message)}"function"===typeof callback&&callback();janrain.events.onCaptureContentChange.fire()}f={};b&&(f.field=b);f.message=message;f.parentDiv=c;f.invalidType=e;j&&(f.validation=j);janrain.events.onCaptureValidationFailed.fire(f)}}}},ud={createSelect:j.createSelect,createTextarea:j.createTextarea,createAnchor:j.createAnchor,createInput:j.createInput,createLabel:j.createLabel,createDiv:j.createDiv,createImage:j.createImage,createListOfLinks:j.createListOfLinks,togglePassword:j.togglePasswordInput,
clearPlaceHolder:j.clearPlaceHolder,restorePlaceHolder:j.restorePlaceHolder,getElementByEventAttribute:Aa};V.prototype.render={data:{engageCookieData:function(a){return Ce(a.cookieName)},localStorageData:function(a){var b="",c=(a.fieldPrefix||F)+(a.elementId||a.elementName),e=a.classes?a.classes.join(" ").replace(/\[/g,"_").replace(/\]/g,"_"):"",f=a.valuePath,g="";if(!janrain.settings.capture.setProfileCookie)return K.log("localStorage renderer can not be used without janrain.settings.capture.setProfileCookie set to true"),
K.show(),"";janrain.settings.multiDomainLocalStorage?ac(a.data,function(b){function d(){--v;var a=b,f=document.getElementById(c);f?(aa(f,a),e=!0):e=!1;!e&&0<v&&setTimeout(d,500)}var e=!1,v=100,b=j.getValueFromObject(a,b,f);d()}):b=ac(a.data);g='<span id="'+c+'" class="'+e+'">'+j.getValueFromObject(a,b,f);return g+"</span>"},stringData:function(a){if("undefined"!==typeof a.displayPublic&&!1===a.displayPublic)return"";var b="",c,b=n.fields&&n.fields[a.value]?n.fields[a.value]:"";a.displaySavedValue&&
(c=b&&b.type&&"password"===b.type);c=a.displaySavedValue&&Yb[a.value]&&(!c||c&&Ae)?Yb[a.value]:a.value;b=a.justString?c:j.wrapStringData(a,c);"undefined"!==typeof a.hideWhenValue&&c===a.hideWhenValue&&(b="");return b},imageData:function(a){var b;a.value&&(a.returnImageTag?(b={elementName:a.elementname,hide:a.hide,src:a.value},a.classes&&(b.classes=a.classes),a.elementId&&(b.elementId=a.elementId),b=j.createImage(b)):b=a.value);return b}},html:{anchor:function(a){return a=""+j.createAnchor(a)},textarea:function(a){var b;
b=""+j.wrapFormItemStart(a);b+=j.createTextarea(a);b+=j.wrapFormItemEnd(a);j.attachFieldEventHandlers(a);return b},select:function(a){var b;b=""+j.wrapFormItemStart(a);b+=j.createSelect(a);b+=j.wrapFormItemEnd(a);j.attachFieldEventHandlers(a);return b},multi:function(a,b){var c="",e,f=q(a.value)?a.value:"string"===typeof a.value?a.value.split(","):[],i=a.options.length,n=0;for(e=f.length;n<e;n++)f[n]=f[n].toString();a.type="elementCollection";c+=j.wrapFormItemStart(a);c+=j.createLabel(a);for(n=0;n<
i;n++)e=a.options[n],e.value="undefined"===typeof e.value?"":e.value.toString(),e.label="undefined"===typeof e.label?"":e.label.toString(),e.value=e.value||e.label,e.label=e.label||e.value,c+=this.input({elementName:a.elementName,type:b,elementId:a.elementName+"_"+e.value+"_"+n,name:a.name,value:e.value,collection:!0,label:e.label,checked:l(f,e.value)}),u.push({elementName:a.elementName+"_"+e.value+"_"+n,handler:function(b,d){return function(){for(var c=g(this),h=document.getElementById(c+"form_collection_"+
a.elementName),h=U("capture_form_item_"+a.elementName,h),c=document.getElementById(c+"form_item_"+a.elementName+"_"+b+"_"+d),e=0,f=h.length;e<f;e++)k(h[e]).remove("capture_toggled");c&&k(c).append("capture_toggled")}}(e.value,n),eventType:"click"});c+=j.createTip(a);return c+=j.wrapFormItemEnd(a)},multiCheckbox:function(a){return this.multi(a,a.element.split("multi")[1].toLowerCase())},multiRadio:function(a){return this.multi(a,a.element.split("multi")[1].toLowerCase())},input:function(a){var b;b=
""+j.wrapFormItemStart(a);b+=j.createInput(a);b+=j.wrapFormItemEnd(a);j.attachFieldEventHandlers(a);return b},button:function(a){var b;b=""+j.wrapFormItemStart(a);b+=j.createButton(a);b+=j.wrapFormItemEnd(a);j.attachFieldEventHandlers(a);return b},form:function(a){var b="<form ",c="object"===typeof a.elementAttributes?a.elementAttributes:{},e=a.localFieldPrefix||F,f=a.classes||[];f.indexOf("capture_form"===-1)&&f.push("capture_form");f.indexOf(-1==="capture_"+a.elementName)&&f.push("capture_"+a.elementName);
b+="id='"+e+a.elementName+"' ";b+=lc(c)+" ";b+="name='"+a.elementName+"' ";b+="data-capturefield='"+a.name+"' ";b+="action='"+janrain.settings.capture.captureServer+"/"+a.action+"' ";q(f)&&(b+="class='"+f.join(" ")+"' ");var b=b+"method='POST' novalidate='novalidate' "+("data-transactionId='"+a.transactionId+"' "),b=b+("target='captureIFrame_"+a.transactionId+"' "),b=b+"accept-charset='UTF-8' >"+('<div id="'+e+a.elementName+'_defaultSavedProfileMessage"></div>'),b=b+('<div id="'+e+a.elementName+'_errorMessages"></div>'),
g="";if(a.errors){janrain.events.onCaptureFormError.fire(a.errors);for(var i in a.errors)a.errors.hasOwnProperty(i)&&(g+=j.createDiv({elementId:"formerror_"+(new Date).getTime(),classes:["capture_form_error"]}),g+=a.errors[i]+"</div>")}u.push({handler:function(){tb(a.transactionId)},eventType:"render"});u.push({handler:function(){var b=document.getElementById(e+a.elementName);if(!b)return!1;var d=U("capture_form_error_container",b),d=d.length?d[0]:document.getElementById(e+a.elementName+"_errorMessages");
g?(d.innerHTML=g,k(b).append("capture_form_level_error")):d.innerHTML=""},eventType:"render"});if(janrain.settings.capture.dataDefaults&&"object"===typeof janrain.settings.capture.dataDefaults){var c=janrain.settings.capture.dataDefaults,p;for(p in c)c.hasOwnProperty(p)&&(b+=j.createInput({elementName:p,type:"hidden",value:c[p]}))}b+=j.createInput({elementName:"utf8",type:"hidden",value:"\u2713"});Oa&&(b+=j.createInput({elementName:"bp_channel",elementId:"bp_channel"+a.transactionId,type:"hidden",
value:Oa}));Na&&(b+=j.createInput({elementName:"flow_path",elementId:"flow_path_"+a.transactionId,type:"hidden",value:Na}));n&&n.mergeToken&&(b+=j.createInput({elementName:"merge_token",elementId:"merge_token_"+a.transactionId,type:"hidden",value:n.mergeToken}));kb?b+=j.createInput({elementName:"access_token",elementId:"accessToken_"+a.transactionId,classes:["capture_accessToken"],type:"hidden",value:kb}):a&&a.action&&!l(Ge,a.action)&&Y&&(b+=j.createInput({elementName:"access_token",elementId:"accessToken_"+
a.transactionId,classes:["capture_accessToken"],type:"hidden",value:Y}));O&&(b+=j.createInput({elementName:"capture_screen",elementId:"screen_"+a.transactionId,type:"hidden",value:O}));Ob&&(b+=j.createInput({elementName:"js_version",elementId:"js_version_"+a.transactionId,type:"hidden",value:Ob}));a.serverNextScreen&&(b+=j.createInput({elementName:"serverNextScreen",elementId:"serverNextScreen_"+a.transactionId,type:"hidden",value:a.serverNextScreen}));if(a.engageTokenRequired||Vb)b+=j.createInput({elementName:"token",
elementId:"token_"+a.transactionId,type:"hidden",value:va});b+=j.createInput({elementName:"capture_transactionId",elementId:"transactionId_"+a.transactionId,type:"hidden",value:a.transactionId});b+=j.createInput({elementName:"form",elementId:"form_"+a.transactionId,type:"hidden",value:a.name});b+=j.createInput({elementName:"flow",elementId:"flow_"+a.transactionId,type:"hidden",value:n.flow});b+=j.createInput({elementName:"client_id",elementId:"client_id_"+a.transactionId,type:"hidden",value:janrain.settings.capture.clientId});
b+=j.createInput({elementName:"redirect_uri",elementId:"redirect_uri_"+a.transactionId,type:"hidden",value:janrain.settings.capture.redirectUri});b+=j.createInput({elementName:"response_type",elementId:"response_type_"+a.transactionId,type:"hidden",value:janrain.settings.capture.responseType});b+=j.createInput({elementName:"flow_version",elementId:"flow_version_"+a.transactionId,type:"hidden",value:zc});b+=j.createInput({elementName:"locale",elementId:"locale_"+a.transactionId,type:"hidden",value:xb});
j.domHelpers.createIFrame(a.transactionId,e+a.elementName);!1!==a.listenToFields&&u.push({handler:function(){var b=document.getElementById(e+a.elementName);b&&(x(b,"keyup",function(a){(8==a.keyCode||46==a.keyCode)&&Ca(a)}),x(b,"keypress",function(a){(a.charCode||a.keyCode)&&Ca(a)}),x(b,"change",Ca),b.addEventListener?(b.addEventListener("focus",qb,!0),b.addEventListener("blur",sb,!0)):"object"===typeof window.attachEvent&&(b.attachEvent("onfocusin",qb),b.attachEvent("onfocusout",sb)))},eventType:"render"});
return b},div:function(a){return j.createDiv(a)},close:function(a){return"capture"===a.element?"photoManager"===a.type?"</div>":"":"</"+a.element+">"}},capture:{table:function(a){var b='<table class="capture_table">',c=V.prototype.render.html;if(a.th.display){var b=b+"<tr>",e;for(e in a.th.cols)b+="<th>"+a.th.cols[e]+"</th>";b+="</tr>"}for(var f in a.rows){var b=b+"<tr>",g;for(g in a.rows[f].cells)a.rows[f].cells[g].type&&"radio"===a.rows[f].cells[g].type?(e=a.rows[f].cells[g],e.name="table",a.value&&
e.elementValue===a.value[e.rendererChildFieldName]&&(e.checked=!0),b+="<td>",b+=j.wrapFormItemStart(a),b+=c.input(e),b+=j.wrapFormItemEnd(a),b+="</td>"):b+="<td>"+a.rows[f].cells[g]+"</td>";b+="</tr>"}return b+"</table>"},countrySelect:function(a){a.customText||(a.customText={});a.options=[{text:a.customText.countryLabel||"country",value:"",disabled:!0},{text:"United States",value:"United States"},{text:"APO/FPO/DPO",value:"APO/FPO/DPO"},{text:"Canada",value:"Canada"},{text:"United Kingdom",value:"United Kingdom"},
{text:"Afghanistan",value:"Afghanistan"},{text:"Albania",value:"Albania"},{text:"Algeria",value:"Algeria"},{text:"American Samoa",value:"American Samoa"},{text:"Andorra",value:"Andorra"},{text:"Angola",value:"Angola"},{text:"Anguilla",value:"Anguilla"},{text:"Antigua and Barbuda",value:"Antigua and Barbuda"},{text:"Argentina",value:"Argentina"},{text:"Armenia",value:"Armenia"},{text:"Aruba",value:"Aruba"},{text:"Australia",value:"Australia"},{text:"Austria",value:"Austria"},{text:"Azerbaijan Republic",
value:"Azerbaijan Republic"},{text:"Bahamas",value:"Bahamas"},{text:"Bahrain",value:"Bahrain"},{text:"Bangladesh",value:"Bangladesh"},{text:"Barbados",value:"Barbados"},{text:"Belarus",value:"Belarus"},{text:"Belgium",value:"Belgium"},{text:"Belize",value:"Belize"},{text:"Benin",value:"Benin"},{text:"Bermuda",value:"Bermuda"},{text:"Bhutan",value:"Bhutan"},{text:"Bolivia",value:"Bolivia"},{text:"Bosnia and Herzegovina",value:"Bosnia and Herzegovina"},{text:"Botswana",value:"Botswana"},{text:"Brazil",
value:"Brazil"},{text:"British Virgin Islands",value:"British Virgin Islands"},{text:"Brunei Darussalam",value:"Brunei Darussalam"},{text:"Bulgaria",value:"Bulgaria"},{text:"Burkina Faso",value:"Burkina Faso"},{text:"Burundi",value:"Burundi"},{text:"Cambodia",value:"Cambodia"},{text:"Cameroon",value:"Cameroon"},{text:"Cape Verde Islands",value:"Cape Verde Islands"},{text:"Cayman Islands",value:"Cayman Islands"},{text:"Central African Republic",value:"Central African Republic"},{text:"Chad",value:"Chad"},
{text:"Chile",value:"Chile"},{text:"China",value:"China"},{text:"Colombia",value:"Colombia"},{text:"Comoros",value:"Comoros"},{text:"Congo, Democratic Republic of the",value:"Congo, Democratic Republic of the"},{text:"Congo, Republic of the",value:"Congo, Republic of the"},{text:"Cook Islands",value:"Cook Islands"},{text:"Costa Rica",value:"Costa Rica"},{text:"Cote d Ivoire (Ivory Coast)",value:"Cote d Ivoire (Ivory Coast)"},{text:"Croatia, Republic of",value:"Croatia, Republic of"},{text:"Cyprus",
value:"Cyprus"},{text:"Czech Republic",value:"Czech Republic"},{text:"Denmark",value:"Denmark"},{text:"Djibouti",value:"Djibouti"},{text:"Dominica",value:"Dominica"},{text:"Dominican Republic",value:"Dominican Republic"},{text:"Ecuador",value:"Ecuador"},{text:"Egypt",value:"Egypt"},{text:"El Salvador",value:"El Salvador"},{text:"Equatorial Guinea",value:"Equatorial Guinea"},{text:"Eritrea",value:"Eritrea"},{text:"Estonia",value:"Estonia"},{text:"Ethiopia",value:"Ethiopia"},{text:"Falkland Islands (Islas Malvinas)",
value:"Falkland Islands (Islas Malvinas)"},{text:"Fiji",value:"Fiji"},{text:"Finland",value:"Finland"},{text:"France",value:"France"},{text:"French Guiana",value:"French Guiana"},{text:"French Polynesia",value:"French Polynesia"},{text:"Gabon Republic",value:"Gabon Republic"},{text:"Gambia",value:"Gambia"},{text:"Georgia",value:"Georgia"},{text:"Germany",value:"Germany"},{text:"Ghana",value:"Ghana"},{text:"Gibraltar",value:"Gibraltar"},{text:"Greece",value:"Greece"},{text:"Greenland",value:"Greenland"},
{text:"Grenada",value:"Grenada"},{text:"Guadeloupe",value:"Guadeloupe"},{text:"Guam",value:"Guam"},{text:"Guatemala",value:"Guatemala"},{text:"Guernsey",value:"Guernsey"},{text:"Guinea",value:"Guinea"},{text:"Guinea-Bissau",value:"Guinea-Bissau"},{text:"Guyana",value:"Guyana"},{text:"Haiti",value:"Haiti"},{text:"Honduras",value:"Honduras"},{text:"Hong Kong",value:"Hong Kong"},{text:"Hungary",value:"Hungary"},{text:"Iceland",value:"Iceland"},{text:"India",value:"India"},{text:"Indonesia",value:"Indonesia"},
{text:"Ireland",value:"Ireland"},{text:"Israel",value:"Israel"},{text:"Italy",value:"Italy"},{text:"Jamaica",value:"Jamaica"},{text:"Jan Mayen",value:"Jan Mayen"},{text:"Japan",value:"Japan"},{text:"Jersey",value:"Jersey"},{text:"Jordan",value:"Jordan"},{text:"Kazakhstan",value:"Kazakhstan"},{text:"Kenya",value:"Kenya"},{text:"Kiribati",value:"Kiribati"},{text:"Korea, South",value:"Korea, South"},{text:"Kuwait",value:"Kuwait"},{text:"Kyrgyzstan",value:"Kyrgyzstan"},{text:"Laos",value:"Laos"},{text:"Latvia",
value:"Latvia"},{text:"Lebanon",value:"Lebanon"},{text:"Liechtenstein",value:"Liechtenstein"},{text:"Lithuania",value:"Lithuania"},{text:"Luxembourg",value:"Luxembourg"},{text:"Macau",value:"Macau"},{text:"Macedonia",value:"Macedonia"},{text:"Madagascar",value:"Madagascar"},{text:"Malawi",value:"Malawi"},{text:"Malaysia",value:"Malaysia"},{text:"Maldives",value:"Maldives"},{text:"Mali",value:"Mali"},{text:"Malta",value:"Malta"},{text:"Marshall Islands",value:"Marshall Islands"},{text:"Martinique",
value:"Martinique"},{text:"Mauritania",value:"Mauritania"},{text:"Mauritius",value:"Mauritius"},{text:"Mayotte",value:"Mayotte"},{text:"Mexico",value:"Mexico"},{text:"Micronesia",value:"Micronesia"},{text:"Moldova",value:"Moldova"},{text:"Monaco",value:"Monaco"},{text:"Mongolia",value:"Mongolia"},{text:"Montenegro",value:"Montenegro"},{text:"Montserrat",value:"Montserrat"},{text:"Morocco",value:"Morocco"},{text:"Mozambique",value:"Mozambique"},{text:"Namibia",value:"Namibia"},{text:"Nauru",value:"Nauru"},
{text:"Nepal",value:"Nepal"},{text:"Netherlands",value:"Netherlands"},{text:"Netherlands Antilles",value:"Netherlands Antilles"},{text:"New Caledonia",value:"New Caledonia"},{text:"New Zealand",value:"New Zealand"},{text:"Nicaragua",value:"Nicaragua"},{text:"Niger",value:"Niger"},{text:"Nigeria",value:"Nigeria"},{text:"Niue",value:"Niue"},{text:"Norway",value:"Norway"},{text:"Oman",value:"Oman"},{text:"Pakistan",value:"Pakistan"},{text:"Palau",value:"Palau"},{text:"Panama",value:"Panama"},{text:"Papua New Guinea",
value:"Papua New Guinea"},{text:"Paraguay",value:"Paraguay"},{text:"Peru",value:"Peru"},{text:"Philippines",value:"Philippines"},{text:"Poland",value:"Poland"},{text:"Portugal",value:"Portugal"},{text:"Puerto Rico",value:"Puerto Rico"},{text:"Qatar",value:"Qatar"},{text:"Romania",value:"Romania"},{text:"Russian Federation",value:"Russian Federation"},{text:"Rwanda",value:"Rwanda"},{text:"Saint Helena",value:"Saint Helena"},{text:"Saint Kitts-Nevis",value:"Saint Kitts-Nevis"},{text:"Saint Lucia",value:"Saint Lucia"},
{text:"Saint Pierre and Miquelon",value:"Saint Pierre and Miquelon"},{text:"Saint Vincent and the Grenadines",value:"Saint Vincent and the Grenadines"},{text:"San Marino",value:"San Marino"},{text:"Saudi Arabia",value:"Saudi Arabia"},{text:"Senegal",value:"Senegal"},{text:"Serbia",value:"Serbia"},{text:"Seychelles",value:"Seychelles"},{text:"Sierra Leone",value:"Sierra Leone"},{text:"Singapore",value:"Singapore"},{text:"Slovakia",value:"Slovakia"},{text:"Slovenia",value:"Slovenia"},{text:"Solomon Islands",
value:"Solomon Islands"},{text:"Somalia",value:"Somalia"},{text:"South Africa",value:"South Africa"},{text:"Spain",value:"Spain"},{text:"Sri Lanka",value:"Sri Lanka"},{text:"Suriname",value:"Suriname"},{text:"Svalbard",value:"Svalbard"},{text:"Swaziland",value:"Swaziland"},{text:"Sweden",value:"Sweden"},{text:"Switzerland",value:"Switzerland"},{text:"Tahiti",value:"Tahiti"},{text:"Taiwan",value:"Taiwan"},{text:"Tajikistan",value:"Tajikistan"},{text:"Tanzania",value:"Tanzania"},{text:"Thailand",value:"Thailand"},
{text:"Togo",value:"Togo"},{text:"Tonga",value:"Tonga"},{text:"Trinidad and Tobago",value:"Trinidad and Tobago"},{text:"Tunisia",value:"Tunisia"},{text:"Turkey",value:"Turkey"},{text:"Turkmenistan",value:"Turkmenistan"},{text:"Turks and Caicos Islands",value:"Turks and Caicos Islands"},{text:"Tuvalu",value:"Tuvalu"},{text:"Uganda",value:"Uganda"},{text:"Ukraine",value:"Ukraine"},{text:"United Arab Emirates",value:"United Arab Emirates"},{text:"Uruguay",value:"Uruguay"},{text:"Uzbekistan",value:"Uzbekistan"},
{text:"Vanuatu",value:"Vanuatu"},{text:"Vatican City State",value:"Vatican City State"},{text:"Venezuela",value:"Venezuela"},{text:"Vietnam",value:"Vietnam"},{text:"Virgin Islands (U.S.)",value:"Virgin Islands (U.S.)"},{text:"Wallis and Futuna",value:"Wallis and Futuna"},{text:"Western Sahara",value:"Western Sahara"},{text:"Western Samoa",value:"Western Samoa"},{text:"Yemen",value:"Yemen"},{text:"Zambia",value:"Zambia"},{text:"Zimbabwe",value:"Zimbabwe"}];return V.prototype.render.html.select(a)},
stateSelect:function(a){a.customText||(a.customText={});var b=[{text:a.customText.stateLabel||"state",value:"",disabled:!0}],b=a.noCanadianProvinces?b.concat(ie):b.concat(ie,Me);a.options=b;return V.prototype.render.html.select(a)},keepMeLoggedIn:function(a){var b=a.fieldPrefix||F,a=""+j.createInput({label:a.label||"Keep me logged in",type:"checkbox",name:a.name,justElement:!0,value:"yes",checked:a.checked||!1,elementName:"capture_keep_me_logged_in"});u.push({elementName:"capture_keep_me_logged_in",
handler:function(){loggedInElement=document.getElementById(b+"capture_keep_me_logged_in");janrain.engage.signin.appendTokenParams({keepMeLoggedIn:loggedInElement.checked},!0,!0)},eventType:"render"});u.push({elementName:"capture_keep_me_logged_in",handler:function(a){a=B(a);janrain.engage.signin.appendTokenParams({keepMeLoggedIn:a.checked},!0,!0)},eventType:"click"});return a},captcha:function(a){var b="http:"===document.location.protocol?"http://www.google.com/recaptcha/api/js/recaptcha_ajax.js":
"https://www.google.com/recaptcha/api/js/recaptcha_ajax.js";Ee||Ia(b,function(){Ee=!0});u.push({elementName:a.name,handler:function(){function a(){if("undefined"===typeof Recaptcha)setTimeout(a,20);else{if(!janrain.settings.capture.recaptchaPublicKey)throw Error("missing recaptcha public key setting");Recaptcha.create(janrain.settings.capture.recaptchaPublicKey,"recaptcha_container",{theme:"clean",callback:function(){janrain.events.onCaptureContentChange.fire()}})}}a()},eventType:"render"});b=""+
j.wrapFormItemStart(a);a.label&&(b+=j.createLabel(a));b=b+'<div id="recaptcha_container"></div>'+j.createTip(a);return b+=j.wrapFormItemEnd(a)},mergeAccounts:function(a,b){var b=b?J.parse(b):{custom:!1},c=V.prototype.render,e=a.value,f="";e.existing_provider="legacy"===e.existing_provider?"email":e.existing_provider;a.customText||(a.customText={});var g=a.customText.connectRadio||'Connect this session with your existing account. <span class="capture_smallText">Enables you to sign in with either <span class="capture_capitalize">{| current_provider |}</span> or <span class="capture_capitalize">{| existing_provider |}</span> in the future.</span><span class="capture_recommended capture_smallText">Recommended</span>',
j=a.customText.connectLegacyRadio||'Connect this session with your existing account <span class="capture_smallText">You will need to sign in to your existing account to claim it.</span><span class="capture_recommended capture_smallText">Recommended</span>',i=a.customText.createRadio||"Create a new account using {| current_provider |} sign-in.",r=a.customText.foundExistingAccount||"We found an existing account for <b>{| current_emailAddress |}</b>",n=a.customText.moreInfoHover||'You\u2019re seeing this screen because on {| existing_createdDate |} you registered at {| existing_siteName |} with your <span class="capture_capitalize">{| existing_provider |}</span> account ({| existing_displayName |}).',
l=a.customText.moreInfo||"More Info ?",m=a.customText.createButton||"Create",q=a.customText.connectButton||"Connect";e.connectRadioText=H(e,g);e.connectLegacyRadioText=H(e,j);e.createRadioText=H(e,i);e.foundExistingAccountText=H(e,r);e.moreInfoHoverText=H(e,n);e.moreInfoText=H(e,l);e.createButtonText=H(e,m);e.connectButtonText=H(e,q);e.connect_button=c.html.button({elementContent:'<span class="capture_mergeProvider janrain-provider-icon-16 janrain-provider-icon-'+e.existing_provider.toLowerCase()+
'"></span><span class="capture_mergeProvider janrain-provider-icon-16 janrain-provider-icon-'+e.current_provider.toLowerCase()+'"></span>'+q,elementName:a.name+"_connectButton",name:a.name+"_connectButton",element:"button",type:"button"});e.create_button=c.html.button({elementContent:m,hide:!0,elementName:a.name+"_createButton",name:a.name+"_createButton",element:"button",type:"submit"});e.merge_radio=c.html.multiRadio({element:"multiRadio",value:[1],elementName:a.name+"_mergeRadio",classes:["capture_form_collection_merge_radioButtonCollection"],
options:[{label:"email"===e.existing_provider?H(e,j):H(e,g),value:1},{label:i,value:2}]});e.rendered_current_photo=e.current_photo?'<img src="'+e.current_photo+'" height="25" width="25" />':"";e.rendered_existing_provider_photo=e.existing_provider_photo?'<div class="capture_icon_col"><img src="'+e.existing_provider_photo+'" height="25" width="25" /></div>':"";e.current_provider_lowerCase=e.current_provider.toLowerCase();e.existing_provider_lowerCase=e.existing_provider.toLowerCase();b.custom?u.push({handler:function(){var b=
document.getElementById(a.name);b.innerHTML=H(e,b.innerHTML)},eventType:"render"}):f+=H(e,'<div id="capture_mergeAccounts_mergeAccounts_mergeOptionsContainer" class="capture_mergeAccounts_mergeOptionsContainer">     <div class="capture_header">         <div class="capture_icon_col">             {| rendered_current_photo |}         </div>         <div class="capture_displayName_col">             {| current_displayName |}<br />             {| current_emailAddress |}          </div>         <span class="capture_mergeProvider janrain-provider-icon-24 janrain-provider-icon-{| current_provider_lowerCase |}"></span>     </div>     <div class="capture_dashed">         <div class="capture_mergeCol capture_centerText capture_left">             <p class="capture_bigText">{| foundExistingAccountText |}</b>.</p>             <div class="capture_hover">                 <div class="capture_popup_container">                     <span class="capture_popup-arrow"></span>{| moreInfoHoverText |}                 </div>                 {| moreInfoText |}             </div>         </div>         <div class="capture_mergeCol capture_mergeExisting_col capture_right">             <div class="capture_shadow capture_backgroundColor capture_border">                 {| rendered_existing_provider_photo |}                 <div class="capture_displayName_col">                     {| existing_displayName |}<br />                     {| existing_provider_emailAddress |}                 </div>                 <span class="capture_mergeProvider janrain-provider-icon-16 janrain-provider-icon-{| existing_provider_lowerCase |} "></span>                 <div class="capture_centerText capture_smallText">Created {| existing_createdDate |} at {| existing_siteName |}</div>             </div>         </div>     </div>     {| merge_radio |}     <div class="capture_footer">         {| connect_button |}         {| create_button |}     </div> </div>');
u.push({elementName:a.name+"_connectButton",handler:function(){"email"===e.existing_provider?(janrain.capture.ui.renderScreen(a.traditionalMergeScreen),janrain.events.onCaptureContentChange.fire()):(wc=!0,janrain.engage.signin.setCustom(!0),janrain.engage.signin.triggerFlow(e.existing_provider),janrain.engage.signin.setCustom(!1))},eventType:"click"});u.push({elementName:a.name+"_createButton",handler:function(){$b?Hd():(zb=null,janrain.apps.capture.ui.renderScreen(janrain.settings.capture.mergeFlow||
janrain.settings.capture.registerFlow||"socialRegister"))},eventType:"click"});u.push({elementName:a.name+"_mergeRadio_1_0",handler:function(){document.getElementById(F+a.name+"_connectButton").style.display="";document.getElementById(F+a.name+"_createButton").style.display="none";k(document.getElementById(F+"form_item_"+a.name+"_mergeRadio_1_0")).append("capture_toggled");k(document.getElementById(F+"form_item_"+a.name+"_mergeRadio_2_1")).remove("capture_toggled")},eventType:"click"});u.push({elementName:a.name+
"_mergeRadio_2_1",handler:function(){document.getElementById(F+a.name+"_connectButton").style.display="none";document.getElementById(F+a.name+"_createButton").style.display="";k(document.getElementById(F+"form_item_"+a.name+"_mergeRadio_2_1")).append("capture_toggled");k(document.getElementById(F+"form_item_"+a.name+"_mergeRadio_1_0")).remove("capture_toggled")},eventType:"click"});return f},publicProfileLink:function(a,b){var c="",e=b?J.parse(b).elementHref:a.elementHref;a.elementAttributes="object"===
typeof a.elementAttributes?a.elementAttributes:{};a.addUUIDToLink&&(a.elementAttributes["data-captureuseruuid"]=a.value);a.elementHref=e+"?uuid="+a.value;a.elementText=a.elementText||"Public Profile";return c+=j.createAnchor(a)},linkAccounts:function(a){function b(d){var c=a.value.providers[d],e=a.value.displayNames[d],h=a.value.identifiers[d],f=a.value.prettyProviders?a.value.prettyProviders[d]:c,g;g='<li class="capture_provider_linked"><span class="'+("janrain-provider-icon-"+m+" janrain-provider-icon-"+
c+(a.customIcons?"-custom":"")+'">');g+='</span><span class="';var j=e&&"null"!==e.toLowerCase(),i=/\{\|\s*displayName\s*\|}/.test(a.displayFormat),e=j||!i?H({provider:f,displayName:e},a.displayFormat):f;g+="janrain-provider-text-"+c+(a.customIcons?"-custom":"")+'">'+e+"</span>";if(Jd||0!==d)g+='<span tabindex="0" class="capture_remove janrain-icon-ex janrain-icon-16 capture_remove_linkedaccount" data-captureprovider="'+c+'" data-captureidentifier="'+h+'"></span>';return g+"</li>"}a.value||(a.value=
{});a.customText||(a.customText={});var c=O,e=a.fieldPrefix||F,f='<div class="capture_linkAccounts" id="'+e+a.name+'_currentlinkedaccounts">',g=n.fields[a.linkAccountContainer].elementName||n.fields[a.linkAccountContainer].name||a.linkAccountContainer,j=a.customText.linkAnotherAccount||"Link account",i=q(a.value.providers)?a.value.providers.length:0,k=e+a.name+"_linkaccountsscreen",m=a.providerIconSize&&l(Le,a.providerIconSize)?a.providerIconSize:16,f=f+('<ul class="capture_provider" id="'+e+a.name+
'_linkedproviderlist">');if(!a.customAddLinks)for(var o=0;o<i;o++)f+=b(o);if(a.customAddLinks){o=0;for(j=a.customProviders.length;o<j;o++)l(a.value.providers,a.customProviders[o])?(i=a.value.providers.indexOf(a.customProviders[o]),f+=b(i)):(f+='<li tabindex="0" class="capture_custom_add_linkedaccount" data-captureprovider="'+a.customProviders[o]+'">',f+=H({provider:a.customProviders[o]},a.customAddLinkFormat)+"</li>");u.push({elementName:a.name+"_linkedproviderlist",handler:function(a){Ya.linkWithCustomLink(a,
c)},eventType:"click"});u.push({elementName:a.name+"_linkedproviderlist",handler:function(a){Ya.linkWithCustomLink(a,c)},eventType:"keypress"})}else f+='<li class="capture_linkAccount"><a href="#" id="'+e+a.name+'_linknewlink">'+j+"</a></li>";f+="</ul></div>";u.push({elementName:a.name+"_linknewlink",handler:function(a){Ya.openInModal(a,c,k)},eventType:"click"});u.push({elementName:a.name+"_currentlinkedaccounts",handler:function(b){Ya.unLinkAccount(b,a,c)},eventType:"keypress"});u.push({elementName:a.name+
"_currentlinkedaccounts",handler:function(b){Ya.unLinkAccount(b,a,c)},eventType:"click"});f=f+'<div style="display: none;">'+('<div id="'+k+'"')+' class="janrain-capture-ui capture-ui-content capture_addLinkedAccount';Fa&&(f+=" janrain-capture-ui-mobile");f=f+'">'+('<div id="'+e+a.name+'_linkAccountContainerContainer">');f+="</div></div></div>";a.customAddLinks||u.push({handler:function(){Ya.renderHandler(e+g,e+a.name+"_linkAccountContainerContainer")},eventType:"render"});return f},errorMessages:function(){var a;
a=""+V.prototype.render.html.div({elementName:"placed_error_container_"+(new Date).getTime(),classes:["capture_form_error_container"]});return a+"</div>"},savedProfileMessage:function(){var a;a=""+V.prototype.render.html.div({elementName:"placed_profileSaved_container_"+(new Date).getTime(),hide:!0,classes:["capture_save_success","capture_profileSavedMessage_container"]});return a+"</div>"},nameFull_public:function(a){if("undefined"!==typeof a.displayPublic&&!1===a.displayPublic)return"";var b="",
b="";a.value.firstname&&(b+=a.justString?a.value.firstname+" ":'<span class="capture_stringdata_nameBlock_firstname">'+a.value.firstname+"</span> ");a.value.middlename&&!a.hideMiddlename&&(b+=a.justString?a.value.middlename+" ":'<span class="capture_stringdata_nameBlock_middlename">'+a.value.middlename+"</span> ");a.value.lastname&&(b+=a.justString?a.value.lastname:'<span class="capture_stringdata_nameBlock_lastname">'+a.value.lastname+"</span>");return b=a.justString?b:j.wrapStringData(a,b,"capture_stringdata_nameBlock")},
nameFull:function(a){var b,c=V.prototype.render.html;b='<div class="capture_form_item capture_nameBlock">'+c.input({elementName:a.name+"[firstname]",elementId:a.name+"_firstname",elementClasses:["capture_nameFull_firstName"],label:"Name",type:"text",rendererChildFieldName:"firstname",rendererFieldName:a.name,publicPrivateToggle:a.publicPrivateToggle,displayPublic:a.displayPublic,value:a.value&&a.value.firstname?a.value.firstname:"",placeholder:a.placeholder&&a.placeholder.firstname?a.placeholder.firstname:
""});a.hideMiddlename||(b+=c.input({elementName:a.name+"[middlename]",elementId:a.name+"_middlename",elementClasses:["capture_nameFull_middleName"],type:"text",rendererChildFieldName:"middlename",rendererFieldName:a.name,value:a.value&&a.value.middlename?a.value.middlename:"",placeholder:a.placeholder&&a.placeholder.middlename?a.placeholder.middlename:""}));b+=c.input({elementName:a.name+"[lastname]",elementClasses:["capture_nameFull_lastName"],elementId:a.name+"_lastname",type:"text",rendererFieldName:a.name,
rendererChildFieldName:"lastname",value:a.value&&a.value.lastname?a.value.lastname:"",placeholder:a.placeholder&&a.placeholder.lastname?a.placeholder.lastname:""});return b+"</div>"},multipurposeAuth:function(a){var b;a.type="text";b=""+j.wrapFormItemStart(a);b+=j.createInput(a);b+=j.wrapFormItemEnd(a);j.attachFieldEventHandlers(a);a.type="multipurposeAuth";return b},dateselect_public:function(a){if("undefined"!==typeof a.displayPublic&&!1===a.displayPublic||!a.value||!a.value.dateselect_month||!a.value.dateselect_year||
!a.value.dateselect_day)return"";var b="",b="",c,b=parseInt(a.value.dateselect_month,10);c=parseInt(a.value.dateselect_year,10);var e=parseInt(a.value.dateselect_day,10);a.format?(b=new Date(c,b-1,e),c=a.format,b=wa(c,b,{monthNames:a.monthNames,dayNames:a.dayNames})):b=b+"/"+e+"/"+c;return b=a.justString?b:j.wrapStringData(a,b,"capture_stringdata_dateselectBlock")},dateselect:function(a){function b(d){d=B(d);d=g(d);d=document.getElementById(d+"form_item_"+a.elementName);k(d).append("capture_focused").remove("capture_error");
janrain.events.onCaptureContentChange.fire()}function c(b){var d=B(b),e=g(d),e=document.getElementById(e+"form_item_"+a.elementName);k(e).remove("capture_focused");L(d,a)&&mc(b)}a.customText||(a.customText={});var e=a.customText.dayLabelDateSelect||"day",f=a.customText.monthLabelDateSelect||"month",n=a.customText.yearLabelDateSelect||"year",l=$d;a.monthNames&&q(a.monthNames)&&12===a.monthNames.length&&(l=a.monthNames);var p=a.fieldPrefix||F,r='<div id="'+p+"form_item_"+a.name+'" class="capture_form_item capture_dateselectBlock">',
m,o,w,x=q(a.format)&&3===a.format.length?a.format:["month","day","year"],t=a.value&&a.value.dateselect_day?parseInt(a.value.dateselect_day):"",s=a.value&&a.value.dateselect_year?parseInt(a.value.dateselect_year):"",y=a.value&&a.value.dateselect_month?parseInt(a.value.dateselect_month):"",f=[{text:f,value:"",disabled:!0},{text:l[0],value:1},{text:l[1],value:2},{text:l[2],value:3},{text:l[3],value:4},{text:l[4],value:5},{text:l[5],value:6},{text:l[6],value:7},{text:l[7],value:8},{text:l[8],value:9},
{text:l[9],value:10},{text:l[10],value:11},{text:l[11],value:12}],l=a.monthStart||1,z=a.monthEnd||13,A=a.dayStart||1,C=a.dayEnd||31,D=a.yearStart||1929,G=a.yearEnd||(new Date).getFullYear();w={elementName:a.name+"[dateselect_month]",elementId:a.name+"_dateselectmonth",rendererFieldName:a.name,rendererChildFieldName:"dateselect_month",elementClasses:["capture_dateselect_month"],justElement:!0,value:y,options:f.slice(0,1).concat(f.slice(l,z))};o={elementName:a.name+"[dateselect_day]",elementId:a.name+
"_dateselectday",elementClasses:["capture_dateselect_day"],rendererFieldName:a.name,rendererChildFieldName:"dateselect_day",justElement:!0,value:t,options:i(A,C,"asc",e)};D=parseInt(D,10);G=parseInt(G,10);m={elementName:a.name+"[dateselect_year]",justElement:!0,elementId:a.name+"_dateselectyear",rendererFieldName:a.name,rendererChildFieldName:"dateselect_year",elementClasses:["capture_dateselect_year"],value:s,options:i(D,G,"desc",n)};for(e=0;3>e;e++){var E;switch(x[e]){case "month":E=w;break;case "day":E=
o;break;case "year":E=m}0===e&&(E.label=a.label);2===e&&(E.publicPrivateToggle=a.publicPrivateToggle,E.displayPublic=a.displayPublic,E.tip=a.tip,E.justElement=!1);r+=j.createSelect(E)}if(a.datePicker){var J,x=new Date(y+"/"+t+"/"+s),H;H=isNaN(x.getMonth())?{provideOpenButton:!0}:{provideOpenButton:!0,defaultDate:x,preSelectedDate:x};$(H,a.datePickerSettings||{});u.push({elementName:m.elementName,eventType:"render",handler:function(){var a=document.getElementById(p+w.elementId),b=document.getElementById(p+
o.elementId),d=document.getElementById(p+m.elementId);H.elementAttachedTo=d.parentNode;H.extraTargetElements=[a,b,d];H.callback=function(c){a.value=c.getMonth()+1;d.value=c.getFullYear();b.value=c.getDate();ra(a);ra(b);ra(d);k(a).remove("capture_disabled");k(d).remove("capture_disabled");k(b).remove("capture_disabled");d.focus();d.blur()};J=new Ta(H)}});var I=function(){if("undefined"!==typeof J){var a=document.getElementById(p+w.elementId),b=document.getElementById(p+o.elementId),d=document.getElementById(p+
m.elementId),c=new Date;c.setFullYear(d.value);c.setMonth(a.value-1);c.setDate(b.value);J.setSelectedDate(c)}};u.push({elementName:m.elementId,eventType:"change",handler:function(){I()}});u.push({elementName:w.elementId,eventType:"change",handler:function(){I()}});u.push({elementName:o.elementId,eventType:"change",handler:function(){I()}})}r+="</div>";u.push({elementName:a.name+"_dateselectyear",handler:b,eventType:"focus"});u.push({elementName:a.name+"_dateselectyear",handler:c,eventType:"blur"});
u.push({elementName:a.name+"_dateselectday",handler:b,eventType:"focus"});u.push({elementName:a.name+"_dateselectday",handler:c,eventType:"blur"});u.push({elementName:a.name+"_dateselectmonth",handler:b,eventType:"focus"});u.push({elementName:a.name+"_dateselectmonth",handler:c,eventType:"blur"});return r},addressFull_public:function(a){if("undefined"!==typeof a.displayPublic&&!1===a.displayPublic)return"";var b="",b="";a.value.streetaddress&&(b+='<div class="capture_stringdata_addressBlock_streetaddress">'+
a.value.streetaddress+"</div>");a.value.streetaddress2&&(b+='<div class="capture_stringdata_addressBlock_streetaddress2">'+a.value.streetaddress2+"</div>");if(a.value.city||a.value.stateprovince||a.value.zippostalcode)b+='<div class="capture_stringdata_addressBlock_citystatezip">';a.value.city&&(b+='<span class="capture_stringdata_addressBlock_city">'+a.value.city+"</span>, ");a.value.stateprovince&&(b+='<span class="capture_stringdata_addressBlock_stateprovince">'+a.value.stateprovince+"</span> ");
a.value.zippostalcode&&(b+='<span class="capture_stringdata_addressBlock_zippostalcode">'+a.value.zippostalcode+"</span>");if(a.value.city||a.value.stateprovince||a.value.zippostalcode)b+="</div>";a.value.country&&(b+='<div class="capture_stringdata_addressBlock_country">'+a.value.country+"</div>");return b=j.wrapStringData(a,b,"capture_stringdata_addressBlock")},addressFull:function(a){var b=a.defaultCountry||"United States",c,e=V.prototype.render.html;a.value||(a.value={});a.customText||(a.customText=
{});var f=a.customText.stateLabel||"state",i=a.customText.countryLabel||"country";c='<div class="capture_form_item capture_addressBlock">'+e.input({elementName:a.name+"[streetaddress]",elementId:a.name+"_streetaddress",label:a.label||"Address",type:"text",rendererChildFieldName:"streetaddress",rendererFieldName:a.name,publicPrivateToggle:a.publicPrivateToggle,displayPublic:a.displayPublic,value:a.value&&a.value.streetaddress?a.value.streetaddress:"",placeholder:a.placeholder&&a.placeholder.streetaddress?
a.placeholder.streetaddress:""});c+=e.input({elementName:a.name+"[streetaddress2]",elementId:a.name+"_streetaddress2",type:"text",rendererChildFieldName:"streetaddress2",rendererFieldName:a.name,value:a.value&&a.value.streetaddress2?a.value.streetaddress2:"",placeholder:a.placeholder&&a.placeholder.streetaddress2?a.placeholder.streetaddress2:""});c+=e.input({elementName:a.name+"[city]",elementId:a.name+"_city",elementClasses:["capture_addressFull_city"],type:"text",rendererChildFieldName:"city",rendererFieldName:a.name,
value:a.value&&a.value.city?a.value.city:"",placeholder:a.placeholder&&a.placeholder.city?a.placeholder.city:""});c+=V.prototype.render.capture.stateSelect({elementName:a.name+"[stateprovince]",elementId:a.name+"_stateprovince",elementClasses:["capture_addressFull_stateprovince"],rendererChildFieldName:"stateprovince",rendererFieldName:a.name,label:"",customText:{stateLabel:f},placeholder:"State/Province",hide:!(a.value&&"United States"===a.value.country||a.value&&"Canada"===a.value.country),value:a.value&&
a.value.stateprovince?a.value.stateprovince:""});u.push({elementName:a.name+"_stateprovince",handler:function(){},eventType:"change"});c+=e.input({elementName:a.name+"[zippostalcode]",elementId:a.name+"_zippostalcode",rendererChildFieldName:"zippostalcode",rendererFieldName:a.name,elementClasses:["capture_addressFull_zippostalcode"],type:"text",value:a.value&&a.value.zippostalcode?a.value.zippostalcode:"",placeholder:a.placeholder&&a.placeholder.zippostalcode?a.placeholder.zippostalcode:""});c+=V.prototype.render.capture.countrySelect({elementName:a.name+
"[country]",elementId:a.name+"_country",rendererChildFieldName:"country",rendererFieldName:a.name,elementClasses:["capture_addressFull_country"],customText:{countryLabel:i},value:a.value&&a.value.country?a.value.country:b,placeholder:a.placeholder&&a.placeholder.country?a.placeholder.country:""});u.push({elementName:a.name+"_country",handler:function(b){var b=B(b),b=g(b),d=this.options[this.selectedIndex].value||"",c=document.getElementById(b+a.name+"_stateprovince"),e=document.getElementById(b+a.name+
"_stateprovince_hidden");"United States"===d||"Canada"===d?(document.getElementById(b+"form_item_"+a.name+"[stateprovince]").style.display="inline-block",e&&e.parentNode.removeChild(e)):(document.getElementById(b+"form_item_"+a.name+"[stateprovince]").style.display="none",c.selectedIndex=0,c[0].setAttribute("disabled","disabled"),c.parentNode.appendChild(j.domHelpers.createInput({elementType:"hidden",fieldPrefix:b,elementValue:"",elementName:a.name+"[stateprovince]",elementId:a.name+"_stateprovince_hidden"})))},
eventType:"change"});return c+"</div>"},backButton:function(a){var b;a.type="button";a.elementContent='<span class="janrain-icon-16 janrain-icon-back"></span>';b=""+j.createButton(a);a.type="backButton";u.push({elementName:a.elementName,handler:function(){qc=!1;var a=vb.pop();a&&(a.flow.oneTimeRender=void 0,janrain.capture.ui.render(a.flow,a.values))},eventType:"click"});return b},partial:function(a){var b=document.getElementById(a.layout);if(b)return b.innerHTML;throw R(a.layout);},photoManager:function(a,
b){function c(b){ib=!1;var d=document.getElementById(s+a.name+"_profile_pic_uploadform_container"),h=document.getElementById(s+a.name+"_upload_photo_form");document.createElement("div").appendChild(h);d.innerHTML="";var f=document.createElement("div");f.innerHTML=ca;var g=document.createElement("div");g.innerHTML=da;d.appendChild(f);d.appendChild(h);d.appendChild(g);e(document.getElementById(I));d=document.getElementById(s+"photo_chooser");x(d,"change",na);var j=janrain.events.onModalClose.addHandler(function(){ib=
!0;janrain.events.onModalClose.removeHandler(j)});b&&A(b)}function f(b){if(0<parseInt(b.unscaled.width)){Ha=b;var d=b.unscaled.height/b.sizedHeight,c=Math.round(t/(b.unscaled.width/b.sizedWidth)),e=document.getElementById(s+a.name+"_profile_pic_image_edit"),d=Math.round(y/d);"none"===e.style.display&&(e.style.display="block");e.style.width=c+"px";e.style.height=d+"px";e.style.marginLeft="-"+Math.round(b.unscaled.left/b.sizedWidth*c)+"px";e.style.marginTop="-"+Math.round(b.unscaled.top/b.sizedHeight*
d)+"px"}}function i(){if(E)return!1;var b=document.getElementById(s+a.name+"_profile_pic_image_edit_crop");crop(b,f,D,z,function(){janrain.events.onCaptureContentChange.fire()});b.style.display="inline";E=!0}function k(){setTimeout(function(){"function"!==typeof crop?Ia("//d16s8pqtk4uodx.cloudfront.net/crop/crop.js",i):setTimeout(i,50)},500)}function n(a){if(!Ha)return!1;B(a);var a=Ha.sizedWidth/Ha.originalWidth,b=Ha.sizedHeight/Ha.originalHeight;document.getElementById(s+"width").value=Math.round(Ha.unscaled.width/
a);document.getElementById(s+"height").value=Math.round(Ha.unscaled.height/b);document.getElementById(s+"x").value=Math.round(Ha.unscaled.left/a);document.getElementById(s+"y").value=Math.round(Ha.unscaled.top/b)}function p(a){"undefined"===typeof a&&(a=0);var b=document.getElementById("janrainModal");if(null===b||"none"===b.style.display){k();ib=!1;e(document.getElementById(K));var d=janrain.events.onModalClose.addHandler(function(){ib=!0;janrain.events.onModalClose.removeHandler(d)})}else 20>a&&
setTimeout(function(){p(a+1)},100)}var b=b?J.parse(b):{custom:!1},r={};if(q(a.value)&&a.value.length){ia={};for(var m=0,o=a.value.length;m<o;m++)ia[a.value[m].type]=a.value[m]}else ia=!1;var m=j.createDiv({elementName:a.elementName+"_parent"}),w=O,s=a.fieldPrefix||F,o=V.prototype.render.html,t=a.previewSizeWidth||100,y=a.previewSizeHeight||100,z=a.originalMaxWidth||450,D=a.originalMaxHeight||450,E=!1,C="object"===typeof ia,G=C?"":"capture_profile_pic ",I=s+a.name+"_uploadphotoscreen",K=s+a.name+"_editphotoscreen";
if(C&&ia.original)var M=-1<ia.original.value.indexOf("?")?"&":"?";r.profilePicClass=G;r.uploadPhotoScreenId=I;r.editPhotoScreenId=K;var t=parseInt(t,10),y=parseInt(y,10),z=parseInt(z,10),D=parseInt(D,10),L={elementName:a.elementName};C&&ia.large&&(L.classes=["capture_userphoto"]);r.mainDiv=j.createDiv(L);r.closeDiv="</div>";a.customText||(a.customText={});var L=a.customText.profilePhotoTitlePhotoManager||"Profile Photo",N=a.customText.editProfileInstructionPhotoManager||"Select a region of the image to use for your photo.",
R=a.customText.chooseNewPhotoLinkPhotoManager||"Choose new photo",Q=a.customText.removePhotoLinkPhotoManager||"Remove photo",S=a.customText.editPhotoLinkPhotoManager||"Edit photo",T=a.customText.chooseDifferentPhotoLinkPhotoManager||"Choose a different photo",U=a.customText.editPhotoButtonTextPhotoManager||"Save",Y=a.customText.uploadPhotoButtonTextPhotoManager||"Upload",aa=a.customText.removePhotoButtonTextPhotoManager||"Remove",ba=a.customText.removePhotoCancelButtonTextPhotoManager||"Cancel",ca=
a.customText.uploadNewPhotoInstructionPhotoManager||"",da=a.customText.uploadNextStepInstructionPhotoManager||"",ea=a.customText.editPhotoPreviewTitlePhotoManager||"";r.editProfilePhotoTitle=a.customText.editProfilePhotoTitlePhotoManager||"Profile Photo";r.editProfileInstruction=N;r.profilePhotoTitle=L;r.prefixFieldName=s+a.name;r.editPhotoPreviewTitle=ea;Lb(document.getElementById(I));Lb(document.getElementById(K));r.profileImage='<div id="'+s+a.name+'_profile_pic" class="'+G+"capture_profile_pic_display"+
(C?"":" capture_default")+'">';C&&ia.large&&(r.profileImage+=j.createImage({src:ia.large.value,imageId:a.name+"_profile_pic_image"}));r.profileImage+="</div>";r.photoLinks=j.createListOfLinks([{listItemId:"upload_photo",listItemClasses:[],anchorText:R,anchorHref:"#",anchorClasses:["capture_upload_photo_link"],anchorId:"upload_photo_link"},{listItemId:"edit_photo",listItemClasses:[],anchorText:S,anchorHref:"#",anchorClasses:["capture_edit_photo_link"],anchorId:"edit_photo_link",hide:!C},{listItemId:"remove_photo",
listItemClasses:[],anchorText:Q,anchorHref:"#",anchorClasses:["capture_remove_photo_link"],anchorId:"remove_photo_link",hide:!C}],["options"]);r.uploadImage=C&&ia.large?j.createImage({src:ia.large.value,imageId:a.name+"_profile_pic_image_upload"}):"";r.editImage=C&&ia.original?j.createImage({src:ia.original.value+M+(new Date).getTime(),imageId:a.name+"_profile_pic_image_edit"}):"";r.cropImage=C&&ia.original?j.createImage({src:ia.original.value+M+(new Date).getTime(),imageId:a.name+"_profile_pic_image_edit_crop",
classes:["capture_profile_pic_original"]}):"";r.photoChooserErrors=j.createDiv({elementId:"photo_chooser_errors",classes:["capture_photo_chooser_form_error"]});r.photoChooserErrors+="</div>";var Z=ua();j.domHelpers.createIFrame(Z,a.name+"_upload_photo_form");r.uploadFormOpen=o.form({action:"widget/photo/upload_photo.jsonp",elementAttributes:{enctype:"multipart/form-data"},transactionId:Z,name:a.name+"_upload_photo_form",elementName:a.name+"_upload_photo_form",listenToFields:!1});r.uploadFileField=
j.createInput({elementName:"photo",elementId:"photo_chooser",justElement:!0,elementAttributes:{"data-capturefield":a.name},type:"file"});r.uploadSubmitButton=j.createInput({elementName:"photo_submit",elementId:"photo_submit",value:Y,classes:["capture_btn","capture_primary"],justElement:!0,type:"submit"});r.uploadFormClose="</form>";var $=ua();j.domHelpers.createIFrame($,a.name+"_crop_photo_form");r.editFormOpen=o.form({action:"widget/photo/crop_photo.jsonp",transactionId:$,name:a.name+"_crop_photo_form",
elementName:a.name+"_crop_photo_form",listenToFields:!1});r.editFormOpen+=j.createDiv({elementName:"",classes:["capture_popup-arrow"],type:"div"});r.editFormOpen+="</div>";r.editFormOpen+=j.createInput({elementName:"width",elementId:"width",justElement:!0,type:"hidden"});r.editFormOpen+=j.createInput({elementName:"height",elementId:"height",justElement:!0,type:"hidden"});r.editFormOpen+=j.createInput({elementName:"x",elementId:"x",justElement:!0,type:"hidden"});r.editFormOpen+=j.createInput({elementName:"y",
elementId:"y",justElement:!0,type:"hidden"});r.editSubmitButton=j.createInput({elementName:"edit_photo_submit",elementId:"edit_photo_submit",value:U,classes:["capture_btn","capture_primary"],justElement:!0,type:"submit"});r.editFormClose="</form>";r.chooseDifferentPhotoLink=j.createAnchor({elementHref:"#",elementText:T,elementId:a.name+"_different_photo_link"});b.custom?u.push({handler:function(){var b=document.getElementById(s+a.name+"_parent");b.innerHTML=H(r,b.innerHTML);u.push({elementName:a.name+
"_upload_photo_form",handler:db,eventType:"submit"});u.push({elementName:a.name+"_crop_photo_form",handler:db,eventType:"submit"});tb(Z);tb($)},eventType:"render"}):(m+=H(r,'{| mainDiv |}      {| profileImage |}     {| photoLinks |}     &nbsp;  {| closeDiv |}  <\!-- hidden crop form --\> <div style="display: none;">     {| editFormOpen |}     <div class="capture_footer">         {| chooseDifferentPhotoLink |}         {| editSubmitButton |}     </div>     {| editFormClose |} </div>  <\!-- hidden upload form --\> <div style="display: none;">     {| uploadFormOpen |}     {| uploadFileField |}     <div class="capture_footer">         {| uploadSubmitButton |}     </div>     {| uploadFormClose |} </div>  <\!-- hidden upload screen --\> <div style="display: none;">     <div id="{| uploadPhotoScreenId |}" class="janrain-capture-ui capture-ui-content capture_med_footer">         <div class="capture_header">             <h1>{| profilePhotoTitle |}</h1>         </div>{| photoChooserErrors |}         <div id="{| prefixFieldName |}_profile_pic_upload" class="{| profilePicClass |}capture_profile_pic_upload capture_default">             {| uploadImage |}             &nbsp;         </div>         <div id="{| prefixFieldName |}_profile_pic_uploadform_container" class="capture_uploadPhoto_container">         </div>     </div> </div>  <\!-- hidden edit photo screen --\> <div style="display: none;">     <div id="{| editPhotoScreenId |}" class="janrain-capture-ui capture-ui-content capture_med_footer">         <div class="capture_header">             <h1>{| editProfilePhotoTitle |}</h1>         </div>         <div class="{| profilePicClass |}profile_pic_edit_container">             <h2>{| editPhotoPreviewTitle |}</h2>             <div id="{| prefixFieldName |}_profile_pic_edit" class="{| profilePicClass |}capture_profile_pic_edit capture_default">                 {| editImage |}                 &nbsp;             </div>         </div>         <div id="{| prefixFieldName |}_profile_pic_editPhoto_container" class="capture_editPhoto_container">             <h2>{| editProfileInstruction |}</h2>             {| cropImage |}         </div>     </div> </div> '),
m+="</div>",u.push({elementName:a.name+"_upload_photo_form",handler:db,eventType:"submit"}),u.push({elementName:a.name+"_crop_photo_form",handler:db,eventType:"submit"}),tb(Z),tb($));u.push({eventType:"render",handler:function(){var b=document.getElementById(s+a.name+"_different_photo_link");x(b,"click",c);b=document.getElementById(s+a.name+"_crop_photo_form");document.getElementById(s+a.name+"_profile_pic_editPhoto_container").appendChild(b);x(b,"submit",n)}});u.push({elementName:"upload_photo_link",
handler:c,eventType:"click"});janrain.settings.capture.editPhotoAfterUpload&&janrain.events.onCapturePhotoUploadSuccess.addHandler(function(){E=!1;p()});u.push({elementName:"edit_photo_link",handler:function(a){p();A(a)},eventType:"click"});u.push({elementName:"remove_photo_link",handler:function(a){var b=B(a),d=g(b);if(!document.getElementById(d+"remove_photo_contain")){var c=j.domHelpers.createDiv({elementId:"remove_photo_contain",fieldPrefix:d,classes:["capture_popup_container pad"]}),b=j.domHelpers.createAnchor({elementHref:"#",
fieldPrefix:d,elementText:aa,elementId:"confirm_remove_photo_link"}),e=j.domHelpers.createAnchor({elementHref:"#",fieldPrefix:d,elementId:"cancel_remove_photo_link",elementText:ba});c.innerHTML='<div class="capture_popup-arrow"></div><p>Can&#39;t Be Undone</p>';c.appendChild(b);c.appendChild(e);document.getElementById(d+"remove_photo").appendChild(c);var h=function(a){var b=[d+"createFormAndPostSubmit",d+"confirm_remove_photo_link",d+"remove_photo_link"],e=B(a).getAttribute("id")||"";!l(b,B(a).getAttribute("id"))&&
0>e.indexOf(d+"createFormAndPostSubmit_")&&(c.innerHTML="",Lb(c),Gb(document,"click",h),A(a))};x(e,"click",h);x(document,"click",h);x(b,"click",function(a){j.domHelpers.createFormAndPost({elementAction:janrain.settings.capture.captureServer+"/widget/photo/delete_photo.jsonp",fieldPrefix:d,captureScreen:w,needsResponse:!0,elementId:"delete_photo_form",callback:function(){}});A(a)});A(a)}},eventType:"click"});return m},datePicker:function(a){var b="",c={provideOpenButton:!0};a.type="text";$(c,a.settings||
{});b+=j.wrapFormItemStart(a);b+=j.createInput(a);b+=j.wrapFormItemEnd(a);u.push({elementName:a.elementName,eventType:"render",handler:function(a){a=document.getElementById(a);c.targetElement=a;new Ta(c)}});j.attachFieldEventHandlers(a);a.type="datePicker";return b},slider:function(a){if(a.publicDisplay&&"undefined"!==typeof a.displayPublic&&!1===a.displayPublic)return"";var b=j.createDiv({elementName:"slider capture_form_item"}),c=V.prototype.render.html,e=a.fieldPrefix||F,f="initialPosition"in a?
a.initialPosition:0,g=a.value&&0<=a.value.score?a.value.score:f,b=b+("<label>"+a.label+"</label>"),b=b+j.createDiv({elementName:a.elementName+"_container",classes:["capture_slider_container"]}),b=b+j.createDiv({elementName:a.elementName+"_base",classes:["capture_slider_base"]}),b=b+j.createDiv({elementName:a.elementName+"_marker",classes:["capture_slider_marker"]}),b=b+'</div></div><div class="capture_slider_list"><ul>',f=0,i;for(;i=a.legend_items[f];f++)b+="<li>"+i+"</li> ";b+="</ul></div></div>";
a.publicPrivateToggle&&(b+=j.createPublicPrivateToggle(a));b+=c.input({elementName:a.elementName+"[score]",elementId:a.elementName+"_score",name:a.elementName+"_score",rendererChildFieldName:"score",rendererFieldName:a.elementName,type:"hidden",validation:!1,value:a.value&&0<=a.value.score?a.value.score:"initialValue"in a?a.initialValue:""});b+="</div>";u.push({elementName:a.elementName+"_marker",eventType:"render",handler:function(){document.getElementById(e+a.elementName+"_marker").style.left=(0<=
g?g:"initialPosition"in a?a.initialPosition:0)+"%"}});if(!0===a.enabled){var k=!1;u.push({elementName:a.elementName+"_marker",eventType:Md,handler:function(b){k=!0;var d=document.getElementById(e+a.elementName+"_base"),c=document.getElementById(e+a.elementName+"_score"),d=d.getBoundingClientRect(),h=d.width?d.width:d.right-d.left,d=new fe;d.setElement(document.getElementById(e+a.elementName+"_marker")).setElementBoundary(document.getElementById(e+a.elementName+"_container")).setCallback(function(a){c.value=
Math.round(100*(a.pos_x/h));ra(c)}).drag(b);ed.push(d);Rb&&clearTimeout(Rb)}});u.push({elementName:a.elementName+"_marker",eventType:cc,handler:function(){var b=document.getElementById(e+a.elementName+"_marker"),d=document.getElementById(e+a.elementName+"_base"),c=document.getElementById(e+a.elementName+"_score"),b=parseInt(Ud(b.id,"left")),d=d.getBoundingClientRect();c.value=Math.round(100*(b/(d.width?d.width:d.right-d.left)))}});u.push({elementName:a.elementName+"_container",eventType:"mouseover",
handler:function(){document.getElementById(e+a.elementName+"_container").style.cursor="pointer"}});u.push({elementName:a.elementName+"_container",eventType:"click",handler:function(b){if(!0===k)k=!1;else{var d=document.getElementById(e+a.elementName+"_marker"),c=document.getElementById(e+a.elementName+"_base"),h=document.getElementById(e+a.elementName+"_score"),f=c.getBoundingClientRect(),g=f.width?f.width:f.right-f.left,j=b.clientX-ge(c).x,b=parseInt(Ud(d.id,"left")),b=isNaN(b)?0:b;(new fe).setElement(d).setAcceleration("sinusoidal").setDuration(500).startPosition(b).endPosition(j).setDirection("horizontal").setCallback(function(){h.value=
Math.round(100*(j/g));ra(h)}).animate()}}})}return b},radioCollection:function(a){for(var b=a.fieldPrefix||F,c=j.createDiv({elementName:a.elementName,classes:a.classes||""}),e=0;e<a.collection.length;e++)c+="<div class='capture_radio_toggle",c+=(0===e?" capture_toggled":"")+"'>",c+="<input type='radio' id='"+b+"radio_"+a.collection[e].elementName+"' name='capture_collection_"+a.elementName+"' class='radio-input'"+(0===e?"checked='true' ":"")+"/>",c+="<label ",c+="class='capture_radio_label' ",c+=
"for='"+b+"radio_"+a.collection[e].elementName+"'>"+a.collection[e].label+" ",c+="</label></div>",u.push({elementName:"radio_"+a.collection[e].elementName,handler:function(b){xa(b,a)},eventType:"click"});j.autoSelectPreferredTab(a,"radio");return c+"</div>"},tabCollection:function(a){for(var b,c=[],e=j.createDiv({elementName:a.elementName,classes:a.classes||""}),f=0;f<a.collection.length;f++)b={},b.listItemId="tab_li_"+a.collection[f].elementName,b.listItemClasses=["capture_tab_toggle"],0===f&&b.listItemClasses.push("capture_toggled"),
b.anchorId="tab_"+a.collection[f].elementName,b.anchorText=a.collection[f].label,b.anchorHref="#",c.push(b),u.push({elementName:"tab_"+a.collection[f].elementName,handler:function(b){xa(b,a)},eventType:"click"});j.autoSelectPreferredTab(a,"tab");e+=j.createListOfLinks(c,["capture_tabs"]);return e+"</div>"},newsletterSubscriptions:function(a){var b="",c=a.startHTML||"",e=a.endHTML||"",f=a.delimiter||"",g=q(a.value)?a.value:[],i="capture_newsletter_checkbox"+(q(a.classes)?" "+a.classes.join(" "):""),
k=g.length,l=(a.fieldPrefix||F)+"form_item_"+a.elementName,n=a.bulkUpdate,m,o,s;if(0<k){b+=j.wrapFormItemStart(a);b+=j.createLabel(a);b+=c;for(c=0;c<k;++c)s=g[c],m=s.display_name||"",o="","active"===s.status&&(o='checked="checked"'),b+='<label><input type="checkbox" class="'+i+'" data-subId="'+s.list_id+'" value="'+s.list_id+'" name="'+a.name+'[]" '+o+">"+m+"</label>"+f;f&&(b=b.slice(0,-f.length));b=b+e+j.createTip(a);b+=j.wrapFormItemEnd(a);n||u.push({handler:function(){for(var a=U("capture_newsletter_checkbox",
document.getElementById(l)),b=0,d=a.length;b<d;++b)x(a[b],"change",function(a){var b=B(a),a=b.getAttribute("data-subId"),d=b.checked?"active":"inactive",b=ua(),a=sa({list_id:a,token:Y,subscription_status:d,capture_transactionId:b});Wa("/widget/update_subscription.jsonp",a);Xa(b)})},eventType:"render"})}return b},pluralIterator:function(a){var b="",c="",e=a.format||"",f=a.startHTML||"",g=a.endHTML||"",j=a.delimiter||"",i="undefined"===typeof a.emptyMessage?"There are no "+a.schemaId+".":a.emptyMessage,
a=q(a.value)?a.value:[],k=a.length;if(0===k)return i;for(i=0;i<k;++i)c+=H(a[i],e)+j;j&&(c=c.slice(0,-j.length));c&&(b+=f+c+g);return b},datetime_public:function(a){if("undefined"!==typeof a.displayPublic&&!1===a.displayPublic)return"";var b,c,e,f=a.format||"{month} {d}{ord}, {yyyy} at {hour}:{minute} {ampm}",g=(new Date).getFullYear(),i="01",k="01",l="NA",n="NA",m="NA",o;if("undefined"===typeof a.value||""===a.value)return"";b=a.value.split(" ");c=b.length;for(o=0;o<c;++o)e=b[o].split("-"),3===e.length?
(g=e[0],i=e[1],k=e[2]):(e=b[o].split(":"),3===e.length?(l=e[0],n=e[1],m=e[2].split(".")[0]):(e=b[o].split("/"),3===e.length&&(g=e[0],i=e[1],k=e[2])));b=new Date;"NA"!==l||"NA"!==n||"NA"!==m?(b.setUTCHours(l),b.setUTCMinutes(n),b.setUTCSeconds(m),b.setUTCMilliseconds(0),b.setUTCMonth(i-1),b.setUTCDate(k),b.setUTCFullYear(g)):(b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0),b.setMonth(i-1),b.setDate(k),b.setFullYear(g));return"[object Date]"!==Object.prototype.toString.call(b)||isNaN(b.getTime())?
a.value:a.justString?wa(f,b,{monthNames:a.monthNames,dayNames:a.dayNames}):j.wrapStringData(a,wa(f,b,{monthNames:a.monthNames,dayNames:a.dayNames}))}},widget:{login:function(){u.push({handler:function(){var a=document.getElementById("janrainEngageEmbed"),b=document.getElementById(F+"login_widget");if(!janrain.settings.tokenAction||"event"===janrain.settings.tokenAction){var c=ua();janrain.engage.signin.appendTokenParams({capture_transactionId:c},!0,!0)}a?(b.appendChild(a),a.style.display="block",
janrain.engage.signin.removeNotice()):(a=document.createElement("div"),a.id="janrainEngageEmbed",document.body.appendChild(a),b.appendChild(a),a.style.display="block",janrain.engage.signin.widget.init());md||ab()},eventType:"render"});var a=j.createDiv({elementName:"login_widget",classes:["login_widget"]});return a+"</div>"},share:function(a,b){b=b?J.parse(b):{text:"Share"};u.push({elementName:"share_widget",eventType:"click",handler:function(){janrain.engage.share.show()}});var c=j.createDiv({elementName:"share_widget",
classes:["share_widget"]});return c+=b.text+" </div>"}}};var He=function(){function a(a,b,c){a={required:a,type:b};return"object"===typeof c?$(a,c):a}function b(c,d){return a(!0,c,d)}function c(b,d){return a(!1,b,d)}function e(a,b){T(g,function(c,d){T(d,function(d,e){a.call(b,c,d,e)})})}var f={name:b("string"),elementName:b("string"),value:c("array",{subtype:"string"}),options:b("array",{subtype:"object",subtypeDefinition:{value:c("string"),label:c("string")}})},g={data:{engageCookieData:{name:"Engage Cookie Data",
definition:{cookieName:b("string")}},localStorageData:{name:"Local Storage Data",definition:{fieldPrefix:c("string"),elementId:c("string"),elementName:b("string"),classes:c("array",{subtype:"string"}),data:b("string")}},stringData:{name:"String Data",definition:{displayPublic:b("boolean"),value:c("string"),displaySavedValue:c("boolean"),justString:c("boolean"),hideWhenValue:c("string")}},imageData:{name:"Image Data",definition:{value:b("string"),returnImageTag:c("boolean"),elementName:c("string"),
hide:c("boolean"),classes:c("array",{subtype:"string"}),elementId:c("string")}}},html:{anchor:{name:"HTML Anchor",definition:{elementClasses:c("array",{subtype:"string"}),elementText:b("text"),fieldPrefix:c("string"),elementHref:b("string"),elementName:b("string"),target:c("string"),name:b("string")}},textarea:{name:"Text Area",definition:{elementClasses:c("array",{subtype:"string"}),fieldPrefix:c("string"),elementId:c("string"),rows:c("number"),name:b("string"),placeholder:c("string"),value:c("text"),
publicPrivateToggle:c("boolean")}},select:{name:"Select",definition:{elementClasses:c("array",{subtype:"string"}),fieldPrefix:c("string"),rendererFieldName:c("string"),rendererChildFieldName:c("string"),dontShowTip:c("boolean"),showFieldWhere:c("string"),name:b("string"),elementName:b("string"),options:b("array",{subtype:"object",subtypeDefinition:{text:b("string"),value:c("string")}}),publicPrivateToggle:c("boolean")}},multi:{name:"Mutli",definition:f},multiCheckbox:{name:"Checkboxes",definition:f},
multiRadio:{name:"Radio Buttons",definition:f},input:{name:"Input",definition:{type:b("string"),fieldPrefix:c("string"),elementId:c("string"),elementName:b("string"),justElement:c("boolean"),collection:c("boolean"),rendererFieldName:c("string"),rendererChildFieldName:c("string"),hide:c("boolean"),elementValue:c("string"),value:c("string"),placeholder:c("string"),checked:c("boolean"),modify:c("boolean"),publicPrivateToggle:c("boolean"),profileStoragePath:c("boolean")}},button:{name:"Button",definition:{fieldPrefix:c("string"),
elementId:c("string"),elementName:b("string"),elementClasses:c("array",{subtype:"string"}),type:c("string"),hide:c("boolean"),name:b("string"),value:c("string"),elementContent:c("string"),modify:c("boolean")}},form:{name:"Form",definition:{elementAttributes:c("object",{subtype:"string"}),localFieldPrefix:c("string"),classes:c("array",{subtype:"string"}),action:b("string"),transactionId:b("string"),serverNextScreen:c("boolean"),hideOnSubmit:c("boolean"),engageTokenRequired:c("boolean")}},div:{name:"Div",
definition:{fieldPrefix:c("string"),elementId:c("string"),elementName:b("string"),elementAttributes:c("object",{subtype:"string"}),classes:c("array",{subtype:"string"}),type:c("string"),name:b("string"),elementText:b("text")}},close:{name:"Close",definition:{element:b("string"),type:c("string")}}},capture:{table:{name:"Table",definition:{th:b("object",{definition:{display:c("boolean"),cols:c("array",{subtype:"string"})}}),rows:b("array",{subtype:"object",subtypeDefinition:{cells:b("array",{subtype:"object",
subtypeDefinition:{elementValue:"string"}})}})}},countrySelect:{name:"Country Select",definition:{customText:c("object",{definition:{countryLabel:c("string")}})}},stateSelect:{name:"State Select",definition:{customText:b("object",{definition:{stateLabel:c("string")}}),noCanadianProvinces:c("boolean")}},keepMeLoggedIn:{name:"Keep Me Logged In",definition:{fieldPrefix:b("boolean"),label:c("string"),name:b("string"),checked:c("boolean")}},captcha:{name:"CAPTCHA",definition:{name:b("string"),label:c("string")}},
mergeAccounts:{name:"Merge Accounts",definition:{value:b("string"),customText:c("object",{subtype:"string",definition:{connectRadio:c("string"),connecetLegacyRadio:c("string"),createRadio:c("string"),foundExistingAccount:c("string"),moreInfoHover:c("string"),moreInfo:c("string"),createButton:c("string"),connectButton:c("string")}}),name:b("string"),traditionalMergeScreen:b("string")}},publicProfileLink:{name:"Public Profile Link",definition:{elementHref:c("string"),elementAttributes:c("object",{subtype:"string"}),
addUUIDToLink:c("boolean")}},linkAccounts:{name:"Link Accounts",definition:{value:c("object",{definition:{providers:b("array",{subtype:"string"}),displayNames:b("array",{subtype:"string"}),identifiers:b("array",{subtype:"string"}),prettyProviders:b("array",{subtype:"string"}),customProviders:b("array",{subtype:"string"})}}),customText:c("object",{subtype:"string"}),fieldPrefix:c("string"),name:c("string"),linkAccountContainer:b("string"),providerIconSize:c("number"),displayFormatKnown:c("string"),
customIcons:c("boolean"),customAddLinks:c("boolean"),customAddLinkFormat:c("string")}},errorMessages:{name:"Error Messages",definition:{}},savedProfileMessage:{name:"Saved Profile Message",definition:{}},nameFull_public:{name:"Name Full Public",definition:{displayPublic:b("boolean"),justString:c("boolean"),value:b("object",{definition:{firstname:c("string"),middlename:c("string"),lastname:c("string")}})}},nameFull:{name:"Name Full",definition:{name:b("string"),publicPrivateToggle:b("boolean"),displayPublic:b("boolean"),
value:c("object",{definition:{firstname:c("string"),middlename:c("string"),lastname:c("string")}}),placeholder:c("object",{definition:{firstname:c("string"),middlename:c("string"),lastname:c("string")}})}},dateselect_public:{name:"Date Select Public",definition:{displayPublic:b("boolean"),justString:c("boolean"),format:c("string"),value:b("object",{definition:{dateselect_year:b("number"),dateselect_month:b("number"),dateselect_day:b("number")}})}},dateselect:{name:"Date Select",definition:{customText:c("object",
{definition:{yearLabelDateSelect:c("string"),monthLabelDateSelect:c("string"),dayLabelDateSelect:c("string"),fieldPrefix:c("string"),name:b("string"),format:c("array",{subtype:"string"}),monthStart:c("number"),monthEnd:c("number"),dayStart:c("number"),dayEnd:c("number"),yearStart:c("number"),yearEnd:c("number"),label:c("string"),publicPrivateToggle:c("boolean"),displayPublic:b("boolean"),tip:c("string"),datePickerSettings:c("object"),elementName:b("string")}})}},addressFull_public:{name:"Address Full Public",
definition:{displayPublic:c("boolean"),value:b("object",{definition:{streetaddress:c("string"),streetaddress2:c("string"),stateprovince:c("string"),zippostalcode:c("string"),country:c("string"),city:c("string")}})}},addressFull:{name:"Address Full",definition:{name:b("string"),publicPrivateToggle:c("boolean"),displayPublic:c("boolean"),value:c("object",{definition:{streetaddress:c("string"),streetaddress2:c("string"),stateprovince:c("string"),zippostalcode:c("string"),country:c("string"),city:c("string")}}),
customText:c("object",{definition:{stateLabel:c("string"),countryLabel:c("string")}}),placeholder:c("object",{definition:{streetaddress:c("string"),streetaddress2:c("string"),stateprovince:c("string"),zippostalcode:c("string"),country:c("string"),city:c("string")}})}},backButton:{name:"Back Button",definition:null},partial:{name:"Partial",definition:{layout:b("string")}},photoManager:{name:"Photo Manager",definition:{elementName:b("string"),fieldPrefix:c("string"),previewSizeWidth:c("number"),previewSizeHeight:c("number"),
originalMaxWidth:c("number"),originalMaxHeight:c("number"),name:b("string"),value:c("array",{subtype:"object",subtypeDefinition:{type:b("string")}}),customText:c("object",{definition:{profilePhotoTitlePhotoManager:c("string"),editProfilePhotoTitlePhotoManager:c("string"),editProfileInstructionPhotoManager:c("string"),chooseNewPhotoLinkPhotoManager:c("string"),removePhotoLinkPhotoManager:c("string"),editPhotoLinkPhotoManager:c("string"),chooseDifferentPhotoLinkPhotoManager:c("string"),editPhotoButtonTextPhotoManager:c("string"),
uploadPhotoButtonTextPhotoManager:c("string"),removePhotoButtonTextPhotoManager:c("string"),removePhotoCancelButtonTextPhotoManager:c("string"),uploadNewPhotoInstructionPhotoManager:c("string"),uploadNextStepInstructionPhotoManager:c("string"),editPhotoPreviewTitlePhotoManager:c("string")}})}},datePicker:{name:"Date Picker",definition:{monthPreviousText:c("string"),monthNextText:c("string"),openOnTargetElementFocus:c("boolean"),provideOpenButton:c("boolean"),hasCloseButton:c("boolean"),minimumSelectableDate:c("string"),
maximumSelectableDate:c("string"),monthAndYearSelectable:c("boolean"),defaultDate:c("string"),arrowKeyNavigation:c("boolean"),format:c("string"),calendarTitleFormat:c("string"),monthNames:c("array",{subtype:"string"}),weekStartsOnMonday:c("boolean"),daysOfWeek:c("array",{subtype:"string"}),additionalClasses:c("array",{subtype:"string"})}},slider:{name:"Slider",definition:{publicDisplay:c("boolean"),displayPublic:c("boolean"),fieldPrefix:c("string"),initialPosition:c("number"),label:b("string"),elementName:b("string"),
legend_items:b("array",{subtype:"string"}),publicPrivateToggle:c("boolean"),enabled:c("boolean"),value:c("object",{definition:{score:c("number")}})}},radioCollection:{name:"Radio Collection",definition:{classes:c("string"),fieldPrefix:c("string"),elementName:c("string"),collection:b("array",{subtype:"object",subtypeDefinition:{elementName:b("string")}})}},tabCollection:{name:"Tab Collection",definition:{classes:c("string"),elementName:c("string"),collection:b("array",{subtype:"object",subtypeDefinition:{elementName:b("string")}})}},
newsletterSubscriptions:{name:"Newsletter Subscriptions",definition:{format:c("string"),startHTML:c("string"),endHTML:c("string"),delimiter:c("string"),value:c("array",{subtype:"string"}),classes:c("array",{subtype:"string"}),fieldPrefix:c("string"),elementName:b("string")}},pluralIterator:{name:"Plural Iterator",definition:{format:c("string"),startHMTL:c("string"),endHTML:c("string"),delimiter:c("string"),emptyMessage:c("string"),value:c("array",{subtype:"object"})}},datetime_public:{name:"Date Time Public",
definition:{displayPublic:c("boolean"),format:c("string"),value:c("string"),justString:c("boolean")}}},widget:{login:{name:"Login Widget",definition:{}},share:{name:"Share Widget",definition:{}}}},j=[];e(function(a,b){j.push(a+"."+b)});var i=g,f=i.capture,i=i.html;f.dateselect.definition.customText.definition.datePickerSettings=f.datePicker.definition;f.backButton.definition=$({},i.button.definition);e(function(a,b,d){d.path=a+"."+b;d.group=a;d.name=b;$(d.definition,{schemaId:c("string"),label:c("string"),
tip:c("string")});"html"===a?d.definition.element=b:(d.definition.element=a,d.definition.type=b)});return{listComponents:function(){return j},componentDefinition:function(a){0>a.indexOf(".")&&(a="html."+a);return Ba(g,a)}}}(),td=!0,N={},Ya={addCustomLink:function(a,b,c){var e=b.fieldPrefix||F,f=document.createElement("li");f.className="capture_custom_add_linkedaccount";f.setAttribute("data-captureprovider",a);f.innerHTML=H({provider:a},b.customAddLinkFormat);c&&c.parentNode?c.parentNode.insertBefore(f,
c):document.getElementById(e+b.name+"_linkedproviderlist").appendChild(f)},unLinkAccountSuccessCallback:function(a,b){janrain.events.onCaptureProfileUnlink.fire({provider:b});var c=a.value.providers.indexOf(b);T(a.value,function(a,b){q(b)&&b.splice(c,1)})},unLinkAccount:function(a,b,c){A(a);if(!("keypress"===a.type&&a.keyCode!==Bb)){var e=B(a);if(k(e).has("capture_remove_linkedaccount")){var f=this.completeUnLinkAccount;b.confirmRemoval?("undefined"===typeof bc&&(bc=new Ke,bc.setTitle(ha.confirmRemoveLinkedTitle||
"Remove Linked Account?").setMessage(ha.confirmRemoveLinkedMessage||"Are you sure you want to remove this linked account?").setButtons(ha.confirmRemoveLinkedNoText||"Cancel",ha.confirmRemoveLinkedYesText||"Yes").setCallback(function(a){1===a.index&&f(e,b,c);bc.close()})),bc.open()):f(e,b,c)}}},completeUnLinkAccount:function(a,b,c){var e=a.getAttribute("data-captureidentifier"),f=a.getAttribute("data-captureprovider");b.customAddLinks&&Ya.addCustomLink(f,b,a.parentNode);Lb(a.parentNode);j.domHelpers.createFormAndPost({elementAction:janrain.settings.capture.captureServer+
"/widget/profile.jsonp",elementId:"getUserData_form",fieldPrefix:b.fieldPrefix||F,captureScreen:c,needsResponse:!0,callback:function(){Ya.unLinkAccountSuccessCallback(b,f)},fields:[{elementName:"identifier[]",elementType:"hidden",elementValue:e},{elementName:"identifier_to_remove",elementType:"hidden",elementValue:e}]})},openInModal:function(a,b,c){janrain.engage&&janrain.engage.signin&&(janrain.engage.signin.setNoReturnExperience(!0),janrain.engage.signin.appendTokenParams({linkAccounts:!0,currentScreen:b},
!0));e(document.getElementById(c));A(a)},linkWithCustomLink:function(a,b){if(!("keypress"===a.type&&a.keyCode!=Bb)){var c=B(a),c=Mb(c,"li");k(c).has("capture_custom_add_linkedaccount")&&(c=c.getAttribute("data-captureprovider"),janrain.engage&&janrain.engage.signin&&(janrain.engage.signin.setNoReturnExperience(!0),janrain.engage.signin.appendTokenParams({linkAccounts:!0,currentScreen:b},!0),janrain.engage.signin.triggerFlow(c)))}},renderHandler:function(a,b){var c=document.getElementById(a);document.getElementById(b).appendChild(c)}},
ib=!0,re=0,se,Rb=0,wd=0,gd=janrain.settings.capture.autoSaveUpdateInterval||1E4,hd=janrain.settings.capture.autoSaveDelay||janrain.settings.capture.autoSaveInterval||1E4;Bd("accessDenied","capture_access","Sorry. Access denied.");Bd("retrievingUserData","capture_retrieving","Please wait while we retrieve your user data.");Bd("dialog","capture_dialog","",{layout:"captureDialogBuiltIn",modal:!0,modalLoadOnLoad:!0,source:"server"});var id=[],Ld={};return{modal:{close:function(){"object"==typeof y&&y.close()},
closeConfirm:function(){"object"==typeof y&&y.closeConfirm()},open:function(a){hb=!0;var b=a||D.flow.defaultScreen;if("object"==typeof y&&(a&&janrain.capture.ui.renderScreen(b),a=D.div))y.setShowContentOnLoad(!0),y.addContent(a).show(),janrain.events.onCaptureContentChange.fire()},setBorder:function(a){"object"===typeof y&&(y.setBorder(a),y.refresh({center:!0}));return!0},setBorderColor:function(a){"object"===typeof y&&(y.setBorderColor(a),y.refresh());return!0},setBorderOpacity:function(a){"object"===
typeof y&&(y.setBorderOpacity(a),y.refresh());return!0},setBorderRadius:function(a){"object"==typeof y&&(y.setBorderRadius(a),y.refresh());return!0},setOverlayZIndex:function(a){"object"==typeof y&&(y.setZIndex(a),y.refresh());return!0}},start:function(a,b){if(janrain.settings.capture.hasSettings&&janrain.settings.capture.appId&&janrain.settings.capture.clientId){var c=ca()+"/widget_data/settings/"+janrain.settings.capture.appId+"/"+janrain.settings.capture.clientId+".js";hc(c,function(){f(a,b)}).setTimeoutCallback(function(){janrain.settings.capture.hasSettings=
!1;G.forceError("Failed to load capture settings.");f(a,b)}).load()}else f(a,b)},hasActiveSession:function(){return!!Y},renderComponent:fb().renderField,listComponents:He.listComponents,componentDefinition:He.componentDefinition,render:function(a,c){var e=a;he&&"object"===typeof janrain.settings.capture.flowInjection&&(e=be(e,janrain.settings.capture.flowInjection));janrain.settings.capture.hasSettings&&ve(e,Cd);Va||(Va=b());e.i18nStrings&&(ha=e.i18nStrings);ha.validatingText&&(Fe=ha.validatingText);
if(e.version)zc=e.version;else throw Error("MissingVersionError: Missing version.");jd(e);var f=e;Jd=f.hasTraditionalAccount;ld=f.form;if(Jd)for(var f=U("janrain_traditional_account_only"),g=f.length,i=0;i<g;i++)f[i].style.display="block";ue(e);e=new fb;f=!1;$b&&Vb&&(f=janrain.settings.capture.registerFlow||"socialRegister");f=n.oneTimeRender||f||janrain.settings.capture.screenToRender||n.defaultScreen;e.setScreenData(f,n.screens[f]);if(c)for(var j in c)c[j].id&&c[j].value&&(e=document.getElementById(c[j].id),
e.value=c[j].value,"radio"===c[j].type&&(e.checked=c[j].checked,c[j].checked&&e.click()))},renderScreen:function(a,b){qc=!1;b||vb.push(D);(new fb).setScreenData(a,n.screens[a])},applySettings:function(a){Cd=a},setHandler:function(a,b,c){this.setFieldAttribute(a,b+"Handler",c)},setFieldAttribute:function(a,b,c){Wb.push({field:a,attribute:b,value:c})},setRenderer:function(a,b,c){V.prototype.render[a].helpers=ud;V.prototype.render[a][b]=c},setValidator:function(a,b){w.prototype[a]=b},registerFunction:function(a,
b){Ld[a]=b},addRenderer:function(a,b,c){this.setRenderer(a,b,c)},trackLoadedCssFiles:function(a){Kc.push(a)},handleCaptureUniqueResponse:function(a){Uc(a)},handleCaptureResponse:function(a,b){Tc(a,b)},handleErrorResponse:function(a,b){janrain.events.onCaptureError.fire("object"===typeof a?a:"{"+a+"}");if(a.result&&a.result.error&&("access_token_expired"===a.result.error&&(yb(),janrain.events.onCaptureExpiredToken.fire()),"invalid_argument"===a.result.error&&"malformed access token"===a.result.errorDescription&&
(yb(),janrain.events.onCaptureInvalidToken.fire()),"linkError"===a.result.error)){var c=Xc("linkAccounts"),e=c.length?c[0]:{},c=e.messages&&e.messages.errors&&e.messages.errors.linkError?e.messages.errors.linkError:"That account is already in use.",f=z().getCookie("expected_tab");if(y&&y.isOpen()&&(e=e&&e.linkAccountContainer?U("capture_"+e.linkAccountContainer,document.getElementById("janrainModal")):!1))for(var e=U("capture_form_error_container",e[0]),g=0,i=e.length;g<i;g++)e[g].innerHTML='<div class="capture_form_error">'+
c+"</div>";janrain.events.onCaptureLinkAccountError.fire({message:c,provider:f})}c=a.result.customError||a.result.error+": "+a.result.errorDescription;f=a.result.error;Xb&&(e={classes:["capture_fatal_error"],elementId:"fatalerror_"+(new Date).getTime()},f&&e.classes.push("capture_errortype_"+f.replace(/ /g,"").toLowerCase()),f=j.domHelpers.createDiv(e),f.innerHTML=c,Xb.insertBefore(f,Xb.firstChild),janrain.events.onCaptureContentChange.fire());Xb||alert(c);M(a);"function"===typeof b&&b()},createCaptureSession:function(a){La(a)},
endCaptureSession:function(){yb()},addTransactionIds:function(a){nd(a)},getFailedLogins:function(){return wb},setCustomHtml:function(a,b){Oc(a,b)},getEngageCookie:function(a){return Ce(a)},getProfileCookieData:function(a,b){return ac(a,b)},getReturnExperienceData:function(a,b){return Yc(a,b)},federateLogoutCallbackFired:function(a,b){l(Ac,a)||(Ac.push(a),b())},federateNoLogin:function(a){janrain.events.onCaptureFederateNoLogin.fire(a.result);sd(a.transactionId);Bc();Qa=!0},federateSetLoginSuccess:function(a){a&&
a.transactionId&&ya&&ya[a.transactionId]&&(ya[a.transactionId].setLoginSuccess=!0,ya[a.transactionId].eventFiredDueToSlowResponse||Nb(a.transactionId))},federateRefreshToken:function(a){a&&"ok"===a.stat&&(La(a.accessToken,!1,!0),Wc())},scriptLoader:function(a,b){return hc(a,b)},noop:function(){},validationHandler:function(a){var b=document.getElementById(a.elementId),c=new j.validation;c.setParentDiv(b);c.setElement(b);c.valid();a.valid?c.valid():c.notValid(a.reason)},setNoReturnExperience:function(){var a=
new z;a.setUseLocalStorage(!0).setName("janrainLastAuthMethod");a.remove();janrain.engage&&janrain.engage.signin&&janrain.engage.signin.setNoReturnExperience(!0);Sb&&janrain.capture.ui.renderScreen(Sb)},getPublicProfile:function(a,b){pe(a,b)},activateCaptureControl:function(a){s(a)},postCaptureForm:function(a,b){if(!a)throw Error("postCaptureForm requires you supply a form name.");var c=n.fields[a];if(!c)throw Error("postCaptureForm Error: no form called "+a+" found in the flow.");if(!c.element||
"form"!==c.element)throw Error("postCaptureForm Error: the field called "+a+" found in the flow is not a form.");var e=c.fields;if(!e)throw Error("postCaptureForm Error: the form called "+a+" has no fields defined.");for(var f=c.action,c=oa(40),f={fieldPrefix:"capture_postForm_"+c+"_",elementId:a,name:a,fields:[],elementAction:janrain.settings.capture.captureServer+"/"+f,needsResponse:!0},g=0,i=e.length;g<i;g++){var k=n.fields[e[g]],l={};if(b)l.elementValue=b[e[g]];else{var m=Va.getByName(e[g]);l.elementValue=
m?m.getValue():void 0}if(void 0===l.elementValue&&k.validation&&!0===k.validation.required)throw Error("postCaptureForm: a required value was not supplied "+e[g]);l.elementType="hidden";l.fieldPrefix=f.fieldPrefix;l.elementId=e[g]+"_"+c;l.elementName=l.name=e[g];f.fields.push(l)}j.domHelpers.createFormAndPost(f)}}};nc();return{engage:{signin:"loaded"===Ba(janrain,"engage.signin.status")?janrain.engage.signin:gd,share:"loaded"===Ba(janrain,"engage.share.status")?janrain.engage.share:hd,publish:"loaded"===
Ba(janrain,"engage.publish.status")?janrain.engage.publish:id,simpleshare:"loaded"===Ba(janrain,"engage.simpleshare.status")?janrain.engage.simpleshare:Oe},capture:{ui:Qe}}}();janrain.engage=janrain.apps.engage;janrain.capture=janrain.apps.capture;
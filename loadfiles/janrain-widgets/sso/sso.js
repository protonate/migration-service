(function(d){function m(a){var b=document.createElement("a");b.href=a;return b.pathname.replace(/\//g,"_")}if(!("undefined"!==typeof d.JANRAIN&&d.JANRAIN.SSO)){JANRAIN={SSO:{}};JANRAIN.SSO.CAPTURE={};JANRAIN.SSO.ENGAGE={};var g,e,c,h,i,j,l,k;JANRAIN.SSO.CAPTURE.logout=function(a,b){JANRAIN.SSO.logout(a,b)};JANRAIN.SSO.ENGAGE.logout=function(a,b){JANRAIN.SSO.logout(a,b)};JANRAIN.SSO.CAPTURE.refresh=function(a){JANRAIN.SSO.refresh(a)};JANRAIN.SSO.ENGAGE.refresh=function(a){JANRAIN.SSO.refresh(a)};JANRAIN.SSO.CAPTURE.refresh_token=
function(a){if(!("undefined"===typeof e||"undefined"===typeof c)){var b=document.createElement("script");b.src=e+"/capture/v1/refresh_token?v="+(new Date).getTime()+"&redirect_uri="+encodeURIComponent(c)+"&callback="+encodeURIComponent(a)+"&client_id="+encodeURIComponent(j)+"&xdreceiver_uri="+encodeURIComponent(h)+"&redirect_uri="+encodeURIComponent(c)+"&logout_uri="+encodeURIComponent(i)+"&origin="+encodeURIComponent(document.location.protocol+"//"+document.location.host+document.location.pathname);
b.type="text/javascript";a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}};JANRAIN.SSO.CAPTURE.set_login=function(a){if(!("undefined"===typeof e||"undefined"===typeof c)){var b=document.createElement("script");b.src=e+"/capture/v1/set_login?v="+(new Date).getTime()+"&redirect_uri="+encodeURIComponent(c)+"&code="+encodeURIComponent(a.code)+"&login_callback="+encodeURIComponent(a.login_callback)+"&transaction_id="+encodeURIComponent(a.transaction_id);b.type="text/javascript";
a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}};JANRAIN.SSO.CAPTURE.check_login=function(a){e=e||a.sso_server;c=c||a.redirect_uri;h=h||a.xd_receiver;i=i||a.logout_uri;j=j||a.client_id;l=l||a.response_type;var b="janrain_sso_checked_"+m(a.xd_receiver);if(-1===d.document.cookie.search(RegExp(b)))a.response_type=a.response_type||"code",a.response_method=a.response_method||"redirect",a.refresh=a.refresh||!1,void 0===a.logout_uri&&(a.logout_uri=""),void 0===a.bp_uri&&(a.bp_uri=
""),b=document.createElement("script"),b.src=e+"/capture/v1/sso_check.js?v="+(new Date).getTime()+"&xd_receiver="+encodeURIComponent(h)+"&origin="+encodeURIComponent(document.location.protocol+"//"+document.location.host+document.location.pathname)+"&logout_uri="+encodeURIComponent(i)+"&redirect_uri="+encodeURIComponent(c)+"&client_id="+encodeURIComponent(j)+"&bp_channel="+encodeURIComponent(a.bp_channel)+"&response_type="+encodeURIComponent(l)+"&response_method="+encodeURIComponent(a.response_method)+
"&widget_parameters="+encodeURIComponent(a.widget_parameters)+"&nologin_callback="+encodeURIComponent(a.nologin_callback)+"&transaction_id="+encodeURIComponent(a.transaction_id)+"&refresh="+a.refresh,b.type="text/javascript",a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(b,a);else if("undefined"!==typeof janrain&&janrain.capture&&janrain.capture.ui&&"function"===typeof janrain.capture.ui[a.nologin_callback])janrain.capture.ui[a.nologin_callback]({transactionId:a.transaction_id,
result:"already checked"})};JANRAIN.SSO.ENGAGE.check_login=function(a){var b="janrain_sso_checked_"+m(a.xd_receiver);-1===d.document.cookie.search(RegExp(b))&&(g=a.token_uri,void 0===a.logout_uri&&(a.logout_uri=""),void 0===a.bp_uri&&(a.bp_uri=""),b=document.createElement("script"),b.src=a.sso_server+"/session/sso_check.js?v="+(new Date).getTime()+"&xdcomm_uri="+encodeURIComponent(a.xd_receiver)+"&bp_channel="+encodeURIComponent(a.bp_channel)+"&logout_uri="+encodeURIComponent(a.logout_uri),b.type=
"text/javascript",a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(b,a))};JANRAIN.SSO.ENGAGE.post_token=function(a){var b=d.document.createElement("form"),f=d.document.createElement("input");f.name="token";f.id="token";f.type="hidden";f.value=a;b.appendChild(f);b.method="POST";b.action=-1!=g.search(/\?/)?g+"&token="+a:g+"?token="+a;d.parent.document.getElementsByTagName("head")[0].appendChild(b);b.submit()};JANRAIN.SSO.logout=function(a,b){JANRAIN.SSO._deleteChecked();"undefined"!==
typeof b&&"function"===typeof b&&(k=b);if("undefined"!==typeof a.sso_server){var f=d.document.createElement("script");f.setAttribute("src",a.sso_server+"/session/logout.js?logout_uri="+encodeURIComponent(a.logout_uri));document.getElementsByTagName("body")[0].appendChild(f)}};JANRAIN.SSO._deleteChecked=function(){for(var a=d.document.cookie.split(";"),b=0;b<a.length;b++)-1<a[b].search(/janrain_sso_checked/)&&(d.document.cookie=a[b]+"=;expires="+(new Date).toGMTString()+";path=/;",window.console&&
window.console.log&&console.log("sso removed cookie "+a[b]))};JANRAIN.SSO.refresh=function(a){if("undefined"!==typeof a){var b=d.document.createElement("script");b.setAttribute("src",a+"/session/refresh.js");document.getElementsByTagName("body")[0].appendChild(b)}};JANRAIN.SSO._doLogout=function(a,b){onComplete=function(){"undefined"!==k&&"function"===typeof k?k():"undefined"!==a&&(d.document.location.href=a)};JANRAIN.SSO._loadUrls(b,onComplete)};JANRAIN.SSO._loadUrls=function(a,b){onComplete=function(){"undefined"!==
b&&"function"===typeof b&&b()};if(null!=a&&0<a.length){var f=0;onFrameLoad=function(){++f;f>=a.length&&onComplete()};for(var c,e=0;e<a.length;e++)d.document.all?(c=document.createElement("div"),c.innerHTML='<iframe onload="onFrameLoad();"></iframe>',c=c.firstChild):(c=d.document.createElement("iframe"),c.onload=onFrameLoad),c.setAttribute("src",decodeURIComponent(a[e])),d.document.getElementsByTagName("head")[0].appendChild(c)}else onComplete()}}})(this);
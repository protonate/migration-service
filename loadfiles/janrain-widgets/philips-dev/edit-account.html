<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<link href="http://cdn.quilt.janrain.com/2.1.0/quilt.css" media="all" rel="stylesheet" type="text/css" />
	<script type="text/javascript">
	function getCookie(name) {
		var nameEQ = name + "=";
		var cookies = document.cookie.split(';');
		for(var i = 0; i < cookies.length; i++) {
			var c = cookies[i];
			while (c.charAt(0) == ' ') c = c.substring(1, c.length);
			if (c.indexOf(nameEQ) == 0) {
				return c.substring(nameEQ.length, c.length);
			}
		}
		return null;
	}
	function selectLang(selectElem) {
		document.cookie = 'lang=' + selectElem.options[selectElem.selectedIndex].value + '; path=/';
		window.location.reload();
	}
	function triggerClick(element) {
		if (document.createEvent) {
			var event = document.createEvent("HTMLEvents");
			event.initEvent('click', true, true);
			element.dispatchEvent(event);
			janrain.capture.ui.modal.close();
		} else if (document.createEventObject) {
			var event = document.createEventObject();
			element.fireEvent('onclick', event);
			janrain.capture.ui.modal.close();
		}
	}
	(function() {
		if (typeof window.janrain !== 'object') window.janrain = {};
		window.janrain.settings = {};
			window.janrain.settings.capture = {};

		/* _______________ can edit below this line _______________ */
			janrain.settings.capture.redirectUri = 'https://' + window.location.hostname + '/philips-dev/';
			janrain.settings.capture.responseType = 'token';
			janrain.settings.capture.captureServer = 'https://philips.dev.janraincapture.com';
			janrain.settings.capture.clientId = 'a6424v37rky827mn22ht7byaswxw3ns5';
			janrain.settings.capture.appId= 'eupac7ugz25x8dwahvrbpmndf8';
			janrain.settings.capture.flowVersion = 'HEAD';
			janrain.settings.capture.flowName = 'editProfile';
			janrain.settings.capture.recaptchaPublicKey = '6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP';
			janrain.settings.capture.setProfileData = '';
			janrain.settings.capture.stylesheets = ['stylesheets/philips.css'];
			janrain.settings.capture.confirmModalClose = '';
			janrain.settings.capture.modalCloseHtml = '<span class="janrain-icon-16 janrain-icon-ex2"><\/span>';
			janrain.settings.capture.modalBorderColor = '#7AB433';
			janrain.settings.capture.noModalBorderInlineCss = true;
			janrain.settings.capture.screenToRender = 'editProfile';
			
			janrain.settings.capture.federate = true;
			janrain.settings.capture.federateServer = 'https://philips-dev.janrainsso.com';
			janrain.settings.capture.federateXdReceiver = 'http://' + window.location.host + '/philips-dev/xdcomm.html';
			janrain.settings.capture.federateLogoutUri = 'http://' + window.location.host + '/philips-dev/logout.html';
			janrain.settings.custom = true;
			janrain.settings.tokenUrl = 'https://localhost/';
			janrain.settings.type = 'embed';
			janrain.settings.appId = 'bdbppnbjfcibijknnfkk';
			janrain.settings.appUrl = 'https://philips-dev.rpxnow.com';
			janrain.settings.providers = ['google','yahoo','hyves','blogger','flickr','livejournal','aol','openid'];
			janrain.settings.providersPerPage = '4';
			janrain.settings.format = 'one row';
			janrain.settings.actionText = ' ';
			janrain.settings.showAttribution = true;
			janrain.settings.fontColor = '#965151';
			janrain.settings.fontFamily = 'lucida grande, Helvetica, Verdana, sans-serif';
			janrain.settings.backgroundColor = '#ffffff';
			janrain.settings.width = '162';
			janrain.settings.borderColor = '#ffffff';
			janrain.settings.borderRadius = '0';
			janrain.settings.buttonBorderColor = '#ffffff';
			janrain.settings.buttonBorderRadius = '0';
			janrain.settings.buttonBackgroundStyle = 'gradient';
			janrain.settings.tokenAction = 'event';
			
			janrain.settings.language = getCookie('lang');
			if (!janrain.settings.language) {
				janrain.settings.language = 'en-GB';
			}

			janrain.settings.packages = ['login', 'capture'];
		/* _______________ can edit above this line _______________ */

		function isReady() { janrain.ready = true; };
		if (document.addEventListener) {
			document.addEventListener("DOMContentLoaded", isReady, false);
		} else {
			window.attachEvent('onload', isReady);
		}

			var e = document.createElement('script');
			e.type = 'text/javascript';
			e.id = 'janrainAuthWidget'

			var url = document.location.protocol === 'https:' ? 'https://' : 'http://';
			url += 'd16s8pqtk4uodx.cloudfront.net';
			url += '/philips-dev/load.js';
			e.src = url;
			var s = document.getElementsByTagName('script')[0];
			s.parentNode.insertBefore(e, s);
		})();

		function updatePasswordRating() {
			var indicator = document.getElementById("passwordRating");
			if (indicator) {
				var rating = getPasswordRating(this);
				if (rating == 0) {
					indicator.innerHTML = "<span style='color: #666'>Empty</span>";
				} else if (rating >= 1 && rating <= 5) {
					indicator.innerHTML = "<span style='color: #A00'>Weak</span>";
				} else if (rating >= 6 && rating <= 8) {
					indicator.innerHTML = "<span style='color: #AA0'>Moderate</span>";
				} else if (rating >= 9 && rating <= 12) {
					indicator.innerHTML = "<span style='color: #0A0'>Strong</span>";
				} else if (rating >= 13) {
					indicator.innerHTML = "<span style='color: #0A0'>Very Strong</span>";
				}
			}
		}
		function getPasswordRating(element) {
			var value = element.value;

			var maxScore = 16; // 8 length points + 8 character class points points
			var charClasses = [/[a-z]/, /[A-Z]/, /[0-9]/, /[^a-zA-Z0-9]/]; // lowercase, uppercase, digits, other
			var rating;

			/* longer passwords are better */
			rating = Math.min(8, Math.floor(3 * (Math.log(value.length + 1))));
			/*
			1 char = 2 points
			2 chars = 3 points
			3-4 chars = 4 points
			5-6 chars = 5 points
			7-9 chars = 6 points
			10-13 chars = 7 points
			14+ chars = 8 points
			/*

			/* passwords with different character classes are better */
			var numberOfClasses = 0;
			for (var i = 0; i < charClasses.length; i++) {
				if (charClasses[i].test(value)) {
					numberOfClasses++;
				}
			}
			rating += Math.floor(Math.pow(2, numberOfClasses - 1));
			/*
			1 class = 1 point
			2 classes = 2 points
			3 classes = 4 points
			all 4 classes = 8 points
			*/

			return rating;
		}

		function janrainCaptureWidgetOnLoad() {
			var langSelElem = document.getElementById('select_language');
			for (var i = 0; i < langSelElem.options.length; i++) {
				if (langSelElem.options[i].value == janrain.settings.language) {
					langSelElem.selectedIndex = i;
					continue;
				}
			}

			janrain.capture.ui.start();
			if (window.console && window.console.log) console.log('capture started')
			janrain.events.onCaptureScreenShow.addHandler(function(result){
				console.log('onCaptureScreenShow');
			});
			janrain.events.onCaptureAccountDeactivateSuccess.addHandler(function(){
				janrain.capture.ui.endCaptureSession();
				window.location = 'index.html';
			});
			janrain.events.onCaptureRenderStart.addHandler(function(flow){
				console.log('onCaptureRenderStart');
			});
			janrain.events.onCaptureAccessDenied.addHandler(function(){
				window.location = 'index.html';
			});
			janrain.events.onCaptureSessionEnded.addHandler(function(result){
				window.location = 'index.html';
				console.log('onCaptureSessionEnded');
			});
			janrain.events.onCaptureRenderComplete.addHandler(function(flow){
				if (flow.screen == 'editProfile') {
					var linkAcctLink = document.getElementById('capture_editProfile_linkedAccounts_linknewlink');
					if (linkAcctLink) {
						setTimeout(function(){
							triggerClick(linkAcctLink);
						}, 100);
					} else {
						console.log('no linkAcctLink');
					}
				}
				document.getElementById("capture_editProfile_email").value = '';
				document.getElementById("capture_editProfile_emailConfirm").value = '';
				var passwordResetFunc = function(redirectURIField) {
					redirectURIField.value = 'http://' + window.location.hostname + '/philips-dev/reset-password.html?foo=1&bar=baz';
				};
				var emailVerifyFunc = function(redirectURIField) {
					var emailVerifyURL = 'http://' + window.location.hostname + '/philips-dev/verify-email.html?foo=1&bar=baz';
					redirectURIField.value = emailVerifyURL;
					janrain.settings.capture.redirectUri = emailVerifyURL;
				};
				var funcTable = {
					'emailAddressForm': emailVerifyFunc,
					'forgotPasswordForm': passwordResetFunc,
					'registrationForm': emailVerifyFunc,
					'registrationFormBlank': emailVerifyFunc,
					'resendVerificationForm': emailVerifyFunc,
					'resetPasswordForm': passwordResetFunc,
					'socialRegistrationForm': emailVerifyFunc,
					'socialRegistrationNoEmailFinishForm': emailVerifyFunc
				}
				for (var i in document.forms) {
					var form = document.forms[i];
					if (form.traditionalRegistration_passwordBlank) {
						form.traditionalRegistration_passwordBlank.onkeyup = updatePasswordRating;
					}
					if (form.newPassword) {
						form.newPassword.onkeyup = updatePasswordRating;
					}
					if (form.changePassword) {
						form.changePassword.onkeyup = updatePasswordRating;
					}
					if (funcTable[form.name] && form.redirect_uri) {
						funcTable[form.name](form.redirect_uri);
					}
				}
			});
			janrain.capture.ui.registerFunction('passwordValidation', function(name, value) {
				return /([a-zA-Z].*[0-9._@$])|([0-9].*[a-zA-Z._@$])|([._@$].*[a-zA-Z0-9])/.test(value);
			});
			janrain.capture.ui.registerFunction('phoneValidation', function(name, value) {
				return /^[0-9 .()~\[\]\/-]*$/.test(value);
			});
		}
	</script>
</head>
	<body class="janrain-font">
		<div class="global_nav">
			<div class="wrapper">
				<ul class="nav-list">
					<li><a href="index.html">Home</a></li>
					<li><a href="index.html" class="capture_end_session">Sign Out</a></li>
					<li><a href="registration.html">Register</a></li>
					<li><a href="myPhilips.html">myPhilips</a></li>
					<li><a href="edit-account.html" class="selected">Edit Account</a></li>
					<li>
						<select id="select_language" onchange="selectLang(this)" style="margin: 14px 0 14px 15px;">
							<option value="bg-BG">bg-BG</option>
							<option value="cs-CZ">cs-CZ</option>
							<option value="da-DK">da-DK</option>
							<option value="de-AT">de-AT</option>
							<option value="de-CH">de-CH</option>
							<option value="de-DE">de-DE</option>
							<option value="el-GR">el-GR</option>
							<option value="en-AU">en-AU</option>
							<option value="en-CA">en-CA</option>
							<option value="en-GB" selected="selected">en-GB</option>
							<option value="en-HK">en-HK</option>
							<option value="en-ID">en-ID</option>
							<option value="en-IE">en-IE</option>
							<option value="en-IN">en-IN</option>
							<option value="en-MY">en-MY</option>
							<option value="en-NZ">en-NZ</option>
							<option value="en-PH">en-PH</option>
							<option value="en-PK">en-PK</option>
							<option value="en-SA">en-SA</option>
							<option value="en-SG">en-SG</option>
							<option value="en-US">en-US</option>
							<option value="en-ZA">en-ZA</option>
							<option value="es-AR">es-AR</option>
							<option value="es-CL">es-CL</option>
							<option value="es-CO">es-CO</option>
							<option value="es-ES">es-ES</option>
							<option value="es-MX">es-MX</option>
							<option value="es-PA">es-PA</option>
							<option value="es-PE">es-PE</option>
							<option value="es-UY">es-UY</option>
							<option value="es-VE">es-VE</option>
							<option value="et-EE">et-EE</option>
							<option value="fi-FI">fi-FI</option>
							<option value="fr-CA">fr-CA</option>
							<option value="fr-FR">fr-FR</option>
							<option value="fr-BE">fr-BE</option>
							<option value="fr-CH">fr-CH</option>
							<option value="hr-HR">hr-HR</option>
							<option value="hu-HU">hu-HU</option>
							<option value="it-IT">it-IT</option>
							<option value="ja-JP">ja-JP</option>
							<option value="ko-KR">ko-KR</option>
							<option value="lt-LT">lt-LT</option>
							<option value="lv-LV">lv-LV</option>
							<option value="nl-BE">nl-BE</option>
							<option value="nl-NL">nl-NL</option>
							<option value="no-NO">no-NO</option>
							<option value="pl-PL">pl-PL</option>
							<option value="pt-BR">pt-BR</option>
							<option value="pt-PT">pt-PT</option>
							<option value="ro-RO">ro-RO</option>
							<option value="ru-UA">ru-UA</option>
							<option value="ru-RU">ru-RU</option>
							<option value="sk-SK">sk-SK</option>
							<option value="sl-SI">sl-SI</option>
							<option value="sv-SE">sv-SE</option>
							<option value="th-TH">th-TH</option>
							<option value="tr-TR">tr-TR</option>
							<option value="vi-VN">vi-VN</option>
							<option value="zh-CN">zh-CN</option>
							<option value="zh-HK">zh-HK</option>
							<option value="zh-TW">zh-TW</option>
						</select>
					</li>
				</ul>
			</div>
		</div>
		<div id="editProfile" style="display: none;">
			<div class="contentBoxWhiteShadow capture_profile_section">
				<div class="grid-block">
					<div class="col1">
						{* #profileCollection *}
						{* /profileCollection *}
					</div>
					<div class="col3">
						{* personalDetailsTab *}
							{* personalDetailsForm *}
								{* givenName *}
								{* familyName *}
								{* salutation *}
								{* birthdate *} 
								<div class="capture_form_item">
									{* submitButton *}
									{* savedProfileMessage *}
								</div>
							{* /personalDetailsForm *}
						{* /personalDetailsTab *}
						{* addressDetailsTab *}
							{* addressDetailsForm *}
								{* address1 *}
								{* address2 *}
								{* address3 *}
								{* houseNumber *}
								{* city *}
								{* state *}
								{* zip *}
								{* country *}
								<div class="capture_form_item">
									{* submitButton *}
									{* savedProfileMessage *}
								</div>
							{* /addressDetailsForm *}
						{* /addressDetailsTab *}
						{* contactDetailsTab *}
							{* contactDetailsForm *}
								{* mainPhoneCountry *}
								{* mainPhoneNumber *}
								{* altPhoneCountry *}
								{* altPhoneNumber *}
								<div class="capture_form_item">
									{* submitButton *}
									{* savedProfileMessage *}
								</div>
							{* /contactDetailsForm *}
						{* /contactDetailsTab *}
						{* communicationSettingsTab *}
							{* communicationSettingsForm *}
								<div class="capture_form_item">
									{* receiveMarketingEmail *}
									{* submitButton *}
									{* savedProfileMessage *}
								</div>
							{* /communicationSettingsForm *}
						{* /communicationSettingsTab *}
						{* emailAddressTab *}
							{* emailAddressForm *}
								<div>Current email address</div>
								<div>{* data_emailAddress *}</div>
								{* email *}
								{* emailConfirm *}
								<div class="capture_form_item">
									{* submitButton *}
									{* savedProfileMessage *}
								</div>
							{* /emailAddressForm *}
						{* /emailAddressTab *}
						{* passwordTab *}
							<div id="passwordRating" style="float: right; font-weight: bold;"></div>
							{* traditionalPasswordForm *}
								{* currentPassword *}
								{* changePassword *}
								{* changePasswordConfirm *}
								<div class="capture_form_item">
									{* saveChangedPasswordButton *}
								</div>
							{* /traditionalPasswordForm *}
							{* socialPasswordForm *}
								{* newPassword *}
								{* newPasswordConfirm *}
								<div class="capture_form_item">
									{* saveNewPasswordButton *}
								</div>
							{* /socialPasswordForm *}
							{* savedProfileMessage *}
						{* /passwordTab *}
						{* accountManagementTab *}
							{* accountManagementForm *}
								<div class="capture_form_item">
									{* submitButton *}
									{* savedProfileMessage *}
								</div>
							{* /accountManagementForm *}

							<h3>Linked Accounts</h3>
							<div class="capture_editCol">
								{* linkedAccounts *}
							</div>
							<h3>Link your accounts</h3>
							<h2>Allows you to sign in to your account using that provider in the future.</h2>
							<div class="capture_signin">
								<a href="#" onclick="janrain.engage.signin.triggerFlow('google');">Google</a><br />
								<a href="#" onclick="janrain.engage.signin.triggerFlow('yahoo');">Yahoo!</a><br />
								<a href="#" onclick="janrain.engage.signin.triggerFlow('facebook');">Facebook</a><br />
								<a href="#" onclick="janrain.engage.signin.triggerFlow('twitter');">Twitter</a><br />
							</div>
							{* linkAccountContainer *}
							{* /linkAccountContainer *}
						{* /accountManagementTab *}
					</div>
				</div>
			</div>
		</div>
		<div style="display:none;" id="confirmDelete">
			<div class="capture_header">
				<h1>Confirm Account Deletion</h1>
			</div>
			<p>Are you sure you want to dele your account(s)? This will remove your access to the following sites:</p>
			{* sites *}
			<div class="capture_footer">
				<div class="capture_left">
					<a href="#" onclick="janrain.capture.ui.modal.close()" class="capture_btn capture_secondary">No</a>
				</div>
				<div class="capture_right">
					{* confirmDeleteForm *}{* confirmDeleteButton *}{* /confirmDeleteForm *}
				</div>
			</div>
		</div>
		<div style="display:none;" id="newPasswordSuccess">
			<div class="capture_header">
				<h1>You did it!</h1>
			</div>
				<p>Your password has been successfully changed.</p>
			<div class="capture_footer">
				<a href="#" onclick="janrain.capture.ui.modal.close()" class="capture_btn capture_secondary">Close</a>
			</div>
		</div>
		<div id="janrainEngageEmbed" style="display:none;"></div>
	</body>
</html>

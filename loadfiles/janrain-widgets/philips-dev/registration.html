<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<link href="http://cdn.quilt.janrain.com/2.1.0/quilt.css" media="all" rel="stylesheet" type="text/css" />
		<script type="text/javascript">
			function getCookie(name) {
				var nameEQ = name + "=";
				var cookies = document.cookie.split(';');
				for(var i = 0; i < cookies.length; i++) {
					var c = cookies[i];
					while (c.charAt(0) == ' ') c = c.substring(1, c.length);
					if (c.indexOf(nameEQ) == 0) {
						return c.substring(nameEQ.length, c.length);
					}
				}
				return null;
			}
			function selectLang(selectElem) {
				document.cookie = 'lang=' + selectElem.options[selectElem.selectedIndex].value + '; path=/';
				window.location.reload();
			}
			(function() {
				if (typeof window.janrain !== 'object') window.janrain = {};
				window.janrain.settings = {};
				window.janrain.settings.capture = {};
				
				janrain.settings.capture.redirectUri = 'https://' + window.location.hostname + '/philips-dev/';
				janrain.settings.capture.responseType = 'token';
				janrain.settings.capture.captureServer = 'https://philips.dev.janraincapture.com';
				janrain.settings.capture.clientId = 'a6424v37rky827mn22ht7byaswxw3ns5';
				janrain.settings.capture.appId= 'eupac7ugz25x8dwahvrbpmndf8';
				janrain.settings.capture.registerFlow = 'socialRegistration';
				janrain.settings.capture.flowVersion = 'HEAD';
				janrain.settings.capture.flowName = 'signIn';
				janrain.settings.capture.recaptchaPublicKey = '6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP';
				janrain.settings.capture.setProfileData = '';
				janrain.settings.capture.stylesheets = ['stylesheets/philips.css'];
				janrain.settings.capture.confirmModalClose = '';
				janrain.settings.capture.modalCloseHtml = '<span class="janrain-icon-16 janrain-icon-ex2"><\/span>';
				janrain.settings.capture.modalBorderColor = '#7AB433';
				janrain.settings.capture.noModalBorderInlineCss = true;
				janrain.settings.capture.screenToRender = 'traditionalRegistrationBlank';
				
				janrain.settings.capture.federate = true;
				janrain.settings.capture.federateServer = 'https://philips-dev.janrainsso.com';
				janrain.settings.capture.federateXdReceiver = 'http://' + window.location.host + '/philips-dev/xdcomm.html';
				janrain.settings.capture.federateLogoutUri = 'http://' + window.location.host + '/philips-dev/logout.html';
				
				janrain.settings.tokenUrl = 'https://localhost/';
				janrain.settings.type = 'embed';
				janrain.settings.appId = 'bdbppnbjfcibijknnfkk';
				janrain.settings.appUrl = 'https://philips-dev.rpxnow.com';
				janrain.settings.providers = ['google','yahoo','hyves','blogger','flickr','livejournal','aol','openid'];
				janrain.settings.providersPerPage = '4';
				janrain.settings.format = 'one row';
				janrain.settings.actionText = ' ';
				janrain.settings.showAttribution = true;
				janrain.settings.fontColor = '#965151';
				janrain.settings.fontFamily = 'lucida grande, Helvetica, Verdana, sans-serif';
				janrain.settings.backgroundColor = '#ffffff';
				janrain.settings.width = '162';
				janrain.settings.borderColor = '#ffffff';
				janrain.settings.borderRadius = '0';
				janrain.settings.buttonBorderColor = '#ffffff';
				janrain.settings.buttonBorderRadius = '0';
				janrain.settings.buttonBackgroundStyle = 'gradient';
				janrain.settings.tokenAction = 'event';
				
				janrain.settings.language = getCookie('lang');
				if (!janrain.settings.language) {
					janrain.settings.language = 'en-GB';
				}

				janrain.settings.packages = ['login', 'capture'];

				function isReady() { janrain.ready = true; };
				if (document.addEventListener) {
					document.addEventListener("DOMContentLoaded", isReady, false);
				} else {
					window.attachEvent('onload', isReady);
				}

				var e = document.createElement('script');
				e.type = 'text/javascript';
				e.id = 'janrainAuthWidget'

				var url = document.location.protocol === 'https:' ? 'https://' : 'http://';
				url += 'd16s8pqtk4uodx.cloudfront.net';
				url += '/philips-dev/load.js';
				e.src = url;
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(e, s);
			})();

			function updatePasswordRating() {
				var indicator = document.getElementById("passwordRating");
				if (indicator) {
					var rating = getPasswordRating(this);
					if (rating == 0) {
						indicator.innerHTML = "<span style='color: #666'>Empty</span>";
					} else if (rating >= 1 && rating <= 5) {
						indicator.innerHTML = "<span style='color: #A00'>Weak</span>";
					} else if (rating >= 6 && rating <= 8) {
						indicator.innerHTML = "<span style='color: #AA0'>Moderate</span>";
					} else if (rating >= 9 && rating <= 12) {
						indicator.innerHTML = "<span style='color: #0A0'>Strong</span>";
					} else if (rating >= 13) {
						indicator.innerHTML = "<span style='color: #0A0'>Very Strong</span>";
					}
				}
			}
			function getPasswordRating(element) {
				var value = element.value;

				var maxScore = 16; // 8 length points + 8 character class points points
				var charClasses = [/[a-z]/, /[A-Z]/, /[0-9]/, /[^a-zA-Z0-9]/]; // lowercase, uppercase, digits, other
				var rating;

				/* longer passwords are better */
				rating = Math.min(8, Math.floor(3 * (Math.log(value.length + 1))));
				/*
				1 char = 2 points
				2 chars = 3 points
				3-4 chars = 4 points
				5-6 chars = 5 points
				7-9 chars = 6 points
				10-13 chars = 7 points
				14+ chars = 8 points
				/*

				/* passwords with different character classes are better */
				var numberOfClasses = 0;
				for (var i = 0; i < charClasses.length; i++) {
					if (charClasses[i].test(value)) {
						numberOfClasses++;
					}
				}
				rating += Math.floor(Math.pow(2, numberOfClasses - 1));
				/*
				1 class = 1 point
				2 classes = 2 points
				3 classes = 4 points
				all 4 classes = 8 points
				*/

				return rating;
			}

			function janrainCaptureWidgetOnLoad() {
				var langSelElem = document.getElementById('select_language');
				for (var i = 0; i < langSelElem.options.length; i++) {
					if (langSelElem.options[i].value == janrain.settings.language) {
						langSelElem.selectedIndex = i;
						continue;
					}
				}

				janrain.capture.ui.start();

				janrain.events.onCaptureSessionFound.addHandler(function(result){
					console.log('onCaptureSessionFound')
				});
				janrain.events.onCaptureSessionNotFound.addHandler(function(result){
					console.log('onCaptureSessionNotFound');
				});
				janrain.events.onCaptureLoginSuccess.addHandler(function(result) {
					console.log('onCaptureLoginSuccess');
					alert('You have successfully logged in');
					janrain.capture.ui.modal.close()
				});
				janrain.events.onCaptureRegistrationSuccess.addHandler(function(result) {
					console.log('onCaptureRegistrationSuccess');
					janrain.capture.ui.endCaptureSession();
				});
				janrain.events.onCaptureRenderComplete.addHandler(function(result) {
					var passwordResetFunc = function(redirectURIField) {
						redirectURIField.value = 'http://' + window.location.hostname + '/philips-dev/reset-password.html?foo=1&bar=baz';
					};
					var emailVerifyFunc = function(redirectURIField) {
						var emailVerifyURL = 'http://' + window.location.hostname + '/philips-dev/verify-email.html?foo=1&bar=baz';
						redirectURIField.value = emailVerifyURL;
						janrain.settings.capture.redirectUri = emailVerifyURL;
					};
					var funcTable = {
						'emailAddressForm': emailVerifyFunc,
						'forgotPasswordForm': passwordResetFunc,
						'registrationForm': emailVerifyFunc,
						'registrationFormBlank': emailVerifyFunc,
						'resendVerificationForm': emailVerifyFunc,
						'resetPasswordForm': passwordResetFunc,
						'socialRegistrationForm': emailVerifyFunc,
						'socialRegistrationNoEmailFinishForm': emailVerifyFunc
					}
					for (var i in document.forms) {
						var form = document.forms[i];
						if (form.traditionalRegistration_passwordBlank) {
							form.traditionalRegistration_passwordBlank.onkeyup = updatePasswordRating;
						}
						if (form.newPassword) {
							form.newPassword.onkeyup = updatePasswordRating;
						}
						if (form.changePassword) {
							form.changePassword.onkeyup = updatePasswordRating;
						}
						if (funcTable[form.name] && form.redirect_uri) {
							funcTable[form.name](form.redirect_uri);
						}
					}
				});
				janrain.capture.ui.registerFunction('passwordValidation', function(name, value) {
					return /([a-zA-Z].*[0-9._@$])|([0-9].*[a-zA-Z._@$])|([._@$].*[a-zA-Z0-9])/.test(value);
				});
			}
		</script>
	</head>
	<body>
	<body class="janrain-font">
		<div class="global_nav">
			<div class="wrapper">
				<ul class="nav-list">
					<li><a href="index.html">Home</a></li>
					<li><a href="registration.html" class="selected">Register</a></li>
					<li><a href="myPhilips.html">myPhilips</a></li>
					<li><a href="edit-account.html">Edit Account</a></li>
					<li>
						<select id="select_language" onchange="selectLang(this)" style="margin: 14px 0 14px 15px;">
							<option value="bg-BG">bg-BG</option>
							<option value="cs-CZ">cs-CZ</option>
							<option value="da-DK">da-DK</option>
							<option value="de-AT">de-AT</option>
							<option value="de-CH">de-CH</option>
							<option value="de-DE">de-DE</option>
							<option value="el-GR">el-GR</option>
							<option value="en-AU">en-AU</option>
							<option value="en-CA">en-CA</option>
							<option value="en-GB" selected="selected">en-GB</option>
							<option value="en-HK">en-HK</option>
							<option value="en-ID">en-ID</option>
							<option value="en-IE">en-IE</option>
							<option value="en-IN">en-IN</option>
							<option value="en-MY">en-MY</option>
							<option value="en-NZ">en-NZ</option>
							<option value="en-PH">en-PH</option>
							<option value="en-PK">en-PK</option>
							<option value="en-SA">en-SA</option>
							<option value="en-SG">en-SG</option>
							<option value="en-US">en-US</option>
							<option value="en-ZA">en-ZA</option>
							<option value="es-AR">es-AR</option>
							<option value="es-CL">es-CL</option>
							<option value="es-CO">es-CO</option>
							<option value="es-ES">es-ES</option>
							<option value="es-MX">es-MX</option>
							<option value="es-PA">es-PA</option>
							<option value="es-PE">es-PE</option>
							<option value="es-UY">es-UY</option>
							<option value="es-VE">es-VE</option>
							<option value="et-EE">et-EE</option>
							<option value="fi-FI">fi-FI</option>
							<option value="fr-CA">fr-CA</option>
							<option value="fr-FR">fr-FR</option>
							<option value="fr-BE">fr-BE</option>
							<option value="fr-CH">fr-CH</option>
							<option value="hr-HR">hr-HR</option>
							<option value="hu-HU">hu-HU</option>
							<option value="it-IT">it-IT</option>
							<option value="ja-JP">ja-JP</option>
							<option value="ko-KR">ko-KR</option>
							<option value="lt-LT">lt-LT</option>
							<option value="lv-LV">lv-LV</option>
							<option value="nl-BE">nl-BE</option>
							<option value="nl-NL">nl-NL</option>
							<option value="no-NO">no-NO</option>
							<option value="pl-PL">pl-PL</option>
							<option value="pt-BR">pt-BR</option>
							<option value="pt-PT">pt-PT</option>
							<option value="ro-RO">ro-RO</option>
							<option value="ru-UA">ru-UA</option>
							<option value="ru-RU">ru-RU</option>
							<option value="sk-SK">sk-SK</option>
							<option value="sl-SI">sl-SI</option>
							<option value="sv-SE">sv-SE</option>
							<option value="th-TH">th-TH</option>
							<option value="tr-TR">tr-TR</option>
							<option value="vi-VN">vi-VN</option>
							<option value="zh-CN">zh-CN</option>
							<option value="zh-HK">zh-HK</option>
							<option value="zh-TW">zh-TW</option>
						</select>
					</li>
				</ul>
			</div>
		</div>
		<div class="wrapper">
		<div style="display:none;" id="signIn">
			<div class="capture_signin">
				<h2>Login to your social account</h2>
				{* loginWidget *} <br />
			</div>
			<div class="capture_backgroundColor">
				<div class="capture_signin">
					<h2>Login with My Philips account</h2>
						{* #userInformationForm *}
							{* traditionalSignIn_emailAddress *}
							{* traditionalSignIn_password *}
							<div class="capture_form_item capture_rightText">
								{* traditionalSignIn_signInButton *}
							</div>
						{* /userInformationForm *}
				</div>
			</div>
			<div class="capture_signin" style="margin-top:10px;">
				<h2>Don't have a Philips Account?</h2>
				<a href="registration.html">Create one now</a>
			</div>
		</div>

		<div style="display:none;" id="returnSocial">
			<div class="capture_header">
				<h1>Sign Up / Sign In</h1>
			</div>
			<div class="capture_signin">
				<h2>Welcome Back {* welcomeName *}</h2>
				{* loginWidget *} 
				<div class="capture_centerText switchLink"><a href="#" data-cancelcapturereturnexperience="true">Use another account</a></div>
			</div>
		</div>
		<div style="display:none;" id="returnTraditional">
			<div class="capture_header">
				<h1>Sign Up / Sign In</h1>
			</div>
			<h2 class="capture_centerText">Welcome back. Please sign in</h2>
					<div class="capture_backgroundColor">
						<div class="capture_signin">
						{* #userInformationForm *}
							{* traditionalSignIn_emailAddress *}
							{* traditionalSignIn_password *}
							<div class="capture_form_item capture_rightText">
								{* traditionalSignIn_signInButton *}
							</div>
						{* /userInformationForm *}
					</div>
				<div class="capture_centerText switchLink"><a href="#" data-cancelcapturereturnexperience="true">Use another account</a></div>
			</div>
		</div>
		<div style="display:none;" id="socialRegistration" class="capture_lrg_footer">
			<div class="capture_header">
				<h1>You're Almost Done!</h1>
			</div>
				<h2>Please confirm the information below before signing in.</h2>
				{* #socialRegistrationForm *}
					{* registration_firstName *}
					{* registration_lastName *}
					{* socialRegistration_displayName *}
					{* socialRegistration_emailAddress *}
					{* registration_birthday *}
					{* registration_gender *}
					{* registration_postalZip *}
					<div class="capture_form_item">
						<label>*Indicates Required Field</label>
					</div>
					{* agreeToTerms *}
					<div class="capture_footer">
						<div class="capture_left">
							{* backButton *}
						</div>
						<div class="capture_right">
						{* socialRegistration_signInButton *}
						</div>
					</div>
				{* /socialRegistrationForm *}
		</div>

		<div style="display:none;" id="traditionalRegistrationBlank">
			<div class="section contentBoxWhiteShadow">
				<div class="capture_header">
					<h1>Create My Philips Account</h1>
				</div>
				<div class="grid-block">
					<div class="col2">
						*All fields required
						{* #registrationFormBlank *}
							{* registration_firstName *}
							{* registration_lastName *}
							{* registration_salutation *}
							{* registration_birthday *}
							{* traditionalRegistration_emailAddressBlank *}
							<div id="passwordRating" style="float: right; font-weight: bold;"></div>
							{* traditionalRegistration_passwordBlank *}
							{* traditionalRegistration_passwordConfirmBlank *}
							<div class="capture_form_item">
								<label>*Indicates Required Field</label>
							</div>
							<div class="capture_right">
								{* createAccountButton *}
							</div>
						{* /registrationFormBlank *}
					</div>
					<div class="col2">
						<h2>You can create an Philips account directly using your social media account</h2>
						{* loginWidget *}
						<h2>Benefits of registration</h2>
						<p>Create you Philips account now. Enjoy the following benefits when registering with Philips.</p>
						<p>Already have an account? <a href="#" data-capturescreen="signInModal">Sign In</a></p>
					</div>
				</div>
			</div>
		</div>

		<div style="display:none;" id="registrationSuccess">
			<div class="capture_header">
				<h1>Thank you for registering!</h1>
			</div>
				<p>We have sent a confirmation email to {* data_emailAddress *}. Please check your email and click on the link to activate your account.</p>
		</div>

		<div style="display:none;" id="forgotPassword">
			<div class="capture_header">
				<h1>Create a new password</h1>
			</div>
			<h2>Don't worry, it happens. We'll send you a link to create a new password.</h2>
			{* #forgotPasswordForm *}
				{* forgotPassword_emailAddress *}
				<div class="capture_footer">
					<div class="capture_left">
						{* backButton *}
					</div>
					<div class="capture_right">
						{* forgotPassword_sendButton *}
					</div>
				</div>
			{* /forgotPasswordForm *}
		</div>

		<div style="display:none;" id="forgotPasswordSuccess">
			<div class="capture_header">
				<h1>Email sent</h1>
			</div>
			<p>We have sent you an email with a link to change your password.</p>
		</div>

		<div style="display:none;" id="forgotPasswordSuccess">
			<div class="capture_header">
				<h1>Create a new password</h1>
			</div>
			<p>We've sent an email with instructions to create a new password. Your existing password has not been changed.</p>
			<div class="capture_footer">
				<a href="#" onclick="janrain.capture.ui.modal.close()" class="capture_btn capture_secondary">Close</a>
			</div>
		</div>
		
		<div style="display:none;" id="mergeAccounts">
			{* mergeAccounts *}
		</div>
		<div style="display:none;" id="traditionalAuthenticateMerge">
			<div class="capture_header">
				<h1>Sign in to complete account merge</h1>
			</div>
			<div class="capture_signin">
				{* #tradAuthenticateMergeForm *}
					{* traditionalSignIn_emailAddress *}
					{* mergePassword *}
					<div class="capture_footer">
						<div class="capture_left">
							{* backButton *}
						</div>
						<div class="capture_right">
							{* traditionalSignIn_signInButton *}
						</div>
					</div>
				{* /tradAuthenticateMergeForm *}
			</div>
		</div>
	</div>
	</body>
</html>


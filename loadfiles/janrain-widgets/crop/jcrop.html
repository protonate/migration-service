<!DOCTYPE html>
<html>
<head>
<script src="crop.js"></script>
<script>
function _addListener(element, type, listener) {
    if (typeof window.attachEvent === 'object') {
        element.attachEvent('on' + type, listener);
    } else {
        element.addEventListener(type, listener, false);
    }
}
function _removeListener(element, type, listener){
    if (typeof window.detachEvent === 'object') {
        element.detachEvent('on' + type, listener);
    } else {
        element.removeEventListener(type, listener, false);
    }
}
// http://www.quirksmode.org/js/findpos.html
function findPosition(element) {
    var curleft = curtop = 0;
    if (obj.offsetParent) {
        do {
            curleft += obj.offsetLeft;
            curtop += obj.offsetTop;
        } while (obj = obj.offsetParent);
    }
    return [curleft,curtop];
}
_addListener(window, 'load', cropstart);
function cropstart(){
    crop(document.getElementById("jcrop_target"), function(a){
        if (window.console && console.log) console.log(a);
    });
}
/*
$(document).ready(function(){
    var showPreview = function(sp){console.log(sp);jQuery("#results").text(jQuery.param(sp))};
    $('#jcrop_target').Jcrop({
        onChange: showPreview,
        onSelect: showPreview,
        aspectRatio: 1
    });
});
*/
</script>
</head>
<body>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<img src="http://1.cdn.nhle.com/blues/images/upload/gallery/2011/12/136071333_slide.jpg" id="jcrop_target" />
<div id="results"></div>
</body>
</html>

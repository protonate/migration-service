<!DOCTYPE html>
<html>
    <head>
      <link rel="stylesheet" href="//www.channel4.com/static/globalnav/css/globalnav.css" type="text/css">
      <link href="https://www.channel4.com/static/global/css/4od/reset.css" type="text/css" rel="stylesheet">
      <link href="https://www.channel4.com/static/global/css/4od/elements.css" type="text/css" rel="stylesheet">
      <link href="https://www.channel4.com/static/global/css/4od/structure.css" type="text/css" rel="stylesheet">
      <link href="https://www.channel4.com/static/global/css/4od/modules.css" type="text/css" rel="stylesheet">
      <link href="https://www.channel4.com/static/identity/css/identity.css" type="text/css" rel="stylesheet">
        <script type="text/javascript">
            (function() {
                if (typeof window.janrain !== 'object') window.janrain = {};
                window.janrain.settings = {};
                window.janrain.settings.capture = {};

                janrain.settings.appUrl = 'https://signin.channel4.com';

                // you need to define these next two settings yourself
                // these are for my dev system
                
                janrain.settings.custom = true;
                janrain.settings.capture.appId = 'hd3df5j8g2wkww87mt6gzhrbu9';
                janrain.settings.capture.federate = true;
                janrain.settings.capture.federateServer = 'https://channel4.janrainsso.com';
                janrain.settings.capture.federateXdReceiver = 'http://d16s8pqtk4uodx.cloudfront.net/c4-prod/xdcomm.html';
                janrain.settings.capture.federateLogoutUri = 'http://d16s8pqtk4uodx.cloudfront.net/c4-prod/logout.html';
                janrain.settings.capture.redirectUri = 'http://channel4.com/';
                janrain.settings.capture.clientId = 'csheccnpv7wgfu894dyjaw7t4fcd6gvd';
                janrain.settings.capture.recaptchaPublicKey = '6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP';
                janrain.settings.capture.responseType = 'token';
                janrain.settings.capture.captureServer = 'https://channel4.janraincapture.com';
                janrain.settings.capture.registerFlow = 'socialRegistration';
                janrain.settings.capture.screenToRender = 'registrationVerify';
                janrain.settings.capture.flowVersion = 'HEAD';
                janrain.settings.capture.flowName = 'signIn';
                janrain.settings.capture.stylesheets = ['stylesheets/channel4.css'];

                janrain.settings.capture.confirmModalClose = true;
                janrain.settings.type = 'embed';
                janrain.settings.tokenUrl = 'http://channel4.com/';
                janrain.settings.tokenAction = 'event';
                janrain.settings.format = 'one column';
                janrain.settings.providers = ['facebook', 'twitter','google'];
                janrain.settings.providersPerPage = 3;
                janrain.settings.width = '220';
                janrain.settings.showAttribution = false;
                janrain.settings.actionText = ' ';
				janrain.settings.borderRadius = 0;
                janrain.settings.borderColor = '#ffffff';
                janrain.settings.backgroundColor = '#ffffff';
                janrain.settings.language = 'en';

                janrain.settings.packages = ['login', 'capture'];

                function isReady() { janrain.ready = true; };
                if (document.addEventListener) {
                    document.addEventListener("DOMContentLoaded", isReady, false);
                } else {
                    window.attachEvent('onload', isReady);
                }

                var e = document.createElement('script');
                e.type = 'text/javascript';
                e.id = 'janrainAuthWidget'

                var url = document.location.protocol === 'https:' ? 'https://' : 'http://';
                url += 'd16s8pqtk4uodx.cloudfront.net';
                url += '/c4-prod/load.js';
                e.src = url;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(e, s);
            })();

            function janrainWidgetOnload() {

            }
            function janrainCaptureWidgetOnLoad() {
            janrain.capture.ui.start();
                janrain.events.onCaptureLoginStart.addHandler(function(result){
                    console.log('loginStart', result)
                });
                janrain.events.onCaptureRegistrationStart.addHandler(function(result){
                    console.log('registrationStart', result)
                });

                janrain.events.onCaptureLoginSuccess.addHandler(function(result){
                    janrain.capture.ui.modal.close();
                    alert('huzzah, you just logged in and got an accessToken of ' + result.accessToken);
                    var linkA = document.createElement('a');
                    linkA.href = 'edit-profile.html';
                    linkA.innerHTML = 'edit profile';
                    document.body.appendChild(linkA);
                });
                janrain.events.onCaptureRegistrationSuccess.addHandler(function(result){
                    janrain.capture.ui.modal.close();
                    alert('huzzah, you just logged in and got an accessToken of ' + result.accessToken);
                });
                janrain.events.onCaptureValidationFailed.addHandler(function(result){
                        //if (window.console && window.console.log) console.log('validation fail', result)
                });
                janrain.events.onCaptureValidationSuccess.addHandler(function(result){
                        //if (window.console && window.console.log) console.log('validation success', result)
                });
                janrain.capture.ui.registerFunction('myCustomValidator', function(name, value, validation) {
                    if (value === 'test') {
                        validation.valid();
                    } else {
                        validation.notValid('You really messed up.');
                    }
                });
            }
        </script>
    </head>
    <body class="login identity hasBackground confirm" style="background-image:url(https://www.channel4.com/static/identity/css/img/login-bg/father_ted.jpg);">
        <div class="main-wrapper cf">
            <div class="content-wrapper cf">
                <div class="main-content">
                    <h1 class="header-banner welcome"><span class="accessibility">Register with 4</span></h1>
                    <div style="display: none" id="registrationVerify">
                        <h2 class="header-strap">Sorry we could not verify that email address.</h2>
                        <p>Please resend verification.</p>
                    </div>
                    <div style="display: none" id="registrationVerified">
                        <h2 class="header-strap">Thanks for verifying your email address</h2>
                        <p>copy</p>
                        <div class="whiteBox capture_c4_linkedAccounts">
                            <p>Did you know you can link your social accounts.</p>
                            {* linkedAccounts *}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

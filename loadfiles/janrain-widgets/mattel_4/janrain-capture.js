"object"!==typeof window.janrain&&(window.janrain={});janrain.apps={};
janrain.apps=function(){var W,da;function Oa(){function a(a){var a=a||"img",d=document.createElement(a);d.style.position="absolute";d.style.cursor="pointer";d.style.zIndex=1E3;"a"===a?(d.setAttribute("href","#"),d.className="janrain_modal_closebutton",J&&(d.innerHTML=J)):(d.src=Q,R||(d.style.right="-6px",d.style.top="-7px",d.style.height="31px",d.style.width="28px"));d.onclick=y?e:w;return d}function w(a){K||(h.style.display="none",g.style.display="none",v.style.display="none");V&&ea.deactivate();
("object"===typeof a||!a)&&janrain.events.onModalClose.fire();("object"===typeof a||!a)&&oa.fire();"object"===typeof a&&D(a)}function d(){var a=document.createElement("div"),d=document.createElement("div"),e=document.createElement("a"),k=document.createElement("a"),b=document.createElement("h3");e.innerHTML="Yes";k.innerHTML="No";b.innerHTML="Are you sure you want to quit?";e.setAttribute("href","#");k.setAttribute("href","#");a.className="janrain_close_confirm_container";d.className="janrain_close_confirm";
e.className="janrain_modal_confirm";k.className="janrain_modal_cancel";A(e,"click",function(a){w();h.removeChild(M);M=null;D(a)});A(k,"click",function(a){h.removeChild(M);M=null;D(a)});d.appendChild(b);d.appendChild(k);d.appendChild(e);a.appendChild(d);return a}function e(a){M||(M=d(),h.appendChild(M));D(a)}function m(){if(K){var a=document.getElementById("previewMode");a.style.position="relative";a.appendChild(h)}else{var a=h,d=pa(),e=Ca(a),w=-1*e.width/2,e=-1*e.height/2;a.style.left="50%";a.style.marginLeft=
w+"px";a.style.marginTop=e+d+"px";a.style.top="50%";0>a.offsetLeft&&(a.style.left=0,a.style.marginLeft=0);0>a.offsetTop&&(a.style.marginTop=0,a.style.top="10px");v.style.height=W+d+"px";"absolute"!==a.style.position&&(a.style.position="absolute")}K||E.show()}function k(a){N||(B=X("number",[0,20],10,a),ha.fire({radius:fa(O,B)}))}function j(a){N||(x=X("color",null,"#000000",a))}function aa(a){N||(O=X("number",[0,20],10,a),Y.fire({radius:fa(O,B),refresh:!0}))}function qa(a){N||(P=X("number",[0,1],0.5,
a),"object"==typeof h&&Z(h,B,x,P))}function F(a){_returnExperienceLoaded=!1;if("portrait"===a){G="portrait";var d="one column"}"landscape"===a&&(G="landscape",d="two column");ia.fire({orientation:G,format:d,width:ra,height:ba});m()}function Pa(a){a&&(u=a);H&&ga&&(u+=B-2);"object"==typeof h&&(h.style.width=u+"px");return this}function L(a){a&&(o=a);H&&ga&&(o=o+2*B-4);a&&"object"==typeof h&&(h.style.height=o+"px");return this}function ca(){da>=W&&"undefined"===typeof window.orientation?"landscape"!==
G&&F("landscape"):90===window.orientation||-90===window.orientation?"landscape"!==G&&F("landscape"):"portrait"!==G&&F("portrait");m()}function l(){var a,d=h;a="undefined"!=typeof window.innerWidth?window.innerHeight:document.documentElement.offsetHeight;var e=pa();Ca(d);v.style.height=a+e+"px"}var ra=380,ba=131,h,q="janrainModal",g,v,t,u=ra,o=ba,B=10,x="#000000",O=10,P=0.5,y=!1,Q=b("images/lightbox-close.png?dcb=2618163124"),J="",N=janrain.settings&&janrain.settings.capture&&janrain.settings.capture.noModalBorderInlineCss,
R=!1,M,G="landscape",U=!0,V="boolean"===typeof V?V:"number"===typeof window.orientation?!0:!1,C,K="boolean"===typeof C?C:!1,$=$||!1;janrain.settings&&janrain.settings.capture&&janrain.settings.capture.modalCloseImage&&(Q=janrain.settings.capture.modalCloseImage,R=!0);janrain.settings&&janrain.settings.capture&&janrain.settings.capture.modalCloseHtml&&(J=janrain.settings.capture.modalCloseHtml);window.janrain.events.onModalClose||(window.janrain.events.onModalClose=new n);var oa=new n,p=new n,Y=new n,
ha=new n,ia=new n;ea.onOrientationChange.addHandler(function(a){F(a.orientation)});return{setWidth:function(a){Pa(a);return this},setHeight:function(a){L(a);return this},setBorder:function(a){("string"==typeof a||"number"==typeof a)&&k(a);N||"object"==typeof h&&Z(h,B,x,P);return this},setBorderColor:function(a){a&&j(a);N||"object"==typeof h&&Z(h,B,x,P);return this},setBorderRadius:function(a){("string"==typeof a||"number"==typeof a)&&aa(a);N||"object"==typeof h&&ja(h,O);return this},setBorderOpacity:function(a){("number"===
typeof a||"string"===typeof a)&&qa(a);return this},setZIndex:function(a){v.style.zIndex=a},setPreviewMode:function(a){"boolean"===typeof a&&(K=a);return this},setId:function(a){q=a;h&&(h.id=a);return this},show:function(){V||(h.style.display="block");"object"==typeof g&&U&&(g.style.display="block");K?V&&(h.style.display="block"):(v.style.display="block",V?(ea.setElement(h).activate(),h.style.display="block"):(A(window,"resize",ca),A(window,"scroll",l),ca()));N||Y.fire({radius:fa(O,B),refresh:!1});
p.fire();h.focus()},close:function(a){w(a)},refresh:function(){$||h.appendChild(t);m()},remove:function(){if(K){var a=document.getElementById("previewMode");"object"===typeof t&&h.removeChild(t);"object"===typeof h&&a.removeChild(h);"object"===typeof v&&document.body.removeChild(v);if(a=document.getElementById("janrainEngageEmbed_old"))a.id="janrainEngageEmbed";v=h=""}else"object"===typeof t&&h.removeChild(t),"object"===typeof v&&document.body.removeChild(v),"object"===typeof h&&document.body.removeChild(h)},
addContent:function(d){g=d;if(!h){h=document.createElement("div");h.id=q;if("number"===typeof u||"string"===typeof u)h.style.width=u+"px";h.style.height=o+"px";h.style.position="absolute";N||(h.style.padding=B+"px",ja(h,O),Z(h,B,x,P));h.style.zIndex=1E3;h.style.display="none";v=document.createElement("div");v.style.width="100%";v.style.left=0;v.style.top=0;v.style.backgroundColor="#000000";v.style.position="absolute";d=v;"undefined"!==typeof d.style.filter&&(d.style.filter="alpha(opacity=40)");"undefined"!==
typeof d.style.opacity&&(d.style.opacity="0.4");"undefined"!==typeof d.style.KhtmlOpacity&&(d.style.KhtmlOpacity="0.4");"undefined"!==typeof d.style.MozOpacity&&(d.style.MozOpacity="0.4");v.style.display="none";v.style.zIndex=1E3;t=J?a("a"):a();h.appendChild(t);document.body.appendChild(v);document.body.appendChild(h)}h.appendChild(g);K&&m();return this},getContent:function(){return g},getBorderWidth:function(){return B},getState:function(){return{borderWidth:B,borderColor:x,borderRadius:O,borderOpacity:P,
orientation:P}},setState:function(a){var d;"undefined"!==typeof sa&&(d=sa);"undefined"!==typeof d&&0<=d.indexOf("customizable_auth_widget_styling")&&("undefined"!==typeof a.borderWidth&&k(a.borderWidth),"undefined"!==typeof a.borderColor&&j(a.borderColor),"undefined"!==typeof a.borderOpacity&&qa(a.borderOpacity),"undefined"!==typeof a.orientation&&F(a.orientation),"undefined"!==typeof a.borderRadius&&(("string"==typeof a.borderRadius||"number"==typeof a.borderRadius)&&aa(a.borderRadius),"object"==
typeof h&&ja(h,O)))},setConfirmClose:function(a){y=a;return this},setShowContentOnLoad:function(a){U=a;return this},onClose:oa,onShow:p,onOrientationChange:ia,onBorderRadiusChange:Y,onBorderWidthChange:ha}}function Ia(){var a,w,d,e,b="/";return{create:function(){document.cookie=w+"="+d+";expires="+a+(e?"; domain="+e:"")+"; path="+b},remove:function(){var a=e?"; domain="+e:"",j=new Date;j.setTime(j.getTime()+-864E6);document.cookie=w+"="+d+";expires="+j.toGMTString()+a+"; path="+b},setExpirationDirectly:function(d){d&&
(a=d);return this},setExpiration:function(d){if(d){var e=new Date;e.setTime(e.getTime()+864E5*d);a=e.toGMTString()}return this},setName:function(a){a&&(w=a);return this},setValue:function(a){a&&(d=a);return this},setPath:function(a){a&&(b=a);return this},setDomain:function(a){a&&(e=a);return this},getCookie:function(a){a:{var d,e,w,b;d=document.cookie.split(";");e=d.length;for(var m=0;m<e;m++)if(w=d.pop(),b=w.split("="),w=b[0],b=b[1],w.trim()===a){a=b;break a}a=!1}return a}}}function ja(a,w,d,e,b,
k){"number"===typeof d&&"number"===typeof e&&"number"===typeof b&&"number"===typeof k?("undefined"!==typeof a.style.borderRadius&&(a.style.borderRadius=d+"px "+e+"px "+b+"px "+k+"px"),"undefined"!==typeof a.style.MozBorderRadius&&(a.style.MozBorderRadius=d+"px "+e+"px "+b+"px "+k+"px"),"undefined"!==typeof a.style.webkitBorderRadius&&(a.style.webkitBorderRadius=d+"px "+e+"px "+b+"px "+k+"px")):("undefined"!==typeof a.style.borderRadius&&(a.style.borderRadius=w+"px"),"undefined"!==typeof a.style.MozBorderRadius&&
(a.style.MozBorderRadius=w+"px"),"undefined"!==typeof a.style.webkitBorderRadius&&(a.style.webkitBorderRadius=w+"px"));return a}function fa(a,b){if("undefined"===typeof a||"undefined"===typeof b)return!1;var d=a-b;0>d&&(d=0);d>a&&(d=a);return d}function Z(a,b,d,e){var m=ta(d),d=ta(d,e);if(0<b){a.style.backgroundColor=m;a.style.padding=b+"px";if(0<H&&8>=H||H&&ga)return!1;a.style.backgroundColor=d;a.style.padding=b+"px"}else a.style.backgroundColor="",a.style.padding="0px"}function ta(a,b){if("#"!==
a.charAt(0))return a;4===a.length&&(a=a[0]+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]);var a=a.substring(1,7),d=parseInt(a.substring(0,2),16),e=parseInt(a.substring(2,4),16),m=parseInt(a.substring(4,6),16);return isNaN(b)?"rgb("+d+","+e+","+m+")":"rgba("+d+","+e+","+m+","+b+")"}function A(a,b,d){if(null==a)return!1;"object"===typeof window.attachEvent?a.attachEvent("on"+b,d):a.addEventListener(b,d,!1)}function Da(a,b,d){"object"===typeof window.detachEvent?a.detachEvent("on"+b,d):a.removeEventListener(b,d,!1)}
function pa(){return document.documentElement.scrollTop>=document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}function Ca(a){return{width:parseInt(a.style.width||a.offsetWidth),height:parseInt(a.style.height||a.offsetHeight)}}function X(a,b,d,e,m){var k=/(?:^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$)|(?:^#[a-f0-9]{1,6}$)/i;if("url"===a){if("string"!==typeof e)return d;e=e.trim();return/^http(?:s)?:\/\/[-a-z0-9._~@:!$&'()*+,;=\s/?#]+$/i.test(e)?e:d}if("usertext"===a)return"string"!==
typeof e&&"number"!==typeof e?d:g(b)?1===b.length?e.length<=b[0]?e:d:2===b.length&&e.length<=b[1]&&e.length>=b[0]?e:d:e;"string"===typeof e&&0==e.length&&(e=" ");if(!/^(?:[^\u0000-\u0080]|[0-9a-z?,.!&\s#])+$/i.test(e))return m||E.log(e+" contains invalid character(s)"),d;if("boolean"===a){if("boolean"===typeof e)return e;m||E.log(e+" is wrong type, must be boolean, using default value instead");return d}if("text"===a)return e;if("number"===a){if(isNaN(parseInt(e)))return m||E.log(e+" is wrong type, must be a valid number"),
d;e=parseFloat(e)}if("color"===a){e&&(e=e.trim());if("transparent"===e||k.test(e))return e;m||E.log('Value of "'+e+'" for '+arguments.callee.caller.name+' is not a valid value, using default value of "'+d+'" instead');return d}if(typeof e!=a&&"color"!=a)return m||E.log(e+" for "+arguments.callee.caller.name+" is "+typeof e+" expected "+a),d;if("object"===typeof b&&"string"===a){if(0<=b.indexOf(e))return e;m||E.log('Value of "'+e+'" for '+arguments.callee.caller.name+' is not a valid value, using default value of "'+
d+'" instead');return d}if("object"===typeof b&&"number"===a){if(2===b.length)var k=b[0],j=b[1];else var k=b.shift(),j=b.pop(),aa=b;if(e<k)return m||E.log("Value of "+e+" for "+arguments.callee.caller.name+" is below minimum of "+k+", using minimum value of "+k+" instead"),k;if(e>j)return m||E.log("Value of "+e+" for "+arguments.callee.caller.name+" is above maximum of "+j+", using maximum value of "+j+" instead"),j;if(aa&&"number"===typeof aa.indexOf(e)||e==k||e==j)return e;return aa?(m||E.log("Value of "+
e+" for "+arguments.callee.caller.name+" is not a valid value, using default value of "+d+" instead"),d):e}return 0!=e&&!e?d:e}function Ea(a){for(var b=Ea.options,a=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;e--;)d[b.key[e]]=a[e]||"";d[b.q.name]={};d[b.key[12]].replace(b.q.parser,function(a,e,j){e&&(d[b.q.name][e]=j)});return d}function Q(a){return J(a).getAttribute("id")}function U(a){return document.getElementById(Q(a))}function J(a){return a.target?a.target:a.srcElement}function $(a,
b){var d=document.createElement("script"),e=document.getElementsByTagName("script")[0];d.src=a;d.setAttribute("type","text/javascript");"function"===typeof b&&(d.addEventListener?d.addEventListener("load",b,!1):d.readyState&&(d.onreadystatechange=function(){("complete"==d.readyState||"loaded"==d.readyState)&&b()}));e.parentNode.insertBefore(d,e)}function Fa(a,b){if(H){var d=document.createElement("link");d.rel="stylesheet";d.href=a;d.type="text/css"}else d=document.createElement("style"),d.textContent=
'@import "'+a+'";';if(H)d.onload=function(){"function"===typeof b&&b();"object"===typeof janrain.events.onCssLoad&&janrain.events.onCssLoad.fire({source:a})},d.onreadystatechange=function(){if("complete"==d.readyState||"loaded"==d.readyState)"function"===typeof b&&b(),"object"===typeof janrain.events.onCssLoad&&janrain.events.onCssLoad.fire({source:a})};else var e=setInterval(function(){try{d.sheet.cssRules,"function"===typeof b&&b(),"object"===typeof janrain.events.onCssLoad&&janrain.events.onCssLoad.fire({source:a}),
clearInterval(e)}catch(m){}},10);document.getElementsByTagName("head")[0].appendChild(d)}function t(a){var b;b=a&&a.className?a.className.split(" "):[];return{append:function(d){-1===b.indexOf(d)&&(b.push(d),a&&(a.className=b.join(" ")));return this},remove:function(d){-1!==b.indexOf(d)&&(b.splice([b.indexOf(d)],1),a&&(a.className=b.join(" ").trim()));return this},has:function(a){return-1!==b.indexOf(a)}}}function g(a){return"[object Array]"===Object.prototype.toString.call(a)}function R(a){a&&a.parentNode&&
a.parentNode.removeChild(a)}function D(a){if(!a)return!1;a.preventDefault?a.preventDefault():a.returnValue=!1}function n(){this.eventHandlers=[];this.firedEvents=[]}function ua(){function a(){if("object"!==typeof janrain.events||"object"!==typeof janrain.apps.capture)return!1;for(var a="onCaptureRenderStart,onCaptureRenderComplete,onCaptureSessionCreated,onCaptureSuccessfulLogin,onCaptureFailedLogin,onCaptureSuccessfulRegistration,onCaptureFailedRegistration,onCaptureStartRegistration,onCaptureSuccessfulSave,onCaptureFailedSave,onCaptureContentChange,onCaptureModalReady,onCaptureValidationSuccess,onCaptureValidationFailed,onCaptureSessionFound".split(","),
b=0;b<a.length;b++)if("object"!==typeof janrain.events[a[b]])return!1;return!0}if("function"===typeof janrainCaptureWidgetOnLoad)if(a())clearTimeout(b),janrainCaptureWidgetOnLoad();else var b=setTimeout(ua,5)}var sa=janrain.settings.permissions,ga="CSS1Compat"!==document.compatMode;navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad|blackberry|rim tablet|android|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|playstation portable|sonyericsson|samsung|mobileexplorer|palmsource|benq|windows phone|windows mobile|iemobile|windows ce|nintendo wii|\Wsilk\W)/i);
Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b in this)if(this[b]===a)return parseInt(b);return-1});Array.prototype.map||(Array.prototype.map=function(a,b){if(null===this)throw new TypeError;var d=Object(this),e=d.length>>>0;if("function"!==typeof a)throw new TypeError;for(var m=Array(e),k=0;k<e;k++)k in d&&(m[k]=a.call(b,d[k],k,d));return m});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var ea=function(){function a(){if("undefined"===
typeof window.orientation)return!1;var a;d(document.body,g);F=k().content;j();aa();document.body.style.padding="0px";document.body.style.margin="0px";"object"===typeof window.onresize&&(a="resize");"object"===typeof window.onorientationchange&&(a="orientationchange");a&&(window.addEventListener(a,function(){Ja(window.orientation,{height:screen?screen.height:0,width:screen?screen.width:0},{height:window.innerHeight,width:window.innerWidth});m()},!1),setTimeout(m,30),window.addEventListener("beforeunload",
function(){window.removeEventListener(a,m,!1)},!1));window.addEventListener("beforeunload",function(){window.removeEventListener(eventName,m,!1)},!1)}function b(){setTimeout(function(){qa(F)},20);d(g,document.body)}function d(a,b){for(var d=0;d<a.style.length;d++){var e=a.style[d];b.style.setProperty(e,a.style.getPropertyValue(e),a.style.getPropertyPriority(e))}}function e(){var a;a=(0===window.orientation||180===window.orientation)&&da>W||(90===window.orientation||-90===window.orientation)&&W>da?
!1:!0;var b="landscape";if(a&&(0===window.orientation||180===window.orientation))b="portrait";if(!a&&(90===window.orientation||-90===window.orientation))b="portrait";return b}function m(){var a=e();qa("width="+(0===window.orientation||180===window.orientation?"device-width":"device-height")+", initial-scale=1, maximum-scale=1");l.fire({orientation:a})}function k(){var a=document.getElementsByTagName("meta"),b;for(b in a)if("viewport"===a[b].name)return a[b];return!1}function j(){if("undefined"===
typeof document.getElementsByTagName||k())return!1;var a=document.getElementsByTagName("head")[0],b=document.createElement("meta");b.setAttribute("name","viewport");a.appendChild(b);return!0}function aa(){if("undefined"===typeof document.getElementsByTagName)return!1;document.getElementsByTagName("head");var a=document.createElement("meta");a.setAttribute("name","HandheldFriendly");a.content="true"}function qa(a){var b=k();if(!b||b.content==a)return!1;if("undefined"===typeof a){var d=k();document.getElementsByTagName("head")[0].removeChild(d)}b.content=
a;return!0}var F,g=document.createElement("div"),L=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad|blackberry|rim tablet|android|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|playstation portable|sonyericsson|samsung|mobileexplorer|palmsource|benq|windows phone|windows mobile|iemobile|windows ce|nintendo wii|\Wsilk\W)/i),ca=null!==L?L[0]:!1,l=new n;ca&&ca[0].match(/android|\Wsilk\W/);return{setElement:function(){return this},onOrientationChange:l,
getMobileDevice:function(){return ca},getOrientation:function(){return e()},activate:function(){a()},deactivate:function(){b()}}}(),b=function(a){var b;b="http://static.engage-dev.janrain.com/cdn_widgets/".replace(/\/$/,"");return b+"/"+a},l=[];b("images/auth/customizable/logos/100x30/aol.png?dcb=3683319090");b("images/auth/customizable/logos/150x50/aol.png?dcb=2180386328");b("images/auth/customizable/icons/30x30/aol.png?dcb=3007482681");b("images/auth/customizable/icons/50x50/aol.png?dcb=2890807677");
l.push("aol");b("images/auth/customizable/logos/100x30/blogger.png?dcb=2803941108");b("images/auth/customizable/logos/150x50/blogger.png?dcb=1848585108");b("images/auth/customizable/icons/30x30/blogger.png?dcb=2059038574");b("images/auth/customizable/icons/50x50/blogger.png?dcb=3097495133");l.push("blogger");b("images/auth/customizable/logos/100x30/livejournal.png?dcb=2201554391");b("images/auth/customizable/logos/150x50/livejournal.png?dcb=1519872918");b("images/auth/customizable/icons/30x30/livejournal.png?dcb=1184306417");
b("images/auth/customizable/icons/50x50/livejournal.png?dcb=232569010");l.push("livejournal");b("images/auth/customizable/logos/100x30/netlog.png?dcb=3212129804");b("images/auth/customizable/logos/150x50/netlog.png?dcb=3362336964");b("images/auth/customizable/icons/30x30/netlog.png?dcb=1734817172");b("images/auth/customizable/icons/50x50/netlog.png?dcb=1580932448");l.push("netlog");b("images/auth/customizable/logos/100x30/wordpress.png?dcb=2111604431");b("images/auth/customizable/logos/150x50/wordpress.png?dcb=1132732042");
b("images/auth/customizable/icons/30x30/wordpress.png?dcb=1276342177");b("images/auth/customizable/icons/50x50/wordpress.png?dcb=3086150132");l.push("wordpress");b("images/auth/customizable/logos/100x30/openid.png?dcb=2209461438");b("images/auth/customizable/logos/150x50/openid.png?dcb=130193023");b("images/auth/customizable/icons/30x30/openid.png?dcb=3406677040");b("images/auth/customizable/icons/50x50/openid.png?dcb=3262281785");l.push("openid");b("images/auth/customizable/logos/100x30/flickr.png?dcb=916440731");
b("images/auth/customizable/logos/150x50/flickr.png?dcb=2376992655");b("images/auth/customizable/icons/30x30/flickr.png?dcb=878329140");b("images/auth/customizable/icons/50x50/flickr.png?dcb=1618717242");l.push("flickr");b("images/auth/customizable/logos/100x30/google.png?dcb=3453253391");b("images/auth/customizable/logos/150x50/google.png?dcb=3954393221");b("images/auth/customizable/icons/30x30/google.png?dcb=1611111432");b("images/auth/customizable/icons/50x50/google.png?dcb=2983573772");l.push("google");
b("images/auth/customizable/logos/100x30/hyves.png?dcb=1263531472");b("images/auth/customizable/logos/150x50/hyves.png?dcb=389917752");b("images/auth/customizable/icons/30x30/hyves.png?dcb=2853221288");b("images/auth/customizable/icons/50x50/hyves.png?dcb=1790628070");l.push("hyves");b("images/auth/customizable/logos/100x30/myopenid.png?dcb=1432654497");b("images/auth/customizable/logos/150x50/myopenid.png?dcb=3718123737");b("images/auth/customizable/icons/30x30/myopenid.png?dcb=327371716");b("images/auth/customizable/icons/50x50/myopenid.png?dcb=417868357");
l.push("myopenid");b("images/auth/customizable/logos/100x30/paypal.png?dcb=1363121355");b("images/auth/customizable/logos/150x50/paypal.png?dcb=562396660");b("images/auth/customizable/icons/30x30/paypal.png?dcb=1041145513");b("images/auth/customizable/icons/50x50/paypal.png?dcb=3817003344");l.push("paypal");b("images/auth/customizable/logos/100x30/verisign.png?dcb=398784277");b("images/auth/customizable/logos/150x50/verisign.png?dcb=3029055416");b("images/auth/customizable/icons/30x30/verisign.png?dcb=3841322585");
b("images/auth/customizable/icons/50x50/verisign.png?dcb=535522729");l.push("verisign");b("images/auth/customizable/logos/100x30/yahoo.png?dcb=904635399");b("images/auth/customizable/logos/150x50/yahoo.png?dcb=2080515930");b("images/auth/customizable/icons/30x30/yahoo.png?dcb=3333285764");b("images/auth/customizable/icons/50x50/yahoo.png?dcb=512255553");l.push("yahoo");b("images/auth/customizable/logos/100x30/facebook.png?dcb=3114434478");b("images/auth/customizable/logos/150x50/facebook.png?dcb=1054668000");
b("images/auth/customizable/icons/30x30/facebook.png?dcb=2608724727");b("images/auth/customizable/icons/50x50/facebook.png?dcb=3141157127");l.push("facebook");b("images/auth/customizable/logos/100x30/myspace.png?dcb=3349671361");b("images/auth/customizable/logos/150x50/myspace.png?dcb=4110909745");b("images/auth/customizable/icons/30x30/myspace.png?dcb=1902201134");b("images/auth/customizable/icons/50x50/myspace.png?dcb=2600974390");l.push("myspace");b("images/auth/customizable/logos/100x30/twitter.png?dcb=2118747038");
b("images/auth/customizable/logos/150x50/twitter.png?dcb=3074605550");b("images/auth/customizable/icons/30x30/twitter.png?dcb=3811593289");b("images/auth/customizable/icons/50x50/twitter.png?dcb=2378421903");l.push("twitter");b("images/auth/customizable/logos/100x30/linkedin.png?dcb=267385202");b("images/auth/customizable/logos/150x50/linkedin.png?dcb=1302556760");b("images/auth/customizable/icons/30x30/linkedin.png?dcb=3141261860");b("images/auth/customizable/icons/50x50/linkedin.png?dcb=947005677");
l.push("linkedin");b("images/auth/customizable/logos/100x30/liveid.png?dcb=2727857795");b("images/auth/customizable/logos/150x50/liveid.png?dcb=3807758334");b("images/auth/customizable/icons/30x30/liveid.png?dcb=1792055665");b("images/auth/customizable/icons/50x50/liveid.png?dcb=2495889396");l.push("live_id");b("images/auth/customizable/logos/100x30/salesforce.png?dcb=973953841");b("images/auth/customizable/logos/150x50/salesforce.png?dcb=3842590429");b("images/auth/customizable/icons/30x30/salesforce.png?dcb=2232604420");
b("images/auth/customizable/icons/50x50/salesforce.png?dcb=3776513182");l.push("salesforce");b("images/auth/customizable/logos/100x30/orkut.png?dcb=1811290700");b("images/auth/customizable/logos/150x50/orkut.png?dcb=610360542");b("images/auth/customizable/icons/30x30/orkut.png?dcb=312415621");b("images/auth/customizable/icons/50x50/orkut.png?dcb=1962522069");l.push("orkut");b("images/auth/customizable/logos/100x30/vzn.png?dcb=2278834786");b("images/auth/customizable/logos/150x50/vzn.png?dcb=2035041381");
b("images/auth/customizable/icons/30x30/vzn.png?dcb=1733754201");b("images/auth/customizable/icons/50x50/vzn.png?dcb=4152372179");l.push("vzn");b("images/auth/customizable/logos/100x30/foursquare.png?dcb=57575607");b("images/auth/customizable/logos/150x50/foursquare.png?dcb=274064282");b("images/auth/customizable/icons/30x30/foursquare.png?dcb=1355997914");b("images/auth/customizable/icons/50x50/foursquare.png?dcb=2631315188");l.push("foursquare");b("images/auth/customizable/logos/100x30/mixi.png?dcb=1303936596");
b("images/auth/customizable/logos/150x50/mixi.png?dcb=1860350097");b("images/auth/customizable/icons/30x30/mixi.png?dcb=675795154");b("images/auth/customizable/icons/50x50/mixi.png?dcb=292765628");l.push("mixi");for(var l={openId:{aol:{identifier:"aol",flow:"openid1",width:514,height:550,color:"#0FD6FF"},blogger:{identifier:"blogger",flow:"openid1",width:800,height:600,color:"#FF6600"},livejournal:{identifier:"livejournal",flow:"openid1",width:800,height:600,color:"##213368"},netlog:{identifier:"netlog",
flow:"openid1",width:800,height:600,color:"#000000"},wordpress:{identifier:"wordpress",flow:"openid1",width:800,heigh:600,color:"#21759b"},openid:{identifier:"openid",flow:"openid1",width:800,height:600,color:"#f79311"}},openId2:{flickr:{identifier:"https://me.yahoo.com/id",flow:"openid",width:500,height:500,color:"#FF0084"},google:{identifier:"https://www.google.com/accounts/o8/id",flow:"openid",width:500,height:450,color:"#1C69F5"},hyves:{identifier:"http://hyves.nl/",flow:"openid",width:800,height:600,
color:"#659BC8"},myopenid:{identifier:"http://myopenid.com/",flow:"openid",width:800,height:600,color:"#8cc63f"},paypal:{identifier:"https://www.paypal.com/webapps/auth/server",flow:"openid",width:800,height:600,color:"#1A3665"},verisign:{identifier:"http://pip.verisignlabs.com/",flow:"openid",width:945,height:600,color:"#B8004D"},yahoo:{identifier:"https://me.yahoo.com/id",flow:"openid",width:500,height:500,color:"#650065"}},oauth:{facebook:{flow:"facebook",width:500,height:500,color:"#3B5998"},
myspace:{flow:"myspace",width:800,height:500,color:"#000000"},twitter:{flow:"twitter",width:800,height:500,color:"#35CCFF"},linkedin:{flow:"linkedin",width:550,height:750,color:"#009DDC"},live_id:{flow:"liveid",width:900,height:600,color:"#666666"},salesforce:{flow:"salesforce",width:800,height:500,color:"#333333"},orkut:{flow:"orkut",width:800,height:600,color:"#333"},vzn:{flow:"vzn",width:600,height:450,color:"#333"},foursquare:{flow:"foursquare",width:950,height:550,color:"#333"},mixi:{flow:"mixi",
width:950,height:550,color:"#333"}}},ka=["openId","openId2","oauth"];0<ka.length;){var Ka=ka.pop(),va;for(va in l[Ka]);}W=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;da=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth;var Ja=function(){var a=window.orientation,b={height:screen?screen.height:0,width:screen?screen.width:0},d={height:window.innerHeight,width:window.innerWidth},e=!1;return function(m,k,j){var g=!1,l=function(a,
b){return a.height>=a.width&&b.height>=b.width||a.width>a.height&&b.width>b.height?!0:!1},F=a===m,n=l(k,b),L=l(j,d);if(!F&&(!n||!L))g=!0;!F&&!n&&(e=!0);g&&(e&&!l(k,j)&&(g=j.height,j.height=j.width,j.width=g),W=j.height,da=j.width);a=m;b={height:k.height,width:k.width};d={height:j.height,width:j.width}}}(),H;H="Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)?parseFloat(RegExp.$1):!1;Ea.options={strictMode:!1,key:"source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(","),
q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var La=function(a,b,d){La=document.getElementsByClassName?function(a,b,d){for(var a=(d||document).getElementsByClassName(a),
b=b?RegExp("\\b"+b+"\\b","i"):null,d=[],j,g=0,l=a.length;g<l;g+=1)j=a[g],(!b||b.test(j.nodeName))&&d.push(j);return d}:function(a,b,d){var b=b||"*",d=d||document,j=a.split(" "),a=[],b="*"===b&&d.all?d.all:d.getElementsByTagName(b),d=[],g;g=0;for(var l=j.length;g<l;g+=1)a.push(RegExp("(^|\\s)"+j[g]+"(\\s|$)"));for(var l=0,F=b.length;l<F;l+=1){j=b[l];g=!1;for(var w=0,L=a.length;w<L&&!(g=a[w].test(j.className),!g);w+=1);g&&d.push(j)}return d};return La(a,b,d)},E=function(){var a=[];return{log:function(b){var d=
{};d.id=a.length+1;d.message=b;a.push(d);return this},show:function(){if(0!=a.length){for(var b in a)if("undefined"!==typeof a[b].id){var d=a[b];"object"===typeof console&&console.error("WARNING ID:"+d.id+" MESSAGE: "+d.message)}a=[]}}}}();n.prototype.addHandler=function(a){this.eventHandlers.push(a);return this.eventHandlers.length-1};n.prototype.removeHandler=function(a){return this.eventHandlers[a]?(this.eventHandlers[a]=null,!0):!1};n.prototype.fire=function(a){for(var b=this.eventHandlers.length,
d=0;d<b;d++)try{if("function"===typeof this.eventHandlers[d])this.eventHandlers[d](a)}catch(e){E.log(e),E.show()}this.firedEvents.push({event:this,args:a})};"undefined"===typeof janrain.events&&(janrain.events={});var u;u||(u={});(function(){function a(a){return 10>a?"0"+a:a}function b(a){g.lastIndex=0;return g.test(a)?'"'+a.replace(g,function(a){var b=l[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,e){var g,l,m,t,u=k,h,q=e[a];q&&
"object"===typeof q&&"function"===typeof q.toJSON&&(q=q.toJSON(a));"function"===typeof n&&(q=n.call(e,a,q));switch(typeof q){case "string":return b(q);case "number":return isFinite(q)?""+q:"null";case "boolean":case "null":return""+q;case "object":if(!q)return"null";k+=j;h=[];if("[object Array]"===Object.prototype.toString.apply(q)){t=q.length;for(g=0;g<t;g+=1)h[g]=d(g,q)||"null";m=0===h.length?"[]":k?"[\n"+k+h.join(",\n"+k)+"\n"+u+"]":"["+h.join(",")+"]";k=u;return m}if(n&&"object"===typeof n){t=
n.length;for(g=0;g<t;g+=1)"string"===typeof n[g]&&(l=n[g],(m=d(l,q))&&h.push(b(l)+(k?": ":":")+m))}else for(l in q)Object.prototype.hasOwnProperty.call(q,l)&&(m=d(l,q))&&h.push(b(l)+(k?": ":":")+m);m=0===h.length?"{}":k?"{\n"+k+h.join(",\n"+k)+"\n"+u+"}":"{"+h.join(",")+"}";k=u;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+
a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,j,l={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},
n;"function"!==typeof u.stringify&&(u.stringify=function(a,b,e){var g;j=k="";if("number"===typeof e)for(g=0;g<e;g+=1)j+=" ";else"string"===typeof e&&(j=e);if((n=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",{"":a})});"function"!==typeof u.parse&&(u.parse=function(a,b){function d(a,e){var g,h,k=a[e];if(k&&"object"===typeof k)for(g in k)Object.prototype.hasOwnProperty.call(k,g)&&(h=d(k,g),void 0!==h?k[g]=h:delete k[g]);return b.call(a,
e,k)}var g,a=""+a;e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+a+")"),"function"===typeof b?d({"":g},""):g;throw new SyntaxError("JSON.parse");})})();"undefined"===typeof janrain.events.onCssLoad&&(janrain.events.onCssLoad=
new n);"undefined"===typeof janrain.events.onCaptureRenderStart&&(janrain.events.onCaptureRenderStart=new n);"undefined"===typeof janrain.events.onCaptureRenderComplete&&(janrain.events.onCaptureRenderComplete=new n);"undefined"===typeof janrain.events.onCaptureSessionCreated&&(janrain.events.onCaptureSessionCreated=new n);"undefined"===typeof janrain.events.onCaptureStartRegistration&&(janrain.events.onCaptureStartRegistration=new n);"undefined"===typeof janrain.events.onCaptureSuccessfulLogin&&
(janrain.events.onCaptureSuccessfulLogin=new n);"undefined"===typeof janrain.events.onCaptureFailedLogin&&(janrain.events.onCaptureFailedLogin=new n);"undefined"===typeof janrain.events.onCaptureSuccessfulRegistration&&(janrain.events.onCaptureSuccessfulRegistration=new n);"undefined"===typeof janrain.events.onCaptureFailedRegistration&&(janrain.events.onCaptureFailedRegistration=new n);"undefined"===typeof janrain.events.onCaptureSuccessfulSave&&(janrain.events.onCaptureSuccessfulSave=new n);"undefined"===
typeof janrain.events.onCaptureFailedSave&&(janrain.events.onCaptureFailedSave=new n);"undefined"===typeof janrain.events.onCaptureSessionFound&&(janrain.events.onCaptureSessionFound=new n);"undefined"===typeof janrain.events.onCaptureContentChange&&(janrain.events.onCaptureContentChange=new n);"undefined"===typeof janrain.events.onCaptureModalReady&&(janrain.events.onCaptureModalReady=new n);"undefined"===typeof janrain.events.onCaptureValidationSuccess&&(janrain.events.onCaptureValidationSuccess=
new n);"undefined"===typeof janrain.events.onCaptureValidationFailed&&(janrain.events.onCaptureValidationFailed=new n);ua();va=new function(){return{status:"not loaded"}};l=new function(){return{status:"not loaded"}};ka=new function(){function a(c){function f(){ca();Ba=!0;$(c);janrain.events.onCaptureContentChange.addHandler(function(){"object"===typeof s&&y.modal&&(s.setHeight(Ca(y.div).height),s.setWidth(Ca(y.div).width).refresh())})}Fa("http://janrain.ui.s3.amazonaws.com/quilt/stylesheets/quilt-widget.css");
H&&9>H&&Fa("http://janrain.ui.s3.amazonaws.com/quilt/stylesheets/quilt-widget-ie.css",void 0);if(janrain.settings.capture.stylesheets&&g(janrain.settings.capture.stylesheets))for(var a=janrain.settings.capture.stylesheets,I=a.length,d=0;d<I;d++)Fa(a[d]),b(a[d]);if(H&&9>H&&janrain.settings.capture.conditionalIEStylesheets&&g(janrain.settings.capture.conditionalIEStylesheets)){a=janrain.settings.capture.conditionalIEStylesheets;I=a.length;for(d=0;d<I;d++)H&&9>H&&Fa(a[d],void 0),b(a[d])}janrain.settings.capture.redirectFlow?
da(f):f()}function b(c){(!g(wa)?0:-1<wa.indexOf(c))||wa.push(c);Ma=wa.length}function d(c){if(!c)return!1;for(var f=c.getElementsByTagName("input"),a=c.getElementsByTagName("select"),b=c.getElementsByTagName("textarea"),c=[],f=[f,a,b],a={},b=0,d=f.length;b<d;b++)for(var e=f[b],i=e.length,g=0;g<i;g++){var T=e[g];"true"===T.getAttribute("data-capturecollection")?a[T.name]||(E(T,!0)||c.push(T),a[T.name]=!0):E(T,!0)||c.push(T)}return 0===c.length}function e(){}function l(){}function k(c){function f(c){c=
c?u.stringify(c):a;h(e);i.className="formClicked";i.setAttribute("next",c)}var a=J(c).getAttribute("next"),b=J(c),e=J(c).getAttribute("data-transactionId"),i=document.getElementById("captureIFrame_"+e),g=u.parse(a),k=!1;y.values=v(y.div.id);if(!d(b))return D(c),!1;if(g.conditional){for(var b=g.conditional,g=b.length,T=0;T<g;T++)if(j(b[T])){k=b[T];break}k?k.nosubmit?(D(c),F(k.next)):f(k.next):f()}else g.dontSubmit?(D(c),g.storeValues&&v(b.id,!0),F(g)):f()}function j(c){var f=p.fields[c.field],f=document.getElementById("capture_"+
(f.elementId||f.elementName));switch(c.compare){case "=":if(f.value===c.value)return!0}}function n(c){c=U(c);E(c)}function E(c,f){if(c.type&&("hidden"===c.type||"submit"===c.type))return!0;var a=p.fields[c.getAttribute("data-capturefield")],b=!1;if(!a.validation)return!0;var d="multiCheckbox"===a.element||"multiRadio"===a.element?document.getElementById("capture_form_collection_"+a.elementName):document.getElementById("capture_form_item_"+a.elementName);t(d).append("capture_validating");b=new i.validation;
b.setParentDiv(d);b.setElement(c);a=B.check(c,a,f);a.valid?(b.valid(),b=!0,t(d).remove("capture_validating")):a.pending?(b.pending(),b=!0):(b.notValid(a.reason),b=!1,t(d).remove("capture_validating"));return b}function F(c){P.push(y);if(c.noop)return!1;c.url&&(window.location.href=c.url);c.screen&&(y&&(y.div.style.display="none"),(new X).setScreenData(c.screen,p.screens[c.screen]).render());if(c.action&&y)janrain.capture.ui[c.action]();if(c["function"]&&"function"===typeof ea[c["function"]])ea[c["function"]]()}
function W(){var c=36E5*va+(new Date).getTime();return(new Date((new Date).setTime(c))).toUTCString()}function L(c,f){var a=W();C=c;q("creating session with token: "+C);f?(janrain.events.onCaptureSessionCreated.fire({accessToken:c}),janrain.events.onCaptureSessionFound.fire({accessToken:c})):((new Ia).setExpirationDirectly(a).setName("janrainCaptureToken").setValue(C).create(),V&&(janrain.events.onCaptureSuccessfulLogin.fire({accessToken:c}),V=!1),janrain.events.onCaptureSessionCreated.fire({accessToken:c}))}
function ca(){var c=Ea(window.location.href).anchor;c?(c=c.split("="),"access_token"===c[0]&&c[1]&&(V=!0,L(c[1]))):(c=new Ia,c.getCookie("janrainCaptureToken")&&L(c.getCookie("janrainCaptureToken"),!0))}function da(c){var f=Ea(window.location.href).anchor;if(!f)return c(),!1;var a=f.split(","),b=a.length,d,f={};if(1<b){for(var e=0;e<b;e++)d=a[e],d=d.split("="),f[d[0]]=d[1];if(!f.transactionId||!f.engageToken)return c(),!1;M=c=f.transactionId;fa=f.engageToken;Z("/widget/get_result.jsonp",{transactionId:c},
function(){})}else return c(),!1}function ra(c){if(!g(c))return!1;for(var f=c.length,a=0;a<f;a++){var b=c[a];-1===ya.indexOf(b)&&ya.push(b)}}function ba(){var c=ya.pop();0===ya.length&&$(janrain.settings.capture.captureServer+"/widget/transaction_ids.jsonp");-1===za.indexOf(c)&&za.push(c);return c}function h(c){var f=za.indexOf(c);-1<f&&za.splice(f,1);-1===Aa.indexOf(c)&&Aa.push(c)}function q(){Ka.push(arguments);if(window.console){var c=arguments;c.callee=c.callee.caller;newArray=[].slice.call(c);
H?console.log(newArray):console.log.apply(console,newArray)}}function X(){function c(c){if(c.close)return h.render.htmlElement.close(c);if("data"==c.element)return h.render.data(c);if("multiRadio"==c.element)return h.render.htmlElement.multiRadio(c);if("multiCheckbox"==c.element)return h.render.htmlElement.multiCheckbox(c);if("textarea"==c.element)return h.render.htmlElement.textarea(c);if("select"==c.element)return h.render.htmlElement.select(c);if("input"==c.element)return h.render.htmlElement.input(c);
if("form"==c.element)return h.render.htmlElement.form(c);if("div"==c.element)return h.render.htmlElement.div(c);if("capture"==c.element){if("radioCollection"==c.type)return h.render.captureElement.collection.radio(c);if("photoManager"==c.type)return h.render.captureElement.photoManager(c);if("addressFull"==c.type)return h.render.captureElement.addressFull(c);if("backButton"==c.type)return h.render.captureElement.backButton(c)}return"widget"==c.element?h.render.widget[c.type](c):!1}function f(){r.div.getAttribute("data-captureventadded")||
(A(r.div,"click",function(c){var f=J(c);if(f&&f.nodeName&&"A"===f.nodeName&&(f=f.getAttribute("data-capturescreen")))janrain.capture.ui.renderScreen(f),D(c)}),r.div.setAttribute("data-captureventadded",!0));for(var c=r.div.getElementsByTagName("img"),f=c.length,a=0;a<f;a++)A(c[a],"load",function(){janrain.events.onCaptureContentChange.fire()});c=La(janrain.settings.capture.modalOpenClass||"capture_modal_open");f=c.length;if(!ta){for(a=0;a<f;a++)A(c[a],"click",function(c){"object"===typeof s?(janrain.capture.ui.renderScreen(y.flow.defaultScreen),
s.setShowContentOnLoad(!0).addContent(y.div).show(),janrain.events.onCaptureContentChange.fire()):sa=!0;D(c)});ta=!0}}function a(){if(p.cssDependencies&&g(p.cssDependencies))for(var c=0;c<p.cssDependencies.length;c++)b(p.cssDependencies[c]);Ma&&Ba?janrain.events.onCssLoad.addHandler(function(c){Ga.push(c.source);for(c=0;c<Ma;c++)if(-1==Ga.indexOf(wa[c]))return!1;oa||(d(),oa=!0)}):d();janrain.events.onCaptureRenderComplete.fire(p)}function d(){var c=!1,f=janrain.settings.capture.modalBorderWidth||
10,a=janrain.settings.capture.modalBorderColor||"#000",S=janrain.settings.capture.modalBorderRadius||10,b=janrain.settings.capture.modalBorderOpacity||0.5;if(r.modal){if("object"===typeof s){var c=!0,I=s.getContent();I&&document.body.appendChild(I);s.close(!0)}else s=new Oa;ua||(janrain.events.onCaptureModalReady.fire(),ua=!0);s.setConfirmClose(!!janrain.settings.capture.confirmModalClose).setBorderColor(a).setBorder(f).setBorderOpacity(b).setBorderRadius(S).setShowContentOnLoad(!1).addContent(r.div);
(c||r.modalLoadOnLoad||sa)&&s.show()}else"object"===typeof s&&s.close(!0);r.div.style.display="block";janrain.events.onCaptureContentChange.fire()}function Na(c,f){for(var f=f||o,a=0;a<f.length;a++){if("function"===typeof f[a].handler)if("render"===f[a].eventType)f[a].handler();else{var S=document.getElementById("capture_"+f[a].elementName);A(S,f[a].eventType,f[a].handler)}c&&A(document.getElementById("captureIFrame_"+c),"load",la)}}function la(c){var f=J(c);if("formClicked"===f.className){var a=
f.getAttribute("data-transactionId");Z("/widget/get_result.jsonp",{transactionId:a,cache:(new Date).getTime()},function(){function c(){b++;if(10<b)return q("could not find transaction status"),!1;if(ia[a]){var f=a,d=Aa.indexOf(f);-1<d&&Aa.splice(d,1);-1===ja.indexOf(f)&&ja.push(f);clearTimeout(I);f=ia[a];"success"===f.status?F(S):q("there was a problem with the response",f)}else var I=setTimeout(c,50)}var S=u.parse(f.getAttribute("next")),b=0;c()})}else f.className="";f.className=""}var r={},h;h=
new l;B=new e;return{setScreenData:function(c,f){O=c;var a=f.layout,S=f.source,b=f.modal,d=!!f.modalLoadOnLoad;if("server"===S){var I=document.createElement("div");I.setAttribute("id",a);try{r.html=p.layouts[a].html}catch(e){throw{name:"MissingLayoutError",message:"The json containing the layout template code for '"+a+"' is missing."};}}if("client"===S)try{if(I=document.getElementById(a))t(I).append("janrain-capture-ui").append("capture-ui-content"),ha[a]?r.html=ha[a]:(r.html=I.innerHTML,ha[a]=r.html);
else throw r.html="",{name:"MissingLayoutDivError",message:"The div containing the layout template code for '"+a+"' is missing."};}catch(g){throw q(g.name+": "+g.message,"warn"),Error("Exiting, please see documentation for setting up layouts.");}r.div=I;Y=r.div;r.modalLoadOnLoad=d;r.source=S;r.modal=b;y=r;return this},render:function(){var b=/\{\*(.*?)\*\}/,d=/^\s*\/\s*/,I=/^\s*#\s*/,e=!1;janrain.events.onCaptureRenderStart.fire(p);x=[];p.fields.submitButton||(p.fields.submitButton={element:"input",
type:"submit",label:"",classes:["form_item"],name:"capture_submit",elementName:"capture_submit",value:"Submit"});p.fields.loginWidget||(p.fields.loginWidget={element:"widget",type:"login"});p.fields.backButton||(p.fields.backButton={element:"capture",type:"backButton",name:"capture_back",value:""});r.originalHtml=r.html;r.flow=p;var g=M||ba();M=null;for(var la;la=b.exec(r.html);)try{var h=la[1].trim(),e=!1;I.test(h)&&(h=h.replace("#","").trim(),e=!0);if(d.test(h)){var l=h.replace("/",""),j={};if("undefined"==
typeof p.fields[l])return q("No field definition for"+l,"error"),!1;j.element=p.fields[l].element;j.close=!0}else{if("undefined"==typeof p.fields[h])return q("No field definition named "+h+" for tag "+la[0],"error"),!1;j=p.fields[h];j.name=h;e&&(j.start=!0);"form"===j.element&&!j.transactionId&&(j.transactionId=g);j.elementName=j.elementName||h}var m=c(j);m||(m=" ");r.html=r.html.replace(la[0],m);(j.next||"form"===j.element&&!j.close)&&x.push({elementName:j.elementName,next:j.next});j.onclickHandler&&
o.push({elementName:j.elementName,handler:j.onclickHandler,eventType:"click"});j.onchangeHandler&&o.push({elementName:j.elementName,handler:j.onchangeHandler,eventType:"change"});"string"===typeof j.element&&"form"===j.element&&!j.close&&o.push({elementName:j.elementName,handler:k,eventType:"submit"});if("form"===j.element&&("widget/traditional_register.jsonp"===j.action||"widget/social_register.jsonp"===j.action))janrain.events.onCaptureStartRegistration.fire({action:"widget/traditional_register.jsonp"===
j.action?"traditionalRegister":"socialRegister"})}catch(n){return q(n.name+": "+n.message,"error"),!1}r.div.innerHTML=r.html;"server"==r.source&&document.getElementById("janrainCaptureWidget").appendChild(r.div);b=0;for(d=Ha.length;b<d;b++)E(document.getElementById(Ha[b]));Ha=[];a();f();if(0<janrain.events.onCssLoad.firedEvents.length){var b=janrain.events.onCssLoad.firedEvents,z;for(z in b)"object"==typeof b&&b[z].args&&b[z].args.source&&-1==Ga.indexOf(b[z].args.source)&&b[z].event.fire(b[z].args)}i.domHelpers.createIFrame(g);
for(z=0;z<x.length;z++)b=document.getElementById("capture_"+x[z].elementName),x[z].next&&x[z].next.type&&"server"===x[z].next.type?b.setAttribute("next",'{"noop":""}'):x[z].next?(x[z].next.conditional&&b.setAttribute("next",u.stringify(x[z].next)),x[z].next.screen&&b.setAttribute("next",u.stringify(x[z].next)),x[z].next.url&&b.setAttribute("next",u.stringify(x[z].next)),x[z].next.action&&b.setAttribute("next",u.stringify(x[z].next))):b.setAttribute("next",'{"noop":""}');Na(g);y=r;janrain.events.onCaptureContentChange.fire()},
attachEventHandlers:Na}}function v(c,f){for(var a=[],b=document.getElementById(c).getElementsByTagName("INPUT"),d=b.length,e=0;e<d;e++){var g={};g.id=b[e].id;g.placeholder=b[e].getAttribute("placeholder");if(N||f)na[b[e].getAttribute("data-capturefield")]=b[e].value;g.value=g.placeholder?g.placeholder===b[e].value?"":b[e].value:b[e].value;"radio"===b[e].type&&(g.type="radio",g.checked=b[e].checked);a.push(g)}return a}function Z(c,f,a){var b=-1<c.indexOf("?")?"&":"?",d=0===c.indexOf("http")?"":janrain.settings.capture.captureServer,
e=[],g;for(g in f)f.hasOwnProperty(g)&&e.push(g+"="+encodeURIComponent(f[g]));$(d+c+b+e.join("&"),a)}function ka(c){function f(c){return'<li><a href="#" class="capture_suggestion">'+c+"</a></li>"}var c=c.result,a=p.fields[c.field],b=document.getElementById("capture_"+(a.elementId||a.elementName)),d=c.alternatives,e=a.validation.messages.unique||"",g=document.getElementById("capture_form_item_"+a.elementName),h=new i.validation;h.setElement(b);h.setParentDiv(g);if(!1===c.unique){var d=d.map(f),j=function(c){var f=
J(c);t(f).has("capture_suggestion")&&(b.value=f.innerHTML,Da(g,"click",j),h.valid(),D(c))};h.notValid(e+'<ul class="capture_suggestions">'+d.join("")+"</ul>",function(){A(g,"click",j)})}else h.valid()}var o=[],B,x=[],O,P=[],y={},ma=[],ea={},N=janrain.settings.capture.mode13||!1,na={},M,G,fa,V=!1,C,K,ga=!1,oa=!1,p,Y,ha={},ia={},ya=[],za=[],Aa=[],ja=[],Ba=!1,va=2,xa="placeholder"in document.createElement("input"),pa=!1,s,sa=!1,ta=!1,ua=!1,wa=[],Ma=0,Ha=[],Ga=[];e.prototype.check=function(c,f,a){f=f||
p.fields[c.name];if(!f.validation)return!0;f.validation.messages||(f.validation.messages={});if(!this.hasValue(c,f))return{valid:!1,reason:f.validation.messages.required||"Field not completed"};if(!this.isValidMinLength(c,f))return{valid:!1,reason:f.validation.messages.minLength||"Invalid length"};if(!this.isValidMaxLength(c,f))return{valid:!1,reason:f.validation.messages.maxLength||"Invalid length"};if(!this.isValidMaxNumericLength(c,f))return{valid:!1,reason:f.validation.messages.maxNumericLength||
"Invalid number of numeric characters"};if(!this.isValidFormat(c,f))return{valid:!1,reason:f.validation.messages.format||"Invalid format"};if(!this.isValidMatch(c,f))return{valid:!1,reason:f.validation.messages.match||"Invalid match"};return f.validation.unique&&!a?(a=document.getElementById("capture_form_item_"+c.getAttribute("name")),this.isUnique(c,a,f,function(){}),{pending:!0}):{valid:!0}};e.prototype.getRating=function(c){var c=c.value,f=[/[a-z]/,/[A-Z]/,/[0-9]/,/[^a-zA-Z0-9]/],a=0,b;b=Math.min(8,
Math.floor(3*Math.log(c.length+1)));for(var d=0;d<f.length;d++)f[d].test(c)&&a++;return b+=Math.floor(Math.pow(2,a)/2)};e.prototype.isValidMaxNumericLength=function(c,f){if(!f)return!0;var a=f.validation.maxNumericLength;if(!a)return!0;var b=c.value.match(/(\d)/g);return g(b)?b.length<=a:!0};e.prototype.isValidMaxLength=function(c,f){var a=c.value;if(!f)return!0;var b=f.validation.maxLength;return!b?!0:a.length<=b};e.prototype.isValidMinLength=function(c,f){var a=c.value;if(!f)return!0;var b=f.validation.minLength;
return!b?!0:a.length>=b};e.prototype.hasValue=function(c,f){var a;if("select"===f.element)a=c.options[c.selectedIndex].value;else if("checkbox"===f.type&&!("multiCheckbox"===f.element||"multiRadio"===f.element))a=c.checked;else if("multiCheckbox"===f.element||"multiRadio"===f.element)if(a=f.elementName){a=document.getElementsByName(a);for(var b=a.length,d=[],e=0;e<b;e++)a[e].checked&&d.push(a[e]);a=d.length}else a=!1;else a=c.value;return!f||!f.validation.required?!0:a};e.prototype.isUnique=function(c,
f,a,b){f=c.form.getAttribute("data-capturefield");a=c.getAttribute("data-capturefield");c={value:c.value,form:f,field:a,flow:p.flow};C&&(c.access_token=C);Z("/widget/unique.jsonp",c,b)};e.prototype.isBlacklisted=function(c,f,a){function b(){var f=c.value,a=response;if(!a||0===a.length)return!0;for(var S,d=0;d<a.length;d++)if(S=RegExp("^"+a[d]+"$","i"),S.test(f))return!0;return!1}captureUIBlacklistCallback=function(c){a(b(c))};g(f)?a(b(f)):"string"===typeof f?captureUIBlacklistCallback(["chad"]):a(!0)};
e.prototype.isValidFormat=function(c,f){var a={alpha:/^[a-z]+$/i,alphaNumeric:/^[a-z0-9]+$/i,alphaNumericExtended:/^[a-z][-a-z0-9\s_.]*[a-z0-9]$/i,email:/^.+@(?:[^.]+\.)+(?:[^.]{2,})$/};if(!f||!f.validation.format)return!0;var b=f.validation.format;if("string"===typeof b&&a[b])b=a[b];else return!1;return b.test(c.value)};e.prototype.isValidMatch=function(c,f){if(!f)return!0;var a=f.validation.match;if(!a)return!0;a=p.fields[a];a=document.getElementById("capture_"+(a.elementId||a.elementName));return c.value===
a.value};var i={attachFieldEventHandlers:function(c){c.type||(c.type="");"password"===c.type&&(o.push({elementName:c.elementName,handler:i.togglePasswordInput,eventType:"click"}),o.push({elementName:c.elementName,handler:i.togglePasswordInput,eventType:"focus"}),c.validation&&("function"===typeof c.validation.rating?o.push({elementName:c.elementName,handler:function(f){var f=U(f),a=B.getRating(f);c.validation.rating(f,a)},eventType:"keyup"}):c.validation.rating&&o.push({elementName:c.elementName,
handler:function(c){c=U(c);c=B.getRating(c);q("Password Strength",c)},eventType:"keyup"})));if("text"===c.type||"password"===c.type||"email"===c.type)o.push({elementName:c.elementName,handler:i.clearPlaceHolder,eventType:"focus"}),o.push({elementName:c.elementName,handler:i.restorePlaceHolder,eventType:"blur"});o.push({elementName:c.elementName,handler:function(){var a=document.getElementById("capture_form_item_"+c.elementName);t(a).append("capture_focused").remove("capture_error");janrain.events.onCaptureContentChange.fire()},
eventType:"focus"});o.push({elementName:c.elementName,handler:function(){var a=document.getElementById("capture_form_item_"+c.elementName);t(a).remove("capture_focused")},eventType:"blur"});c.validation&&o.push({elementName:c.elementName,handler:n,eventType:"blur"});c.validation&&c.validation.custom&&o.push({elementName:c.elementName,handler:function(a){var a=U(a),b=document.getElementById("capture_form_item_"+c.elementName);t(b).append("capture_validating");var d=new i.validation;d.setParentDiv(b);
d.setElement(a);_registeredFunctions[c.validation.custom](a.name,a.value,d);t(b).remove("capture_validating")},eventType:"blur"})},wrapFormItemStart:function(c){var a="",b=[],d=c.classes||[],e="elementCollection"===c.type?"form_collection":"form_item";if(c.justElement||"submit"===c.type||"button"===c.element)return"";-1===d.indexOf("capture_"+e)&&d.push("capture_"+e);c.errors&&-1===d.indexOf("capture_error")&&!c.collection&&d.push("capture_error");!c.collection&&c.type&&-1===d.indexOf("capture_"+
c.type)&&("checkbox"===c.type||"radio"===c.type?b.push("capture_"+c.type):d.push("capture_"+c.type));"elementCollection"===c.type&&c.displayInline&&-1===d.indexOf("capture_form_collection_inline")&&d.push("capture_form_collection_inline");a+=i.createDiv({elementName:e+"_"+c.elementName,hide:c.hide,classes:d});if(("checkbox"===c.type||"radio"===c.type)&&!c.collection)a+=i.createDiv({elementName:e+"_inner_"+c.elementName,classes:b});return a},wrapFormItemEnd:function(c){return c.justElement||"submit"===
c.type||"button"===c.element?"":"</div>"},createPublicPrivateToggle:function(c){function a(c){var c=J(c),f=c.parentNode.parentNode;t(f).append("capture_toggled");c.id==="capture_"+d?t(f.nextSibling).remove("capture_toggled"):t(f.previousSibling).remove("capture_toggled")}var b,d="display_"+c.elementName+"_true",e="display_"+c.elementName+"_false";b='<div class="capture_display_radios capture_public_private_toggle"><div class="capture_radio_box';c.displayPublic&&(b+=" capture_toggled");b=b+'">'+i.createInput({type:"radio",
collection:!0,elementName:"display["+c.elementName+"]",elementId:d,value:"true",label:"public"});b+='</div><div class="capture_radio_box';c.displayPublic||(b+=" capture_toggled");b=b+'">'+i.createInput({type:"radio",collection:!0,elementName:"display["+c.elementName+"]",elementId:e,value:"false",label:"private"});b+="</div></div>";o.push({elementName:d,handler:a,eventType:"click"});o.push({elementName:e,handler:a,eventType:"click"});return b},createTextarea:function(c){var a,b=c.elementId||c.elementName,
d=c.rows||"5";a=""+i.createLabel(c);a=a+"<textarea "+("id='capture_"+b+"' ")+("data-capturefield='"+c.name+"' ");a=a+("rows='"+d+"' ")+("name='"+c.elementName+"' ");c.placeholder&&xa&&(a+="placeholder='"+c.placeholder+"'");a+=">";c.value&&(a+=c.value);a+="</textarea>";c.publicPrivateToggle&&(a+=i.createPublicPrivateToggle(c));return a+=i.createTip(c)},createTip:function(c){var a;a="<div class='capture_tip' ";c.tip||(a+="style='display:none;' ");a+=">"+("undefined"!==typeof c.tip?c.tip:"")+"</div>";
a=a+"<div class='capture_tip_validating'"+(" data-elementName='"+c.elementName+"'>");a=a+"Validating</div><div class='capture_tip_error'"+(" data-elementName='"+c.elementName+"'>");c.errors&&g(c.errors)&&(a+=c.errors.join(" "));return a+"</div>"},createLabel:function(c,a){var b,d=c.elementId||c.elementName;if(!c.label)return"";b="<label ";"elementCollection"!==c.type&&(b+=" for='capture_"+d+"'");b+=">";a&&(b+=a);c.label&&(b+=c.label);return b+"</label>"},createSelect:function(c){var a,b=c.elementId||
c.elementName;a=""+i.createLabel(c);a=a+"<select "+("id='capture_"+b+"' ")+("data-capturefield='"+c.name+"' ");a+="name='"+c.elementName+"' ";a+=">";for(var b=c.options||[],d=b.length,e=0;e<d;e++){var g=b[e];a+='<option value="'+(g.value||""===g.value?g.value:g.text)+'"';g.disabled&&(a+=' disabled="true"');g.value===c.value&&(a+=' selected="selected"');a+=">"+g.text+"</option>"}a+="</select>";c.publicPrivateToggle&&(a+=i.createPublicPrivateToggle(c));return a+=i.createTip(c)},createInput:function(c){var a=
"",b="",d=c.elementId||c.elementName,e=c.justElement||c.collection||"hidden"===c.type||"button"===c.type||"submit"===c.type,g="password"===c.type&&!xa&&c.placeholder?"text":c.type,h=("checkbox"===c.type&&!c.collection||"radio"===c.type&&!c.collection)&&!c.justElement;"button"===c.type||"submit"===c.type||"checkbox"===c.type||"radio"===c.type||"hidden"===c.type||(b+=i.createLabel(c));a=a+"<input "+("id='capture_"+d+"' ")+("data-capturefield='"+c.name+"' ");c.collection&&(a+="data-capturecollection='true' ");
"text"===c.type?a+="class='capture_text' ":"submit"===c.type&&(a+="class='capture_btn capture_primary' ");a+="type='"+g+"' ";c.value?(g=c.value,c.displaySavedValue&&na[c.value]&&(g=na[c.value],Ha.push("capture_"+d)),a+="value='"+g+"' "):a=c.placeholder&&!xa?a+("value='"+c.placeholder+"' "):a+"value='' ";c.placeholder&&(a+="placeholder='"+c.placeholder+"' ");c.checked&&(a+="checked='checked' ");a+="name='"+c.elementName+"' ";a+="/>";b="checkbox"===c.type||"radio"===c.type?b+i.createLabel(c,a):b+a;
c.publicPrivateToggle&&(b+=i.createPublicPrivateToggle(c));h&&(b+="</div>");e||(b+=i.createTip(c));return b},createDiv:function(c){var a,b=c.classes||[];a="<div "+("id='capture_"+c.elementName+"'");if("option"===c.type&&!c["default"]||c.hide)a+=" style='display:none'";"radioCollection"===c.type&&b.push("radio_set");g(b)&&b.length&&(a=a+' class="'+b.join(" "),a+='" ');return a+">"},createImage:function(c){var a,b=c.classes||[];a="<img "+('src="'+c.src+'"');c.hide&&(a+=" style='display:none'");c.imageId&&
(a+=' id="capture_'+c.imageId+'" ');g(b)&&b.length&&(a=a+'class="'+b.join(" "),a+='" ');return a+"/>"},domHelpers:{createIFrame:function(c){var a,b="captureIFrame_"+c;if(document.getElementById(b))return!1;if(H){a="";var d=document.createElement("div");d.innerHTML=a+"<iframe "+('name="'+b+'" ')+('data-transactionId="'+c+'" ')+('id="'+b+'" ')+'src="about:blank" style="display: none;"></iframe>';document.body.appendChild(d)}else a=document.createElement("iframe"),a.setAttribute("name",b),a.setAttribute("data-transactionId",
c),a.id=b,a.setAttribute("src","about:blank"),a.style.display="none",a.className="",document.body.appendChild(a)},createAnchor:function(c){var a=document.createElement("a");a.setAttribute("href",c.elementHref);a.innerHTML=c.elementText;c.elementId&&(a.id="capture_"+c.elementId);c.classes&&g(c.classes)&&(a.className=c.classes.join(" "));c.hideElement&&(a.style.display="none");return a},createDiv:function(c){var a=document.createElement("div");c.elementId&&(a.id="capture_"+c.elementId);c.classes&&g(c.classes)&&
(a.className=c.classes.join(" "));c.hideElement&&(a.style.display="none");return a},createImage:function(c){var a=document.createElement("img");a.src=c.elementSrc;c.elementId&&(a.id="capture_"+c.elementId);c.classes&&g(c.classes)&&(a.className=c.classes.join(" "));c.hideElement&&(a.style.display="none");return a},createInput:function(c){var a=document.createElement("input");c.elementType&&a.setAttribute("type",c.elementType);c.name&&a.setAttribute("data-capturefield",c.name);c.elementValue&&(a.value=
c.elementValue);c.elementName&&(a.name=c.elementName);c.elementId&&(a.id="capture_"+c.elementId);c.hideElement&&(a.style.display="none");c.classes&&g(c.classes)&&(a.className=c.classes.join(" "));return a},createForm:function(c){c.transactionId||(c.transactionId=ba());var a=c.transactionId,b=document.createElement("form"),d=g(c.fields)?c.fields:[],e=d.length;i.domHelpers.createIFrame(a);b.id="capture_"+c.elementId;c.classes&&g(c.classes)&&(b.className=c.classes.join(" "));b.setAttribute("target",
"captureIFrame_"+a);b.setAttribute("data-transactionId",a);c.name&&b.setAttribute("data-capturefield",c.name);b.setAttribute("action",c.elementAction);b.setAttribute("method","POST");b.appendChild(i.domHelpers.createInput({elementType:"hidden",elementValue:a,elementName:"capture_transactionId",elementId:"transactionId_"+a}));for(var h=0;h<e;h++)switch(a=d[h],a.elementType){case "div":b.appendChild(i.domHelpers.createDiv(a));break;case "hidden":b.appendChild(i.domHelpers.createInput(a));break;case "file":b.setAttribute("enctype",
"multipart/form-data");b.appendChild(i.domHelpers.createInput(a));break;case "submit":b.appendChild(i.domHelpers.createInput(a))}i.domHelpers.createFormHandler(b,c);return b},createFormHandler:function(c,a){"function"===typeof a.callback&&(c.setAttribute("next",'{"function":"'+a.elementId+'"}'),ea[a.elementId]=a.callback);A(c,"submit",k)},createFormAndPost:function(c){var a=ba();c.transactionId=a;var a=i.domHelpers.createForm(c),b=i.domHelpers.createInput({elementType:"submit",elementName:"delete",
elementId:"createFormAndPostSubmit",elementValue:"submit",hideElement:!0});a.appendChild(b);document.body.appendChild(a);i.domHelpers.createFormHandler(a,c);b.click()}},createListOfLinks:function(c,a){var b;optionsLength=c.length;b="<ul";g(a)&&a.length&&(b=b+' class="'+a.join(" "),b+='"');b+=">";for(var d=0;d<optionsLength;d++)b+="<li","string"===typeof c[d].listItemId&&(b+=' id="capture_'+c[d].listItemId+'" '),c[d].hide&&(b+=' style="display: none;" '),g(c[d].listItemClasses)&&c[d].listItemClasses.length&&
(b+=' class="',b+=c[d].listItemClasses.join(" "),b+='"'),b+=">",b+='<a href="'+c[d].anchorHref+'"',"string"===typeof c[d].anchorId&&(b+=' id="capture_'+c[d].anchorId+'" '),g(c[d].anchorClasses)&&c[d].anchorClasses.length&&(b+=' class="',b+=c[d].anchorClasses.join(" "),b+='"'),b+=">",b+=c[d].anchorText,b+="</a>",b+="</li>";return b+"</ul>"},togglePasswordInput:function(c){c=U(c);c.getAttribute("value")===c.getAttribute("placeholder")&&c.setAttribute("value","");if(H&&"text"===c.type){var a=[],b;for(b in o)o.hasOwnProperty(b)&&
"capture_"+o[b].elementName==c.id&&(o[b].elementName=o[b].elementName,a.push(o[b]));b=c.parentElement;b.removeChild(c);var d=document.createElement("input");d.id=c.id;d.setAttribute("data-capturefield",c.name);d.className="capture_password";d.name=c.name;d.setAttribute("type","password");b.insertBefore(d,b.firstChild.nextSibling);X().attachEventHandlers(null,a);d.focus()}else c.setAttribute("type","password")},clearPlaceHolder:function(c){if(xa)return!0;c=U(c);c.getAttribute("value")===c.getAttribute("placeholder")&&
c.setAttribute("value","")},restorePlaceHolder:function(c){if(xa)return!0;var c=U(c),a=c.getAttribute("placeholder");"password"===c.getAttribute("type")&&(c.value||c.setAttribute("type","text"));a&&!c.value&&c.setAttribute("value",a)},validation:function(){var c,a;return{setParentDiv:function(c){(a=c)&&a.className.split(" ")},setElement:function(b){c=b;a&&a.className.split(" ")},valid:function(){t(a).append("capture_validated").remove("capture_error");var b={};c&&(b.field=c);janrain.events.onCaptureValidationSuccess.fire(b);
janrain.events.onCaptureContentChange.fire()},pending:function(){janrain.events.onCaptureContentChange.fire()},notValid:function(b,d){t(a).append("capture_error").remove("capture_validated");if(b){for(var e,g=a.getElementsByTagName("div"),h=g.length,i=0;i<h;i++)if("capture_tip_error"===g[i].className){var j=0===a.id.indexOf("capture_form_collection_")?"capture_form_collection_":"capture_form_item_";if(a.id.split(j)[1]===g[i].getAttribute("data-elementName")){e=g[i];break}}e&&(e.innerHTML=b);"function"===
typeof d&&d();janrain.events.onCaptureContentChange.fire()}e={};c&&(e.field=c);janrain.events.onCaptureValidationFailed.fire(e)}}}},Ja={createSelect:i.createSelect,createTextarea:i.createTextarea,createInput:i.createInput,createLabel:i.createLabel,createDiv:i.createDiv,createImage:i.createImage,createListOfLinks:i.createListOfLinks,toggelPassword:i.togglePasswordInput,clearPlaceHolder:i.clearPlaceHolder,restorePlaceHolder:i.restorePlaceHolder,getElementByEventAttribute:U};l.prototype.render={data:function(c){var a;
"string"===c.type&&(a=c.displaySavedValue&&N&&na[c.value]?na[c.value]:c.value);return a},htmlElement:{parent:l.prototype.render,textarea:function(c){var a;a=""+i.wrapFormItemStart(c);a+=i.createTextarea(c);return a+=i.wrapFormItemEnd(c)},select:function(c){var a;a=""+i.wrapFormItemStart(c);a+=i.createSelect(c);a+=i.wrapFormItemEnd(c);i.attachFieldEventHandlers(c);return a},multi:function(a,b){var d,e,h=a.options.length;a.type="elementCollection";d=""+i.wrapFormItemStart(a);d+=i.createLabel(a);for(var j=
0;j<h;j++)e=a.options[j],e.value=e.value||e.label,e.lable=e.lable||e.value,d+=this.input({elementName:a.elementName,type:b,elementId:a.elementName+"_"+e.label,name:a.name,value:e.value,collection:!0,label:e.label,checked:!g(a.value)?!1:-1<a.value.indexOf(e.value)});d+=i.createTip(a);return d+=i.wrapFormItemEnd(a)},multiCheckbox:function(a){return this.multi(a,a.element.split("multi")[1].toLowerCase())},multiRadio:function(a){return this.multi(a,a.element.split("multi")[1].toLowerCase())},input:function(a){var b;
b=""+i.wrapFormItemStart(a);b+=i.createInput(a);b+=i.wrapFormItemEnd(a);i.attachFieldEventHandlers(a);return b},form:function(a){var b="<form ",d=a.classes||[];d.indexOf("capture_form"===-1)&&d.push("capture_form");b+="id='capture_"+a.elementName+"' ";b+="name='"+a.elementName+"' ";b+="data-capturefield='"+a.name+"' ";b+="action='"+janrain.settings.capture.captureServer+"/"+a.action+"' ";g(d)&&(b+="class='"+d.join("")+"' ");b=b+"method='POST' novalidate='novalidate'"+("data-transactionId='"+a.transactionId+
"'");b+="target='captureIFrame_"+a.transactionId+"'";b+=">";if(a.errors)for(error in a.errors)a.errors.hasOwnProperty(error)&&(b+=i.createDiv({elementId:"formerror_"+(new Date).getTime(),classes:["capture_form_error"]}),b+=a.errors[error]+"</div>");b+=i.createInput({elementName:"utf8",type:"hidden",value:"\u2713"});K?b+=i.createInput({elementName:"access_token",elementId:"accessToken_"+a.transactionId,type:"hidden",value:K}):C&&(b+=i.createInput({elementName:"access_token",elementId:"accessToken_"+
a.transactionId,type:"hidden",value:C}));O&&(b+=i.createInput({elementName:"capture_screen",elementId:"screen_"+a.transactionId,type:"hidden",value:O}));a.serverNextScreen&&(b+=i.createInput({elementName:"serverNextScreen",elementId:"serverNextScreen_"+a.transactionId,type:"hidden",value:a.serverNextScreen}));a.engageTokenRequired&&(b+=i.createInput({elementName:"token",elementId:"token_"+a.transactionId,type:"hidden",value:fa}));b+=i.createInput({elementName:"capture_transactionId",elementId:"transactionId_"+
a.transactionId,type:"hidden",value:a.transactionId});b+=i.createInput({elementName:"form",elementId:"form_"+a.transactionId,type:"hidden",value:a.name});b+=i.createInput({elementName:"flow",elementId:"flow_"+a.transactionId,type:"hidden",value:p.flow});b+=i.createInput({elementName:"client_id",elementId:"client_id_"+a.transactionId,type:"hidden",value:janrain.settings.capture.clientId});b+=i.createInput({elementName:"redirect_uri",elementId:"redirect_uri_"+a.transactionId,type:"hidden",value:janrain.settings.capture.redirectUri});
return b+=i.createInput({elementName:"response_type",elementId:"response_type_"+a.transactionId,type:"hidden",value:janrain.settings.capture.responseType})},div:function(a){return i.createDiv(a)},close:function(a){return"</"+a.element+">"}},captureElement:{addressFull:function(a){var b,d=l.prototype.render.htmlElement;b=""+d.input({elementName:"street_address",elementId:a.name+"_streetaddress",label:"Address",type:"text",publicPrivateToggle:a.publicPrivateToggle,value:a.value&&a.value.streetaddress?
a.value.streetaddress:"",placeholder:a.placeholder&&a.placeholder.streetaddress?a.placeholder.streetaddress:""});b+=d.input({elementName:"street_address2",elementId:a.name+"_streetaddress2",type:"text",value:a.value&&a.value.streetaddress2?a.value.streetaddress2:"",placeholder:a.placeholder&&a.placeholder.streetaddress2?a.placeholder.streetaddress2:""});b+=d.input({elementName:"city",elementId:a.name+"city",classes:["form_item_city"],value:a.value&&a.value.city?a.value.city:"",placeholder:a.placeholder&&
a.placeholder.city?a.placeholder.city:""});b+=d.select({elementName:"stateprovince",elementId:a.name+"_stateprovince",label:"",placeholder:"State/Province",hide:!(a.value&&"United States"===a.value.country||a.value&&"Canada"===a.value.country),value:a.value&&a.value.stateprovince?a.value.stateprovince:"",options:[{text:"AL",value:"AL"},{text:"AK",value:"AK"},{text:"AZ",value:"AZ"},{text:"AR",value:"AR"},{text:"CA",value:"CA"},{text:"CO",value:"CO"},{text:"CT",value:"CT"},{text:"DE",value:"DE"},{text:"DC",
value:"DC"},{text:"FL",value:"FL"},{text:"GA",value:"GA"},{text:"HI",value:"HI"},{text:"ID",value:"ID"},{text:"IL",value:"IL"},{text:"IN",value:"IN"},{text:"IA",value:"IA"},{text:"KS",value:"KS"},{text:"KY",value:"KY"},{text:"LA",value:"LA"},{text:"ME",value:"ME"},{text:"MD",value:"MD"},{text:"MA",value:"MA"},{text:"MI",value:"MI"},{text:"MN",value:"MN"},{text:"MS",value:"MS"},{text:"MO",value:"MO"},{text:"MT",value:"MT"},{text:"NE",value:"NE"},{text:"NV",value:"NV"},{text:"NH",value:"NH"},{text:"NJ",
value:"NJ"},{text:"NM",value:"NM"},{text:"NY",value:"NY"},{text:"NC",value:"NC"},{text:"ND",value:"ND"},{text:"OH",value:"OH"},{text:"OK",value:"OK"},{text:"OR",value:"OR"},{text:"PA",value:"PA"},{text:"PR",value:"PR"},{text:"RI",value:"RI"},{text:"SC",value:"SC"},{text:"SD",value:"SD"},{text:"TN",value:"TN"},{text:"TX",value:"TX"},{text:"UT",value:"UT"},{text:"VT",value:"VT"},{text:"VA",value:"VA"},{text:"WA",value:"WA"},{text:"WV",value:"WV"},{text:"WI",value:"WI"},{text:"WY",value:"WY"},{text:"AB",
value:"AB"},{text:"BC",value:"BC"},{text:"MB",value:"MB"},{text:"NB",value:"NB"},{text:"NL",value:"NL"},{text:"NS",value:"NS"},{text:"NT",value:"NT"},{text:"NU",value:"NU"},{text:"ON",value:"ON"},{text:"PE",value:"PE"},{text:"QC",value:"QC"},{text:"SK",value:"SK"},{text:"YT",value:"YT"}]});o.push({elementName:a.name+"_stateprovince",handler:function(){},eventType:"change"});b+=d.input({elementName:"zippostalcode",elementId:a.name+"zippostalcode",type:"text",classes:["form_item_zip"],value:a.value&&
a.value.zippostalcode?a.value.zippostalcode:"",placeholder:a.placeholder&&a.placeholder.zippostalcode?a.placeholder.zippostalcode:""});b+=d.select({elementName:"country",elementId:a.name+"_country",value:a.value&&a.value.country?a.value.country:"",placeholder:a.placeholder&&a.placeholder.country?a.placeholder.country:"",options:[{text:"country",value:"0",disabled:"true"},{text:"United States",value:"United States"},{text:"APO/FPO/DPO",value:"APO/FPO/DPO"},{text:"Canada",value:"Canada"},{text:"United Kingdom",
value:"United Kingdom"},{text:"Afghanistan",value:"Afghanistan"},{text:"Albania",value:"Albania"},{text:"Algeria",value:"Algeria"},{text:"American Samoa",value:"American Samoa"},{text:"Andorra",value:"Andorra"},{text:"Angola",value:"Angola"},{text:"Anguilla",value:"Anguilla"},{text:"Antigua and Barbuda",value:"Antigua and Barbuda"},{text:"Argentina",value:"Argentina"},{text:"Armenia",value:"Armenia"},{text:"Aruba",value:"Aruba"},{text:"Australia",value:"Australia"},{text:"Austria",value:"Austria"},
{text:"Azerbaijan Republic",value:"Azerbaijan Republic"},{text:"Bahamas",value:"Bahamas"},{text:"Bahrain",value:"Bahrain"},{text:"Bangladesh",value:"Bangladesh"},{text:"Barbados",value:"Barbados"},{text:"Belarus",value:"Belarus"},{text:"Belgium",value:"Belgium"},{text:"Belize",value:"Belize"},{text:"Benin",value:"Benin"},{text:"Bermuda",value:"Bermuda"},{text:"Bhutan",value:"Bhutan"},{text:"Bolivia",value:"Bolivia"},{text:"Bosnia and Herzegovina",value:"Bosnia and Herzegovina"},{text:"Botswana",value:"Botswana"},
{text:"Brazil",value:"Brazil"},{text:"British Virgin Islands",value:"British Virgin Islands"},{text:"Brunei Darussalam",value:"Brunei Darussalam"},{text:"Bulgaria",value:"Bulgaria"},{text:"Burkina Faso",value:"Burkina Faso"},{text:"Burundi",value:"Burundi"},{text:"Cambodia",value:"Cambodia"},{text:"Cameroon",value:"Cameroon"},{text:"Cape Verde Islands",value:"Cape Verde Islands"},{text:"Cayman Islands",value:"Cayman Islands"},{text:"Central African Republic",value:"Central African Republic"},{text:"Chad",
value:"Chad"},{text:"Chile",value:"Chile"},{text:"China",value:"China"},{text:"Colombia",value:"Colombia"},{text:"Comoros",value:"Comoros"},{text:"Congo, Democratic Republic of the",value:"Congo, Democratic Republic of the"},{text:"Congo, Republic of the",value:"Congo, Republic of the"},{text:"Cook Islands",value:"Cook Islands"},{text:"Costa Rica",value:"Costa Rica"},{text:"Cote d Ivoire (Ivory Coast)",value:"Cote d Ivoire (Ivory Coast)"},{text:"Croatia, Republic of",value:"Croatia, Republic of"},
{text:"Cyprus",value:"Cyprus"},{text:"Czech Republic",value:"Czech Republic"},{text:"Denmark",value:"Denmark"},{text:"Djibouti",value:"Djibouti"},{text:"Dominica",value:"Dominica"},{text:"Dominican Republic",value:"Dominican Republic"},{text:"Ecuador",value:"Ecuador"},{text:"Egypt",value:"Egypt"},{text:"El Salvador",value:"El Salvador"},{text:"Equatorial Guinea",value:"Equatorial Guinea"},{text:"Eritrea",value:"Eritrea"},{text:"Estonia",value:"Estonia"},{text:"Ethiopia",value:"Ethiopia"},{text:"Falkland Islands (Islas Malvinas)",
value:"Falkland Islands (Islas Malvinas)"},{text:"Fiji",value:"Fiji"},{text:"Finland",value:"Finland"},{text:"France",value:"France"},{text:"French Guiana",value:"French Guiana"},{text:"French Polynesia",value:"French Polynesia"},{text:"Gabon Republic",value:"Gabon Republic"},{text:"Gambia",value:"Gambia"},{text:"Georgia",value:"Georgia"},{text:"Germany",value:"Germany"},{text:"Ghana",value:"Ghana"},{text:"Gibraltar",value:"Gibraltar"},{text:"Greece",value:"Greece"},{text:"Greenland",value:"Greenland"},
{text:"Grenada",value:"Grenada"},{text:"Guadeloupe",value:"Guadeloupe"},{text:"Guam",value:"Guam"},{text:"Guatemala",value:"Guatemala"},{text:"Guernsey",value:"Guernsey"},{text:"Guinea",value:"Guinea"},{text:"Guinea-Bissau",value:"Guinea-Bissau"},{text:"Guyana",value:"Guyana"},{text:"Haiti",value:"Haiti"},{text:"Honduras",value:"Honduras"},{text:"Hong Kong",value:"Hong Kong"},{text:"Hungary",value:"Hungary"},{text:"Iceland",value:"Iceland"},{text:"India",value:"India"},{text:"Indonesia",value:"Indonesia"},
{text:"Ireland",value:"Ireland"},{text:"Israel",value:"Israel"},{text:"Italy",value:"Italy"},{text:"Jamaica",value:"Jamaica"},{text:"Jan Mayen",value:"Jan Mayen"},{text:"Japan",value:"Japan"},{text:"Jersey",value:"Jersey"},{text:"Jordan",value:"Jordan"},{text:"Kazakhstan",value:"Kazakhstan"},{text:"Kenya",value:"Kenya"},{text:"Kiribati",value:"Kiribati"},{text:"Korea, South",value:"Korea, South"},{text:"Kuwait",value:"Kuwait"},{text:"Kyrgyzstan",value:"Kyrgyzstan"},{text:"Laos",value:"Laos"},{text:"Latvia",
value:"Latvia"},{text:"Lebanon",value:"Lebanon"},{text:"Liechtenstein",value:"Liechtenstein"},{text:"Lithuania",value:"Lithuania"},{text:"Luxembourg",value:"Luxembourg"},{text:"Macau",value:"Macau"},{text:"Macedonia",value:"Macedonia"},{text:"Madagascar",value:"Madagascar"},{text:"Malawi",value:"Malawi"},{text:"Malaysia",value:"Malaysia"},{text:"Maldives",value:"Maldives"},{text:"Mali",value:"Mali"},{text:"Malta",value:"Malta"},{text:"Marshall Islands",value:"Marshall Islands"},{text:"Martinique",
value:"Martinique"},{text:"Mauritania",value:"Mauritania"},{text:"Mauritius",value:"Mauritius"},{text:"Mayotte",value:"Mayotte"},{text:"Mexico",value:"Mexico"},{text:"Micronesia",value:"Micronesia"},{text:"Moldova",value:"Moldova"},{text:"Monaco",value:"Monaco"},{text:"Mongolia",value:"Mongolia"},{text:"Montenegro",value:"Montenegro"},{text:"Montserrat",value:"Montserrat"},{text:"Morocco",value:"Morocco"},{text:"Mozambique",value:"Mozambique"},{text:"Namibia",value:"Namibia"},{text:"Nauru",value:"Nauru"},
{text:"Nepal",value:"Nepal"},{text:"Netherlands",value:"Netherlands"},{text:"Netherlands Antilles",value:"Netherlands Antilles"},{text:"New Caledonia",value:"New Caledonia"},{text:"New Zealand",value:"New Zealand"},{text:"Nicaragua",value:"Nicaragua"},{text:"Niger",value:"Niger"},{text:"Nigeria",value:"Nigeria"},{text:"Niue",value:"Niue"},{text:"Norway",value:"Norway"},{text:"Oman",value:"Oman"},{text:"Pakistan",value:"Pakistan"},{text:"Palau",value:"Palau"},{text:"Panama",value:"Panama"},{text:"Papua New Guinea",
value:"Papua New Guinea"},{text:"Paraguay",value:"Paraguay"},{text:"Peru",value:"Peru"},{text:"Philippines",value:"Philippines"},{text:"Poland",value:"Poland"},{text:"Portugal",value:"Portugal"},{text:"Puerto Rico",value:"Puerto Rico"},{text:"Qatar",value:"Qatar"},{text:"Romania",value:"Romania"},{text:"Russian Federation",value:"Russian Federation"},{text:"Rwanda",value:"Rwanda"},{text:"Saint Helena",value:"Saint Helena"},{text:"Saint Kitts-Nevis",value:"Saint Kitts-Nevis"},{text:"Saint Lucia",value:"Saint Lucia"},
{text:"Saint Pierre and Miquelon",value:"Saint Pierre and Miquelon"},{text:"Saint Vincent and the Grenadines",value:"Saint Vincent and the Grenadines"},{text:"San Marino",value:"San Marino"},{text:"Saudi Arabia",value:"Saudi Arabia"},{text:"Senegal",value:"Senegal"},{text:"Serbia",value:"Serbia"},{text:"Seychelles",value:"Seychelles"},{text:"Sierra Leone",value:"Sierra Leone"},{text:"Singapore",value:"Singapore"},{text:"Slovakia",value:"Slovakia"},{text:"Slovenia",value:"Slovenia"},{text:"Solomon Islands",
value:"Solomon Islands"},{text:"Somalia",value:"Somalia"},{text:"South Africa",value:"South Africa"},{text:"Spain",value:"Spain"},{text:"Sri Lanka",value:"Sri Lanka"},{text:"Suriname",value:"Suriname"},{text:"Svalbard",value:"Svalbard"},{text:"Swaziland",value:"Swaziland"},{text:"Sweden",value:"Sweden"},{text:"Switzerland",value:"Switzerland"},{text:"Tahiti",value:"Tahiti"},{text:"Taiwan",value:"Taiwan"},{text:"Tajikistan",value:"Tajikistan"},{text:"Tanzania",value:"Tanzania"},{text:"Thailand",value:"Thailand"},
{text:"Togo",value:"Togo"},{text:"Tonga",value:"Tonga"},{text:"Trinidad and Tobago",value:"Trinidad and Tobago"},{text:"Tunisia",value:"Tunisia"},{text:"Turkey",value:"Turkey"},{text:"Turkmenistan",value:"Turkmenistan"},{text:"Turks and Caicos Islands",value:"Turks and Caicos Islands"},{text:"Tuvalu",value:"Tuvalu"},{text:"Uganda",value:"Uganda"},{text:"Ukraine",value:"Ukraine"},{text:"United Arab Emirates",value:"United Arab Emirates"},{text:"Uruguay",value:"Uruguay"},{text:"Uzbekistan",value:"Uzbekistan"},
{text:"Vanuatu",value:"Vanuatu"},{text:"Vatican City State",value:"Vatican City State"},{text:"Venezuela",value:"Venezuela"},{text:"Vietnam",value:"Vietnam"},{text:"Virgin Islands (U.S.)",value:"Virgin Islands (U.S.)"},{text:"Wallis and Futuna",value:"Wallis and Futuna"},{text:"Western Sahara",value:"Western Sahara"},{text:"Western Samoa",value:"Western Samoa"},{text:"Yemen",value:"Yemen"},{text:"Zambia",value:"Zambia"},{text:"Zimbabwe",value:"Zimbabwe"}]});o.push({elementName:a.name+"_country",handler:function(){var a=
this.options[this.selectedIndex].value||"";"United States"===a||"Canada"===a?document.getElementById("capture_form_item_stateprovince").style.display="inline-block":document.getElementById("capture_form_item_stateprovince").style.display="none"},eventType:"change"});return b},backButton:function(a){var b;b=""+i.wrapFormItemStart(a);a.type="button";b+=i.createInput(a);b+=i.wrapFormItemEnd(a);o.push({elementName:a.elementName,handler:function(){Ba=!1;var a=P.pop();a&&janrain.capture.ui.render(a.flow,
a.values)},eventType:"click"});return b},photoManager:function(a){G=a.value;var a=i.createDiv({elementName:a.elementName}),b=g(G)&&G.length,a=a+'<div id="profile_pic" class="normal image default">';b&&(a+=i.createImage({src:G[1].value,imageId:"profile_pic_image"}));a=a+"&nbsp;</div>"+i.createListOfLinks([{listItemId:"upload_photo",listItemClasses:[],anchorText:"Choose new photo",anchorHref:"#",anchorClasses:[],anchorId:"upload_photo_link"},{listItemId:"edit_photo",listItemClasses:[],anchorText:"Edit photo",
anchorHref:"#",anchorClasses:["three","four"],anchorId:"edit_photo_link",hide:!b},{listItemId:"remove_photo",listItemClasses:[],anchorText:"Remove photo",anchorHref:"#",anchorClasses:["three","four"],anchorId:"remove_photo_link",hide:!b}],["options"]);a+="</div>";o.push({elementName:"upload_photo_link",handler:function(a){if(!document.getElementById("capture_upload_photo_form")){var c=i.domHelpers.createForm({elementAction:janrain.settings.capture.captureServer+"/photo/upload_photo?access_token="+
C,classes:["capture_popup_container"],elementId:"upload_photo_form",fields:[{elementName:"",classes:["capture_popup-arrow"],elementType:"div"},{elementName:"photo",elementId:"photo_chooser",elementType:"file"},{elementName:"photo_submit",elementId:"photo_submit",elementValue:"Submit",classes:["capture_btn","capture_primary"],hideElement:!1,elementType:"submit"}],callback:function(){janrain.capture.ui.getUserPhotos(function(){var a=document.getElementById("capture_profile_pic_image");a&&R(a);document.getElementById("profile_pic").appendChild(i.domHelpers.createImage({elementSrc:G[1].value,
elementId:"profile_pic_image"}));document.getElementById("capture_edit_photo").style.display="block";document.getElementById("capture_remove_photo").style.display="block";R(document.getElementById("capture_upload_photo_form"))})}});document.getElementById("capture_upload_photo").appendChild(c);var b=function(a){"capture_upload_photo_link"!==Q(a)&&"capture_photo_chooser"!==Q(a)&&"capture_photo_submit"!==Q(a)&&(c.innerHTML="",R(c),Da(document,"click",b),D(a))};A(document,"click",b)}D(a)},eventType:"click"});
o.push({elementName:"edit_photo_link",handler:function(a){if(!document.getElementById("capture_crop_photo_form")){var c,b=i.domHelpers.createDiv({classes:["capture_popup_container"],elementId:"containEditDiv"}),d=document.createElement("div"),e=document.createElement("div"),f=i.domHelpers.createImage({elementSrc:G[4].value,elementId:"CropPhotoPreview"}),g=i.domHelpers.createImage({elementSrc:G[4].value+"?"+(new Date).getTime(),elementId:"cropbox"}),h=function(){crop(document.getElementById("capture_cropbox"),
l,375,375)};A(g,"load",function(){"function"!==typeof crop?$("http://engage-dev.janrain.com/renderers/crop/crop.js",h):h()});var j=i.domHelpers.createForm({elementAction:janrain.settings.capture.captureServer+"/photo/crop_photo?access_token="+C,elementId:"crop_photo_form",fields:[{elementName:"",classes:["capture_popup-arrow"],elementType:"div"},{elementId:"width",elementName:"width",elementType:"hidden"},{elementId:"height",elementName:"height",elementType:"hidden"},{elementId:"x",elementName:"x",
elementType:"hidden"},{elementId:"y",elementName:"y",elementType:"hidden"},{elementValue:"Submit",elementName:"edit_photo_submit",hideElement:!1,classes:["capture_btn","capture_primary"],elementType:"submit"}],callback:function(){janrain.capture.ui.getUserPhotos(function(){R(document.getElementById("capture_profile_pic_image"));document.getElementById("profile_pic").appendChild(i.domHelpers.createImage({elementSrc:G[1].value,elementId:"profile_pic_image"}));R(document.getElementById("capture_containEditDiv"))})}});
d.id="captureCropPhotoPreviewContainer";e.id="captureCropPhotoPreviewInnerContainer";d.appendChild(e);f.style.display="none";f.style.cssFloat="left";f.id="capture_CropPhotoPreview";e.appendChild(f);b.appendChild(d);b.appendChild(g);b.appendChild(j);document.getElementById("capture_edit_photo").appendChild(b);var k=function(a){var c;if(c="capture_edit_photo_link"!==Q(a)){a:{for(c=J(a).parentNode;null!=c;){if(c==b){c=!0;break a}c=c.parentNode}c=!1}c=!c}c&&(b.innerHTML="",R(b),Da(document,"click",k),
D(a))};A(document,"click",k);var l=function(a){if(0<parseInt(a.unscaled.width)){c=a;var b=a.unscaled.height/a.sizedHeight,d=Math.round(100/(a.unscaled.width/a.sizedWidth)),b=Math.round(100/b);"none"===f.style.display&&(f.style.display="block");f.style.width=d+"px";f.style.height=b+"px";f.style.marginLeft="-"+Math.round(a.unscaled.left/a.sizedWidth*d)+"px";f.style.marginTop="-"+Math.round(a.unscaled.top/a.sizedHeight*b)+"px"}};A(j,"submit",function(){var a=c.sizedWidth/c.originalWidth,b=c.sizedHeight/
c.originalHeight;document.getElementById("capture_width").value=Math.round(c.unscaled.width/a);document.getElementById("capture_height").value=Math.round(c.unscaled.height/b);document.getElementById("capture_x").value=Math.round(c.unscaled.left/a);document.getElementById("capture_y").value=Math.round(c.unscaled.top/b)})}D(a)},eventType:"click"});o.push({elementName:"remove_photo_link",handler:function(a){if(!document.getElementById("capture_remove_photo_contain")){var c=i.domHelpers.createDiv({elementId:"remove_photo_contain",
classes:["capture_popup_container pad"]}),b=i.domHelpers.createAnchor({elementHref:"#",elementText:"Remove",elementId:"confirm_remove_photo_link"}),d=i.domHelpers.createAnchor({elementHref:"#",elementText:"Cancel"});c.innerHTML='<div class="capture_popup-arrow"></div><p>Cant Be Undone</p>';c.appendChild(b);c.appendChild(d);document.getElementById("capture_remove_photo").appendChild(c);var e=function(a){"capture_createFormAndPostSubmit"!==Q(a)&&"capture_confirm_remove_photo_link"!==Q(a)&&"capture_remove_photo_link"!==
Q(a)&&(c.innerHTML="",R(c),Da(document,"click",e),D(a))};A(d,"click",e);A(document,"click",e);A(b,"click",function(a){i.domHelpers.createFormAndPost({elementAction:janrain.settings.capture.captureServer+"/photo/delete_photo?reset_photo=true&access_token="+C,elementId:"delete_photo_form",callback:function(){janrain.capture.ui.getUserPhotos(function(){0===G.length?(R(document.getElementById("capture_profile_pic_image")),document.getElementById("capture_edit_photo").style.display="none",document.getElementById("capture_remove_photo").style.display=
"none"):q("maybe there was a problem deleting your image");R(document.getElementById("capture_remove_photo_contain"))})}});D(a)});D(a)}},eventType:"click"});return a},collection:{radio:function(a){for(var b=i.createDiv({elementName:a.elementName,classes:a.classes||""}),d=function(b){for(var b=Q(b).split("_")[2],d=0;d<a.collection.length;d++)a.collection[d].elementName!==b&&(document.getElementById("capture_"+a.collection[d].elementName).style.display="none");document.getElementById("capture_"+b).style.display=
"block";janrain.events.onCaptureContentChange.fire()},e=0;e<a.collection.length;e++)b+="<input type='radio' id='capture_radio_"+a.collection[e].elementName+"' name='capture_collection_"+a.elementName+"' class='radio-input'"+(0===e?"checked='true' ":"")+"/>",b+="<label ",b+="class='radio-label' ",b+="for='capture_radio_"+a.collection[e].elementName+"'>"+a.collection[e].label+" ",b+="</label>",o.push({elementName:"radio_"+a.collection[e].elementName,handler:d,eventType:"click"});return b},accordion:function(){return"<div>"},
tab:function(){return"<div>"}},partial:function(){return"<div>"}},widget:{login:function(){o.push({handler:function(){function a(){janrain.events.onProviderLoginToken.addHandler(function(a){fa=a.token;document.body.appendChild(document.getElementById("janrainEngageEmbed"));y.values=v(y.div.id);P.push(y);var a=a.token,b=ba();Z("/widget/token_url.jsonp",{token:a,redirect_uri:janrain.settings.capture.redirectUri,client_id:janrain.settings.capture.clientId,response_type:janrain.settings.capture.responseType,
capture_transactionId:b,flow:janrain.settings.capture.registerFlow||"socialRegister"});h(b);document.getElementById("janrainEngageEmbed").style.display="none"});pa=!0}var b=document.getElementById("janrainEngageEmbed"),c=document.getElementById("capture_login_widget");if(!janrain.settings.tokenAction||"event"===janrain.settings.tokenAction){var d=ba();janrain.engage.signin.appendTokenParams({capture_transactionId:d});M=d}b?(c.appendChild(b),b.style.display="block"):(b=document.createElement("div"),
b.id="janrainEngageEmbed",document.body.appendChild(b),c.appendChild(b),b.style.display="block",janrain.engage.signin.widget.init());pa||a()},eventType:"render"});var a=i.createDiv({elementName:"login_widget",classes:["login_widget"]});return a+"</div>"},share:function(){}}};var Ka=[];_registeredFunctions={};return{modal:{close:function(){"object"==typeof s&&s.close()},open:function(a){a=a||y.flow.defaultScreen;"object"==typeof s&&(janrain.capture.ui.renderScreen(a),s.setShowContentOnLoad(!0).addContent(y.div).show(),
janrain.events.onCaptureContentChange.fire())},setBorder:function(a){"object"===typeof s&&(s.setBorder(a),s.refresh());return!0},setBorderColor:function(a){"object"===typeof s&&(s.setBorderColor(a),s.refresh());return!0},setBorderOpacity:function(a){"object"===typeof s&&(s.setBorderOpacity(a),s.refresh());return!0},setBorderRadius:function(a){"object"==typeof s&&(s.setBorderRadius(a),s.refresh());return!0}},start:function(b,d){a(b,d)},hasActiveSession:function(){return!!C},render:function(a,b){a.transactionIds&&
ra(a.transactionIds);p=a;for(var d=0;d<ma.length;d++)p.fields[ma[d].field][ma[d].attribute]=ma[d].value;(new X).setScreenData(p.defaultScreen,p.screens[p.defaultScreen]).render();if(b)for(var e in b)b[e].id&&b[e].value&&(d=document.getElementById(b[e].id),d.value=b[e].value,"radio"===b[e].type&&(d.checked=b[e].checked))},renderScreen:function(a,b){Ba=!1;b||P.push(y);(new X).setScreenData(a,p.screens[a]).render()},setHandler:function(a,b,d){this.setFieldAttribute(a,b+"Handler",d)},setFieldAttribute:function(a,
b,d){ma.push({field:a,attribute:b,value:d})},setRenderer:function(a,b,d){l.prototype.render[a].helpers=Ja;l.prototype.render[a][b]=d},setValidator:function(a,b){e.prototype[a]=b},registerFunction:function(a,b){_registeredFunctions[a]=b},addRenderer:function(a,b,d){this.setRenderer(a,b,d)},trackLoadedCssFiles:function(a){Ga.push(a)},handleCaptureUniqueResponse:function(a){ka(a)},handleCaptureResponse:function(a,b){var d;if("ok"===a.stat&&(d=a.result,d.accessToken&&d.oneTime&&(K=d.accessToken,ga=!0),
d.accessToken&&!d.oneTime&&L(d.accessToken),d&&d.status)){ia[d.transactionId]=d;"success"===d.status?(janrain.events.onCaptureSuccessfulSave.fire(d),K&&!ga?K="":ga=!1):janrain.events.onCaptureFailedSave.fire(d);if("traditionalSignin"===d.action||"socialSignin"===d.action)if("success"===d.status){if(d.authorizationCode){var e;e=janrain.settings.capture.redirectUri;var g={code:d.authorizationCode},h=-1<e.indexOf("?")?"&":"?",i=[],j;for(j in g)g.hasOwnProperty(j)&&i.push(j+"="+encodeURIComponent(g[j]));
e=e+h+i.join("&");d.redirectUri=e}janrain.events.onCaptureSuccessfulLogin.fire(d);d.authorizationCode&&janrain.settings.capture.redirectOnLogin&&(window.location=e)}else janrain.events.onCaptureFailedLogin.fire(d);if("traditionalRegister"===d.action||"socialRegister"===d.action)"success"===d.status?janrain.events.onCaptureSuccessfulRegistration.fire(d):janrain.events.onCaptureFailedRegistration.fire(d);d.userData&&janrain.settings.capture.setProfileCookie&&(d=d.userData,j=W(),(new Ia).setExpirationDirectly(j).setName("janrainCaptureProfileData").setValue(u.stringify(d)).create())}"function"===
typeof b&&b()},handleErrorResponse:function(a,b){var d=a.result.error+": "+a.result.errorDescription;if(Y){var e=i.domHelpers.createDiv({classes:["capture_fatal_error"],elementId:"fatalerror_"+(new Date).getTime()});e.innerHTML=d;Y.insertBefore(e,Y.firstChild);janrain.events.onCaptureContentChange.fire()}Y||alert(d);q(a);"function"===typeof b&&b()},createCaptureSession:function(a){L(a)},addTransactionIds:function(a){ra(a)},getPayload:function(){},getUserPhotos:function(a){"undefined"!==typeof C&&
$(janrain.settings.capture.captureServer+"/photo/get_user_photos?access_token="+C,a)},setUserPhotos:function(a){G=a},getUserData:function(a){"undefined"!==typeof C&&$(janrain.settings.capture.captureServer+"/photo/get_user_json?access_token="+C,a)},setUserData:function(){},validationHandler:function(a){var b=document.getElementById(a.elementId),d=new i.validation;d.setParentDiv(b);a.valid?d.valid():d.notValid(a.reason)}}};return{engage:{signin:janrain.engage.signin?janrain.engage.signin:va,share:janrain.engage.share?
janrain.engage.share:l},capture:{ui:ka}}}();janrain.engage=janrain.apps.engage;janrain.capture=janrain.apps.capture;